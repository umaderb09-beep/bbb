var wx=Object.defineProperty;var _x=(t,e,s)=>e in t?wx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var ie=(t,e,s)=>_x(t,typeof e!="symbol"?e+"":e,s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();var Mt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function kx(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),s}var Mp={exports:{}},Ba={},Lp={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wi=Symbol.for("react.element"),Sx=Symbol.for("react.portal"),Nx=Symbol.for("react.fragment"),Cx=Symbol.for("react.strict_mode"),Px=Symbol.for("react.profiler"),Ex=Symbol.for("react.provider"),Tx=Symbol.for("react.context"),Ax=Symbol.for("react.forward_ref"),Ox=Symbol.for("react.suspense"),Rx=Symbol.for("react.memo"),Mx=Symbol.for("react.lazy"),Dd=Symbol.iterator;function Lx(t){return t===null||typeof t!="object"?null:(t=Dd&&t[Dd]||t["@@iterator"],typeof t=="function"?t:null)}var Dp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ip=Object.assign,Bp={};function Nr(t,e,s){this.props=t,this.context=e,this.refs=Bp,this.updater=s||Dp}Nr.prototype.isReactComponent={};Nr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Nr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function zp(){}zp.prototype=Nr.prototype;function _u(t,e,s){this.props=t,this.context=e,this.refs=Bp,this.updater=s||Dp}var ju=_u.prototype=new zp;ju.constructor=_u;Ip(ju,Nr.prototype);ju.isPureReactComponent=!0;var Id=Array.isArray,$p=Object.prototype.hasOwnProperty,ku={current:null},Fp={key:!0,ref:!0,__self:!0,__source:!0};function Up(t,e,s){var n,r={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)$p.call(e,n)&&!Fp.hasOwnProperty(n)&&(r[n]=e[n]);var l=arguments.length-2;if(l===1)r.children=s;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)r[n]===void 0&&(r[n]=l[n]);return{$$typeof:Wi,type:t,key:i,ref:o,props:r,_owner:ku.current}}function Dx(t,e){return{$$typeof:Wi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Su(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wi}function Ix(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var Bd=/\/+/g;function pl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ix(""+t.key):e.toString(36)}function Do(t,e,s,n,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Wi:case Sx:o=!0}}if(o)return o=t,r=r(o),t=n===""?"."+pl(o,0):n,Id(r)?(s="",t!=null&&(s=t.replace(Bd,"$&/")+"/"),Do(r,e,s,"",function(u){return u})):r!=null&&(Su(r)&&(r=Dx(r,s+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Bd,"$&/")+"/")+t)),e.push(r)),1;if(o=0,n=n===""?".":n+":",Id(t))for(var l=0;l<t.length;l++){i=t[l];var c=n+pl(i,l);o+=Do(i,e,s,c,r)}else if(c=Lx(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=n+pl(i,l++),o+=Do(i,e,s,c,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function to(t,e,s){if(t==null)return t;var n=[],r=0;return Do(t,n,"","",function(i){return e.call(s,i,r++)}),n}function Bx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rt={current:null},Io={transition:null},zx={ReactCurrentDispatcher:rt,ReactCurrentBatchConfig:Io,ReactCurrentOwner:ku};function Wp(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:to,forEach:function(t,e,s){to(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return to(t,function(){e++}),e},toArray:function(t){return to(t,function(e){return e})||[]},only:function(t){if(!Su(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=Nr;le.Fragment=Nx;le.Profiler=Px;le.PureComponent=_u;le.StrictMode=Cx;le.Suspense=Ox;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zx;le.act=Wp;le.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Ip({},t.props),r=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=ku.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)$p.call(e,c)&&!Fp.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Wi,type:t.type,key:r,ref:i,props:n,_owner:o}};le.createContext=function(t){return t={$$typeof:Tx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ex,_context:t},t.Consumer=t};le.createElement=Up;le.createFactory=function(t){var e=Up.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:Ax,render:t}};le.isValidElement=Su;le.lazy=function(t){return{$$typeof:Mx,_payload:{_status:-1,_result:t},_init:Bx}};le.memo=function(t,e){return{$$typeof:Rx,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=Io.transition;Io.transition={};try{t()}finally{Io.transition=e}};le.unstable_act=Wp;le.useCallback=function(t,e){return rt.current.useCallback(t,e)};le.useContext=function(t){return rt.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return rt.current.useDeferredValue(t)};le.useEffect=function(t,e){return rt.current.useEffect(t,e)};le.useId=function(){return rt.current.useId()};le.useImperativeHandle=function(t,e,s){return rt.current.useImperativeHandle(t,e,s)};le.useInsertionEffect=function(t,e){return rt.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return rt.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return rt.current.useMemo(t,e)};le.useReducer=function(t,e,s){return rt.current.useReducer(t,e,s)};le.useRef=function(t){return rt.current.useRef(t)};le.useState=function(t){return rt.current.useState(t)};le.useSyncExternalStore=function(t,e,s){return rt.current.useSyncExternalStore(t,e,s)};le.useTransition=function(){return rt.current.useTransition()};le.version="18.3.1";Lp.exports=le;var A=Lp.exports;const Ue=jx(A);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $x=A,Fx=Symbol.for("react.element"),Ux=Symbol.for("react.fragment"),Wx=Object.prototype.hasOwnProperty,Hx=$x.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Vx={key:!0,ref:!0,__self:!0,__source:!0};function Hp(t,e,s){var n,r={},i=null,o=null;s!==void 0&&(i=""+s),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Wx.call(e,n)&&!Vx.hasOwnProperty(n)&&(r[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:Fx,type:t,key:i,ref:o,props:r,_owner:Hx.current}}Ba.Fragment=Ux;Ba.jsx=Hp;Ba.jsxs=Hp;Mp.exports=Ba;var a=Mp.exports,Vp={exports:{}},jt={},qp={exports:{}},Kp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,O){var j=U.length;U.push(O);e:for(;0<j;){var N=j-1>>>1,B=U[N];if(0<r(B,O))U[N]=O,U[j]=B,j=N;else break e}}function s(U){return U.length===0?null:U[0]}function n(U){if(U.length===0)return null;var O=U[0],j=U.pop();if(j!==O){U[0]=j;e:for(var N=0,B=U.length,T=B>>>1;N<T;){var z=2*(N+1)-1,V=U[z],W=z+1,C=U[W];if(0>r(V,j))W<B&&0>r(C,V)?(U[N]=C,U[W]=j,N=W):(U[N]=V,U[z]=j,N=z);else if(W<B&&0>r(C,j))U[N]=C,U[W]=j,N=W;else break e}}return O}function r(U,O){var j=U.sortIndex-O.sortIndex;return j!==0?j:U.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(U){for(var O=s(u);O!==null;){if(O.callback===null)n(u);else if(O.startTime<=U)n(u),O.sortIndex=O.expirationTime,e(c,O);else break;O=s(u)}}function w(U){if(v=!1,y(U),!m)if(s(c)!==null)m=!0,te(k);else{var O=s(u);O!==null&&Z(w,O.startTime-U)}}function k(U,O){m=!1,v&&(v=!1,g(R),R=-1),p=!0;var j=f;try{for(y(O),h=s(c);h!==null&&(!(h.expirationTime>O)||U&&!_());){var N=h.callback;if(typeof N=="function"){h.callback=null,f=h.priorityLevel;var B=N(h.expirationTime<=O);O=t.unstable_now(),typeof B=="function"?h.callback=B:h===s(c)&&n(c),y(O)}else n(c);h=s(c)}if(h!==null)var T=!0;else{var z=s(u);z!==null&&Z(w,z.startTime-O),T=!1}return T}finally{h=null,f=j,p=!1}}var E=!1,P=null,R=-1,S=5,L=-1;function _(){return!(t.unstable_now()-L<S)}function I(){if(P!==null){var U=t.unstable_now();L=U;var O=!0;try{O=P(!0,U)}finally{O?Q():(E=!1,P=null)}}else E=!1}var Q;if(typeof x=="function")Q=function(){x(I)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,X=se.port2;se.port1.onmessage=I,Q=function(){X.postMessage(null)}}else Q=function(){b(I,0)};function te(U){P=U,E||(E=!0,Q())}function Z(U,O){R=b(function(){U(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,te(k))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var j=f;f=O;try{return U()}finally{f=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,O){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var j=f;f=U;try{return O()}finally{f=j}},t.unstable_scheduleCallback=function(U,O,j){var N=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?N+j:N):j=N,U){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=j+B,U={id:d++,callback:O,priorityLevel:U,startTime:j,expirationTime:B,sortIndex:-1},j>N?(U.sortIndex=j,e(u,U),s(c)===null&&U===s(u)&&(v?(g(R),R=-1):v=!0,Z(w,j-N))):(U.sortIndex=B,e(c,U),m||p||(m=!0,te(k))),U},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(U){var O=f;return function(){var j=f;f=O;try{return U.apply(this,arguments)}finally{f=j}}}})(Kp);qp.exports=Kp;var qx=qp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kx=A,_t=qx;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Yp=new Set,bi={};function Rn(t,e){fr(t,e),fr(t+"Capture",e)}function fr(t,e){for(bi[t]=e,t=0;t<e.length;t++)Yp.add(e[t])}var bs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oc=Object.prototype.hasOwnProperty,Yx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zd={},$d={};function Gx(t){return oc.call($d,t)?!0:oc.call(zd,t)?!1:Yx.test(t)?$d[t]=!0:(zd[t]=!0,!1)}function Qx(t,e,s,n){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Jx(t,e,s,n){if(e===null||typeof e>"u"||Qx(t,e,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function it(t,e,s,n,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ve[t]=new it(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ve[e]=new it(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ve[t]=new it(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ve[t]=new it(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ve[t]=new it(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ve[t]=new it(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ve[t]=new it(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ve[t]=new it(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ve[t]=new it(t,5,!1,t.toLowerCase(),null,!1,!1)});var Nu=/[\-:]([a-z])/g;function Cu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Nu,Cu);Ve[e]=new it(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Nu,Cu);Ve[e]=new it(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Nu,Cu);Ve[e]=new it(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ve[t]=new it(t,1,!1,t.toLowerCase(),null,!1,!1)});Ve.xlinkHref=new it("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ve[t]=new it(t,1,!1,t.toLowerCase(),null,!0,!0)});function Pu(t,e,s,n){var r=Ve.hasOwnProperty(e)?Ve[e]:null;(r!==null?r.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Jx(e,s,r,n)&&(s=null),n||r===null?Gx(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):r.mustUseProperty?t[r.propertyName]=s===null?r.type===3?!1:"":s:(e=r.attributeName,n=r.attributeNamespace,s===null?t.removeAttribute(e):(r=r.type,s=r===3||r===4&&s===!0?"":""+s,n?t.setAttributeNS(n,e,s):t.setAttribute(e,s))))}var ks=Kx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,so=Symbol.for("react.element"),qn=Symbol.for("react.portal"),Kn=Symbol.for("react.fragment"),Eu=Symbol.for("react.strict_mode"),ac=Symbol.for("react.profiler"),Gp=Symbol.for("react.provider"),Qp=Symbol.for("react.context"),Tu=Symbol.for("react.forward_ref"),lc=Symbol.for("react.suspense"),cc=Symbol.for("react.suspense_list"),Au=Symbol.for("react.memo"),Es=Symbol.for("react.lazy"),Jp=Symbol.for("react.offscreen"),Fd=Symbol.iterator;function Mr(t){return t===null||typeof t!="object"?null:(t=Fd&&t[Fd]||t["@@iterator"],typeof t=="function"?t:null)}var Ce=Object.assign,ml;function Yr(t){if(ml===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);ml=e&&e[1]||""}return`
`+ml+t}var gl=!1;function xl(t,e){if(!t||gl)return"";gl=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),i=n.stack.split(`
`),o=r.length-1,l=i.length-1;1<=o&&0<=l&&r[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==i[l]){var c=`
`+r[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{gl=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?Yr(t):""}function Xx(t){switch(t.tag){case 5:return Yr(t.type);case 16:return Yr("Lazy");case 13:return Yr("Suspense");case 19:return Yr("SuspenseList");case 0:case 2:case 15:return t=xl(t.type,!1),t;case 11:return t=xl(t.type.render,!1),t;case 1:return t=xl(t.type,!0),t;default:return""}}function uc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Kn:return"Fragment";case qn:return"Portal";case ac:return"Profiler";case Eu:return"StrictMode";case lc:return"Suspense";case cc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Qp:return(t.displayName||"Context")+".Consumer";case Gp:return(t._context.displayName||"Context")+".Provider";case Tu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Au:return e=t.displayName||null,e!==null?e:uc(t.type)||"Memo";case Es:e=t._payload,t=t._init;try{return uc(t(e))}catch{}}return null}function Zx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uc(e);case 8:return e===Eu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ys(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Xp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ey(t){var e=Xp(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var r=s.get,i=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function no(t){t._valueTracker||(t._valueTracker=ey(t))}function Zp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),n="";return t&&(n=Xp(t)?t.checked?"true":"false":t.value),t=n,t!==s?(e.setValue(t),!0):!1}function Xo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function dc(t,e){var s=e.checked;return Ce({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function Ud(t,e){var s=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;s=Ys(e.value!=null?e.value:s),t._wrapperState={initialChecked:n,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function em(t,e){e=e.checked,e!=null&&Pu(t,"checked",e,!1)}function hc(t,e){em(t,e);var s=Ys(e.value),n=e.type;if(s!=null)n==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fc(t,e.type,s):e.hasOwnProperty("defaultValue")&&fc(t,e.type,Ys(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Wd(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function fc(t,e,s){(e!=="number"||Xo(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Gr=Array.isArray;function ir(t,e,s,n){if(t=t.options,e){e={};for(var r=0;r<s.length;r++)e["$"+s[r]]=!0;for(s=0;s<t.length;s++)r=e.hasOwnProperty("$"+t[s].value),t[s].selected!==r&&(t[s].selected=r),r&&n&&(t[s].defaultSelected=!0)}else{for(s=""+Ys(s),e=null,r=0;r<t.length;r++){if(t[r].value===s){t[r].selected=!0,n&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function pc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return Ce({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Hd(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(F(92));if(Gr(s)){if(1<s.length)throw Error(F(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:Ys(s)}}function tm(t,e){var s=Ys(e.value),n=Ys(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),n!=null&&(t.defaultValue=""+n)}function Vd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function sm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?sm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ro,nm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,n,r){MSApp.execUnsafeLocalFunction(function(){return t(e,s,n,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ro=ro||document.createElement("div"),ro.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ro.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wi(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var ni={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ty=["Webkit","ms","Moz","O"];Object.keys(ni).forEach(function(t){ty.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ni[e]=ni[t]})});function rm(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||ni.hasOwnProperty(t)&&ni[t]?(""+e).trim():e+"px"}function im(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var n=s.indexOf("--")===0,r=rm(s,e[s],n);s==="float"&&(s="cssFloat"),n?t.setProperty(s,r):t[s]=r}}var sy=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gc(t,e){if(e){if(sy[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function xc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yc=null;function Ou(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vc=null,or=null,ar=null;function qd(t){if(t=qi(t)){if(typeof vc!="function")throw Error(F(280));var e=t.stateNode;e&&(e=Wa(e),vc(t.stateNode,t.type,e))}}function om(t){or?ar?ar.push(t):ar=[t]:or=t}function am(){if(or){var t=or,e=ar;if(ar=or=null,qd(t),e)for(t=0;t<e.length;t++)qd(e[t])}}function lm(t,e){return t(e)}function cm(){}var yl=!1;function um(t,e,s){if(yl)return t(e,s);yl=!0;try{return lm(t,e,s)}finally{yl=!1,(or!==null||ar!==null)&&(cm(),am())}}function _i(t,e){var s=t.stateNode;if(s===null)return null;var n=Wa(s);if(n===null)return null;s=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(F(231,e,typeof s));return s}var bc=!1;if(bs)try{var Lr={};Object.defineProperty(Lr,"passive",{get:function(){bc=!0}}),window.addEventListener("test",Lr,Lr),window.removeEventListener("test",Lr,Lr)}catch{bc=!1}function ny(t,e,s,n,r,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(s,u)}catch(d){this.onError(d)}}var ri=!1,Zo=null,ea=!1,wc=null,ry={onError:function(t){ri=!0,Zo=t}};function iy(t,e,s,n,r,i,o,l,c){ri=!1,Zo=null,ny.apply(ry,arguments)}function oy(t,e,s,n,r,i,o,l,c){if(iy.apply(this,arguments),ri){if(ri){var u=Zo;ri=!1,Zo=null}else throw Error(F(198));ea||(ea=!0,wc=u)}}function Mn(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function dm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Kd(t){if(Mn(t)!==t)throw Error(F(188))}function ay(t){var e=t.alternate;if(!e){if(e=Mn(t),e===null)throw Error(F(188));return e!==t?null:t}for(var s=t,n=e;;){var r=s.return;if(r===null)break;var i=r.alternate;if(i===null){if(n=r.return,n!==null){s=n;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===s)return Kd(r),t;if(i===n)return Kd(r),e;i=i.sibling}throw Error(F(188))}if(s.return!==n.return)s=r,n=i;else{for(var o=!1,l=r.child;l;){if(l===s){o=!0,s=r,n=i;break}if(l===n){o=!0,n=r,s=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===s){o=!0,s=i,n=r;break}if(l===n){o=!0,n=i,s=r;break}l=l.sibling}if(!o)throw Error(F(189))}}if(s.alternate!==n)throw Error(F(190))}if(s.tag!==3)throw Error(F(188));return s.stateNode.current===s?t:e}function hm(t){return t=ay(t),t!==null?fm(t):null}function fm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=fm(t);if(e!==null)return e;t=t.sibling}return null}var pm=_t.unstable_scheduleCallback,Yd=_t.unstable_cancelCallback,ly=_t.unstable_shouldYield,cy=_t.unstable_requestPaint,Oe=_t.unstable_now,uy=_t.unstable_getCurrentPriorityLevel,Ru=_t.unstable_ImmediatePriority,mm=_t.unstable_UserBlockingPriority,ta=_t.unstable_NormalPriority,dy=_t.unstable_LowPriority,gm=_t.unstable_IdlePriority,za=null,ss=null;function hy(t){if(ss&&typeof ss.onCommitFiberRoot=="function")try{ss.onCommitFiberRoot(za,t,void 0,(t.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:my,fy=Math.log,py=Math.LN2;function my(t){return t>>>=0,t===0?32:31-(fy(t)/py|0)|0}var io=64,oo=4194304;function Qr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function sa(t,e){var s=t.pendingLanes;if(s===0)return 0;var n=0,r=t.suspendedLanes,i=t.pingedLanes,o=s&268435455;if(o!==0){var l=o&~r;l!==0?n=Qr(l):(i&=o,i!==0&&(n=Qr(i)))}else o=s&~r,o!==0?n=Qr(o):i!==0&&(n=Qr(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&r)&&(r=n&-n,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(n&4&&(n|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)s=31-qt(e),r=1<<s,n|=t[s],e&=~r;return n}function gy(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xy(t,e){for(var s=t.suspendedLanes,n=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-qt(i),l=1<<o,c=r[o];c===-1?(!(l&s)||l&n)&&(r[o]=gy(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function _c(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function xm(){var t=io;return io<<=1,!(io&4194240)&&(io=64),t}function vl(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function Hi(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-qt(e),t[e]=s}function yy(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<s;){var r=31-qt(s),i=1<<r;e[r]=0,n[r]=-1,t[r]=-1,s&=~i}}function Mu(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var n=31-qt(s),r=1<<n;r&e|t[n]&e&&(t[n]|=e),s&=~r}}var me=0;function ym(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var vm,Lu,bm,wm,_m,jc=!1,ao=[],zs=null,$s=null,Fs=null,ji=new Map,ki=new Map,As=[],vy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gd(t,e){switch(t){case"focusin":case"focusout":zs=null;break;case"dragenter":case"dragleave":$s=null;break;case"mouseover":case"mouseout":Fs=null;break;case"pointerover":case"pointerout":ji.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ki.delete(e.pointerId)}}function Dr(t,e,s,n,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:s,eventSystemFlags:n,nativeEvent:i,targetContainers:[r]},e!==null&&(e=qi(e),e!==null&&Lu(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function by(t,e,s,n,r){switch(e){case"focusin":return zs=Dr(zs,t,e,s,n,r),!0;case"dragenter":return $s=Dr($s,t,e,s,n,r),!0;case"mouseover":return Fs=Dr(Fs,t,e,s,n,r),!0;case"pointerover":var i=r.pointerId;return ji.set(i,Dr(ji.get(i)||null,t,e,s,n,r)),!0;case"gotpointercapture":return i=r.pointerId,ki.set(i,Dr(ki.get(i)||null,t,e,s,n,r)),!0}return!1}function jm(t){var e=vn(t.target);if(e!==null){var s=Mn(e);if(s!==null){if(e=s.tag,e===13){if(e=dm(s),e!==null){t.blockedOn=e,_m(t.priority,function(){bm(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=kc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var n=new s.constructor(s.type,s);yc=n,s.target.dispatchEvent(n),yc=null}else return e=qi(s),e!==null&&Lu(e),t.blockedOn=s,!1;e.shift()}return!0}function Qd(t,e,s){Bo(t)&&s.delete(e)}function wy(){jc=!1,zs!==null&&Bo(zs)&&(zs=null),$s!==null&&Bo($s)&&($s=null),Fs!==null&&Bo(Fs)&&(Fs=null),ji.forEach(Qd),ki.forEach(Qd)}function Ir(t,e){t.blockedOn===e&&(t.blockedOn=null,jc||(jc=!0,_t.unstable_scheduleCallback(_t.unstable_NormalPriority,wy)))}function Si(t){function e(r){return Ir(r,t)}if(0<ao.length){Ir(ao[0],t);for(var s=1;s<ao.length;s++){var n=ao[s];n.blockedOn===t&&(n.blockedOn=null)}}for(zs!==null&&Ir(zs,t),$s!==null&&Ir($s,t),Fs!==null&&Ir(Fs,t),ji.forEach(e),ki.forEach(e),s=0;s<As.length;s++)n=As[s],n.blockedOn===t&&(n.blockedOn=null);for(;0<As.length&&(s=As[0],s.blockedOn===null);)jm(s),s.blockedOn===null&&As.shift()}var lr=ks.ReactCurrentBatchConfig,na=!0;function _y(t,e,s,n){var r=me,i=lr.transition;lr.transition=null;try{me=1,Du(t,e,s,n)}finally{me=r,lr.transition=i}}function jy(t,e,s,n){var r=me,i=lr.transition;lr.transition=null;try{me=4,Du(t,e,s,n)}finally{me=r,lr.transition=i}}function Du(t,e,s,n){if(na){var r=kc(t,e,s,n);if(r===null)El(t,e,n,ra,s),Gd(t,n);else if(by(r,t,e,s,n))n.stopPropagation();else if(Gd(t,n),e&4&&-1<vy.indexOf(t)){for(;r!==null;){var i=qi(r);if(i!==null&&vm(i),i=kc(t,e,s,n),i===null&&El(t,e,n,ra,s),i===r)break;r=i}r!==null&&n.stopPropagation()}else El(t,e,n,null,s)}}var ra=null;function kc(t,e,s,n){if(ra=null,t=Ou(n),t=vn(t),t!==null)if(e=Mn(t),e===null)t=null;else if(s=e.tag,s===13){if(t=dm(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ra=t,null}function km(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uy()){case Ru:return 1;case mm:return 4;case ta:case dy:return 16;case gm:return 536870912;default:return 16}default:return 16}}var Ms=null,Iu=null,zo=null;function Sm(){if(zo)return zo;var t,e=Iu,s=e.length,n,r="value"in Ms?Ms.value:Ms.textContent,i=r.length;for(t=0;t<s&&e[t]===r[t];t++);var o=s-t;for(n=1;n<=o&&e[s-n]===r[i-n];n++);return zo=r.slice(t,1<n?1-n:void 0)}function $o(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function lo(){return!0}function Jd(){return!1}function kt(t){function e(s,n,r,i,o){this._reactName=s,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(s=t[l],this[l]=s?s(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?lo:Jd,this.isPropagationStopped=Jd,this}return Ce(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=lo)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=lo)},persist:function(){},isPersistent:lo}),e}var Cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bu=kt(Cr),Vi=Ce({},Cr,{view:0,detail:0}),ky=kt(Vi),bl,wl,Br,$a=Ce({},Vi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Br&&(Br&&t.type==="mousemove"?(bl=t.screenX-Br.screenX,wl=t.screenY-Br.screenY):wl=bl=0,Br=t),bl)},movementY:function(t){return"movementY"in t?t.movementY:wl}}),Xd=kt($a),Sy=Ce({},$a,{dataTransfer:0}),Ny=kt(Sy),Cy=Ce({},Vi,{relatedTarget:0}),_l=kt(Cy),Py=Ce({},Cr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ey=kt(Py),Ty=Ce({},Cr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ay=kt(Ty),Oy=Ce({},Cr,{data:0}),Zd=kt(Oy),Ry={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},My={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ly={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dy(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ly[t])?!!e[t]:!1}function zu(){return Dy}var Iy=Ce({},Vi,{key:function(t){if(t.key){var e=Ry[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$o(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?My[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zu,charCode:function(t){return t.type==="keypress"?$o(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$o(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),By=kt(Iy),zy=Ce({},$a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eh=kt(zy),$y=Ce({},Vi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zu}),Fy=kt($y),Uy=Ce({},Cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wy=kt(Uy),Hy=Ce({},$a,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Vy=kt(Hy),qy=[9,13,27,32],$u=bs&&"CompositionEvent"in window,ii=null;bs&&"documentMode"in document&&(ii=document.documentMode);var Ky=bs&&"TextEvent"in window&&!ii,Nm=bs&&(!$u||ii&&8<ii&&11>=ii),th=" ",sh=!1;function Cm(t,e){switch(t){case"keyup":return qy.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yn=!1;function Yy(t,e){switch(t){case"compositionend":return Pm(e);case"keypress":return e.which!==32?null:(sh=!0,th);case"textInput":return t=e.data,t===th&&sh?null:t;default:return null}}function Gy(t,e){if(Yn)return t==="compositionend"||!$u&&Cm(t,e)?(t=Sm(),zo=Iu=Ms=null,Yn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Nm&&e.locale!=="ko"?null:e.data;default:return null}}var Qy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Qy[t.type]:e==="textarea"}function Em(t,e,s,n){om(n),e=ia(e,"onChange"),0<e.length&&(s=new Bu("onChange","change",null,s,n),t.push({event:s,listeners:e}))}var oi=null,Ni=null;function Jy(t){$m(t,0)}function Fa(t){var e=Jn(t);if(Zp(e))return t}function Xy(t,e){if(t==="change")return e}var Tm=!1;if(bs){var jl;if(bs){var kl="oninput"in document;if(!kl){var rh=document.createElement("div");rh.setAttribute("oninput","return;"),kl=typeof rh.oninput=="function"}jl=kl}else jl=!1;Tm=jl&&(!document.documentMode||9<document.documentMode)}function ih(){oi&&(oi.detachEvent("onpropertychange",Am),Ni=oi=null)}function Am(t){if(t.propertyName==="value"&&Fa(Ni)){var e=[];Em(e,Ni,t,Ou(t)),um(Jy,e)}}function Zy(t,e,s){t==="focusin"?(ih(),oi=e,Ni=s,oi.attachEvent("onpropertychange",Am)):t==="focusout"&&ih()}function ev(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fa(Ni)}function tv(t,e){if(t==="click")return Fa(e)}function sv(t,e){if(t==="input"||t==="change")return Fa(e)}function nv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yt=typeof Object.is=="function"?Object.is:nv;function Ci(t,e){if(Yt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),n=Object.keys(e);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var r=s[n];if(!oc.call(e,r)||!Yt(t[r],e[r]))return!1}return!0}function oh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ah(t,e){var s=oh(t);t=0;for(var n;s;){if(s.nodeType===3){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=oh(s)}}function Om(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Om(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Rm(){for(var t=window,e=Xo();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=Xo(t.document)}return e}function Fu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function rv(t){var e=Rm(),s=t.focusedElem,n=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&Om(s.ownerDocument.documentElement,s)){if(n!==null&&Fu(s)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=s.textContent.length,i=Math.min(n.start,r);n=n.end===void 0?i:Math.min(n.end,r),!t.extend&&i>n&&(r=n,n=i,i=r),r=ah(s,i);var o=ah(s,n);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var iv=bs&&"documentMode"in document&&11>=document.documentMode,Gn=null,Sc=null,ai=null,Nc=!1;function lh(t,e,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Nc||Gn==null||Gn!==Xo(n)||(n=Gn,"selectionStart"in n&&Fu(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ai&&Ci(ai,n)||(ai=n,n=ia(Sc,"onSelect"),0<n.length&&(e=new Bu("onSelect","select",null,e,s),t.push({event:e,listeners:n}),e.target=Gn)))}function co(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var Qn={animationend:co("Animation","AnimationEnd"),animationiteration:co("Animation","AnimationIteration"),animationstart:co("Animation","AnimationStart"),transitionend:co("Transition","TransitionEnd")},Sl={},Mm={};bs&&(Mm=document.createElement("div").style,"AnimationEvent"in window||(delete Qn.animationend.animation,delete Qn.animationiteration.animation,delete Qn.animationstart.animation),"TransitionEvent"in window||delete Qn.transitionend.transition);function Ua(t){if(Sl[t])return Sl[t];if(!Qn[t])return t;var e=Qn[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in Mm)return Sl[t]=e[s];return t}var Lm=Ua("animationend"),Dm=Ua("animationiteration"),Im=Ua("animationstart"),Bm=Ua("transitionend"),zm=new Map,ch="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zs(t,e){zm.set(t,e),Rn(e,[t])}for(var Nl=0;Nl<ch.length;Nl++){var Cl=ch[Nl],ov=Cl.toLowerCase(),av=Cl[0].toUpperCase()+Cl.slice(1);Zs(ov,"on"+av)}Zs(Lm,"onAnimationEnd");Zs(Dm,"onAnimationIteration");Zs(Im,"onAnimationStart");Zs("dblclick","onDoubleClick");Zs("focusin","onFocus");Zs("focusout","onBlur");Zs(Bm,"onTransitionEnd");fr("onMouseEnter",["mouseout","mouseover"]);fr("onMouseLeave",["mouseout","mouseover"]);fr("onPointerEnter",["pointerout","pointerover"]);fr("onPointerLeave",["pointerout","pointerover"]);Rn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jr));function uh(t,e,s){var n=t.type||"unknown-event";t.currentTarget=s,oy(n,e,void 0,t),t.currentTarget=null}function $m(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var n=t[s],r=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;uh(r,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;uh(r,l,u),i=c}}}if(ea)throw t=wc,ea=!1,wc=null,t}function we(t,e){var s=e[Ac];s===void 0&&(s=e[Ac]=new Set);var n=t+"__bubble";s.has(n)||(Fm(e,t,2,!1),s.add(n))}function Pl(t,e,s){var n=0;e&&(n|=4),Fm(s,t,n,e)}var uo="_reactListening"+Math.random().toString(36).slice(2);function Pi(t){if(!t[uo]){t[uo]=!0,Yp.forEach(function(s){s!=="selectionchange"&&(lv.has(s)||Pl(s,!1,t),Pl(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[uo]||(e[uo]=!0,Pl("selectionchange",!1,e))}}function Fm(t,e,s,n){switch(km(e)){case 1:var r=_y;break;case 4:r=jy;break;default:r=Du}s=r.bind(null,e,s,t),r=void 0,!bc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),n?r!==void 0?t.addEventListener(e,s,{capture:!0,passive:r}):t.addEventListener(e,s,!0):r!==void 0?t.addEventListener(e,s,{passive:r}):t.addEventListener(e,s,!1)}function El(t,e,s,n,r){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;l!==null;){if(o=vn(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}um(function(){var u=i,d=Ou(s),h=[];e:{var f=zm.get(t);if(f!==void 0){var p=Bu,m=t;switch(t){case"keypress":if($o(s)===0)break e;case"keydown":case"keyup":p=By;break;case"focusin":m="focus",p=_l;break;case"focusout":m="blur",p=_l;break;case"beforeblur":case"afterblur":p=_l;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Xd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Ny;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Fy;break;case Lm:case Dm:case Im:p=Ey;break;case Bm:p=Wy;break;case"scroll":p=ky;break;case"wheel":p=Vy;break;case"copy":case"cut":case"paste":p=Ay;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=eh}var v=(e&4)!==0,b=!v&&t==="scroll",g=v?f!==null?f+"Capture":null:f;v=[];for(var x=u,y;x!==null;){y=x;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,g!==null&&(w=_i(x,g),w!=null&&v.push(Ei(x,w,y)))),b)break;x=x.return}0<v.length&&(f=new p(f,m,null,s,d),h.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&s!==yc&&(m=s.relatedTarget||s.fromElement)&&(vn(m)||m[ws]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=s.relatedTarget||s.toElement,p=u,m=m?vn(m):null,m!==null&&(b=Mn(m),m!==b||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(v=Xd,w="onMouseLeave",g="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(v=eh,w="onPointerLeave",g="onPointerEnter",x="pointer"),b=p==null?f:Jn(p),y=m==null?f:Jn(m),f=new v(w,x+"leave",p,s,d),f.target=b,f.relatedTarget=y,w=null,vn(d)===u&&(v=new v(g,x+"enter",m,s,d),v.target=y,v.relatedTarget=b,w=v),b=w,p&&m)t:{for(v=p,g=m,x=0,y=v;y;y=In(y))x++;for(y=0,w=g;w;w=In(w))y++;for(;0<x-y;)v=In(v),x--;for(;0<y-x;)g=In(g),y--;for(;x--;){if(v===g||g!==null&&v===g.alternate)break t;v=In(v),g=In(g)}v=null}else v=null;p!==null&&dh(h,f,p,v,!1),m!==null&&b!==null&&dh(h,b,m,v,!0)}}e:{if(f=u?Jn(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var k=Xy;else if(nh(f))if(Tm)k=sv;else{k=ev;var E=Zy}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=tv);if(k&&(k=k(t,u))){Em(h,k,s,d);break e}E&&E(t,f,u),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&fc(f,"number",f.value)}switch(E=u?Jn(u):window,t){case"focusin":(nh(E)||E.contentEditable==="true")&&(Gn=E,Sc=u,ai=null);break;case"focusout":ai=Sc=Gn=null;break;case"mousedown":Nc=!0;break;case"contextmenu":case"mouseup":case"dragend":Nc=!1,lh(h,s,d);break;case"selectionchange":if(iv)break;case"keydown":case"keyup":lh(h,s,d)}var P;if($u)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Yn?Cm(t,s)&&(R="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(R="onCompositionStart");R&&(Nm&&s.locale!=="ko"&&(Yn||R!=="onCompositionStart"?R==="onCompositionEnd"&&Yn&&(P=Sm()):(Ms=d,Iu="value"in Ms?Ms.value:Ms.textContent,Yn=!0)),E=ia(u,R),0<E.length&&(R=new Zd(R,t,null,s,d),h.push({event:R,listeners:E}),P?R.data=P:(P=Pm(s),P!==null&&(R.data=P)))),(P=Ky?Yy(t,s):Gy(t,s))&&(u=ia(u,"onBeforeInput"),0<u.length&&(d=new Zd("onBeforeInput","beforeinput",null,s,d),h.push({event:d,listeners:u}),d.data=P))}$m(h,e)})}function Ei(t,e,s){return{instance:t,listener:e,currentTarget:s}}function ia(t,e){for(var s=e+"Capture",n=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=_i(t,s),i!=null&&n.unshift(Ei(t,i,r)),i=_i(t,e),i!=null&&n.push(Ei(t,i,r))),t=t.return}return n}function In(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function dh(t,e,s,n,r){for(var i=e._reactName,o=[];s!==null&&s!==n;){var l=s,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,r?(c=_i(s,i),c!=null&&o.unshift(Ei(s,c,l))):r||(c=_i(s,i),c!=null&&o.push(Ei(s,c,l)))),s=s.return}o.length!==0&&t.push({event:e,listeners:o})}var cv=/\r\n?/g,uv=/\u0000|\uFFFD/g;function hh(t){return(typeof t=="string"?t:""+t).replace(cv,`
`).replace(uv,"")}function ho(t,e,s){if(e=hh(e),hh(t)!==e&&s)throw Error(F(425))}function oa(){}var Cc=null,Pc=null;function Ec(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Tc=typeof setTimeout=="function"?setTimeout:void 0,dv=typeof clearTimeout=="function"?clearTimeout:void 0,fh=typeof Promise=="function"?Promise:void 0,hv=typeof queueMicrotask=="function"?queueMicrotask:typeof fh<"u"?function(t){return fh.resolve(null).then(t).catch(fv)}:Tc;function fv(t){setTimeout(function(){throw t})}function Tl(t,e){var s=e,n=0;do{var r=s.nextSibling;if(t.removeChild(s),r&&r.nodeType===8)if(s=r.data,s==="/$"){if(n===0){t.removeChild(r),Si(e);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=r}while(s);Si(e)}function Us(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ph(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var Pr=Math.random().toString(36).slice(2),es="__reactFiber$"+Pr,Ti="__reactProps$"+Pr,ws="__reactContainer$"+Pr,Ac="__reactEvents$"+Pr,pv="__reactListeners$"+Pr,mv="__reactHandles$"+Pr;function vn(t){var e=t[es];if(e)return e;for(var s=t.parentNode;s;){if(e=s[ws]||s[es]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=ph(t);t!==null;){if(s=t[es])return s;t=ph(t)}return e}t=s,s=t.parentNode}return null}function qi(t){return t=t[es]||t[ws],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Jn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function Wa(t){return t[Ti]||null}var Oc=[],Xn=-1;function en(t){return{current:t}}function je(t){0>Xn||(t.current=Oc[Xn],Oc[Xn]=null,Xn--)}function ve(t,e){Xn++,Oc[Xn]=t.current,t.current=e}var Gs={},Je=en(Gs),ht=en(!1),Nn=Gs;function pr(t,e){var s=t.type.contextTypes;if(!s)return Gs;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in s)r[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function ft(t){return t=t.childContextTypes,t!=null}function aa(){je(ht),je(Je)}function mh(t,e,s){if(Je.current!==Gs)throw Error(F(168));ve(Je,e),ve(ht,s)}function Um(t,e,s){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(F(108,Zx(t)||"Unknown",r));return Ce({},s,n)}function la(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Gs,Nn=Je.current,ve(Je,t),ve(ht,ht.current),!0}function gh(t,e,s){var n=t.stateNode;if(!n)throw Error(F(169));s?(t=Um(t,e,Nn),n.__reactInternalMemoizedMergedChildContext=t,je(ht),je(Je),ve(Je,t)):je(ht),ve(ht,s)}var fs=null,Ha=!1,Al=!1;function Wm(t){fs===null?fs=[t]:fs.push(t)}function gv(t){Ha=!0,Wm(t)}function tn(){if(!Al&&fs!==null){Al=!0;var t=0,e=me;try{var s=fs;for(me=1;t<s.length;t++){var n=s[t];do n=n(!0);while(n!==null)}fs=null,Ha=!1}catch(r){throw fs!==null&&(fs=fs.slice(t+1)),pm(Ru,tn),r}finally{me=e,Al=!1}}return null}var Zn=[],er=0,ca=null,ua=0,Tt=[],At=0,Cn=null,ms=1,gs="";function fn(t,e){Zn[er++]=ua,Zn[er++]=ca,ca=t,ua=e}function Hm(t,e,s){Tt[At++]=ms,Tt[At++]=gs,Tt[At++]=Cn,Cn=t;var n=ms;t=gs;var r=32-qt(n)-1;n&=~(1<<r),s+=1;var i=32-qt(e)+r;if(30<i){var o=r-r%5;i=(n&(1<<o)-1).toString(32),n>>=o,r-=o,ms=1<<32-qt(e)+r|s<<r|n,gs=i+t}else ms=1<<i|s<<r|n,gs=t}function Uu(t){t.return!==null&&(fn(t,1),Hm(t,1,0))}function Wu(t){for(;t===ca;)ca=Zn[--er],Zn[er]=null,ua=Zn[--er],Zn[er]=null;for(;t===Cn;)Cn=Tt[--At],Tt[At]=null,gs=Tt[--At],Tt[At]=null,ms=Tt[--At],Tt[At]=null}var bt=null,yt=null,ke=!1,Vt=null;function Vm(t,e){var s=Ot(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function xh(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bt=t,yt=Us(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bt=t,yt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=Cn!==null?{id:ms,overflow:gs}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=Ot(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,bt=t,yt=null,!0):!1;default:return!1}}function Rc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mc(t){if(ke){var e=yt;if(e){var s=e;if(!xh(t,e)){if(Rc(t))throw Error(F(418));e=Us(s.nextSibling);var n=bt;e&&xh(t,e)?Vm(n,s):(t.flags=t.flags&-4097|2,ke=!1,bt=t)}}else{if(Rc(t))throw Error(F(418));t.flags=t.flags&-4097|2,ke=!1,bt=t}}}function yh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bt=t}function fo(t){if(t!==bt)return!1;if(!ke)return yh(t),ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ec(t.type,t.memoizedProps)),e&&(e=yt)){if(Rc(t))throw qm(),Error(F(418));for(;e;)Vm(t,e),e=Us(e.nextSibling)}if(yh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){yt=Us(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}yt=null}}else yt=bt?Us(t.stateNode.nextSibling):null;return!0}function qm(){for(var t=yt;t;)t=Us(t.nextSibling)}function mr(){yt=bt=null,ke=!1}function Hu(t){Vt===null?Vt=[t]:Vt.push(t)}var xv=ks.ReactCurrentBatchConfig;function zr(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(F(309));var n=s.stateNode}if(!n)throw Error(F(147,t));var r=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=r.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!s._owner)throw Error(F(290,t))}return t}function po(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vh(t){var e=t._init;return e(t._payload)}function Km(t){function e(g,x){if(t){var y=g.deletions;y===null?(g.deletions=[x],g.flags|=16):y.push(x)}}function s(g,x){if(!t)return null;for(;x!==null;)e(g,x),x=x.sibling;return null}function n(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function r(g,x){return g=qs(g,x),g.index=0,g.sibling=null,g}function i(g,x,y){return g.index=y,t?(y=g.alternate,y!==null?(y=y.index,y<x?(g.flags|=2,x):y):(g.flags|=2,x)):(g.flags|=1048576,x)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,x,y,w){return x===null||x.tag!==6?(x=Bl(y,g.mode,w),x.return=g,x):(x=r(x,y),x.return=g,x)}function c(g,x,y,w){var k=y.type;return k===Kn?d(g,x,y.props.children,w,y.key):x!==null&&(x.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Es&&vh(k)===x.type)?(w=r(x,y.props),w.ref=zr(g,x,y),w.return=g,w):(w=Ko(y.type,y.key,y.props,null,g.mode,w),w.ref=zr(g,x,y),w.return=g,w)}function u(g,x,y,w){return x===null||x.tag!==4||x.stateNode.containerInfo!==y.containerInfo||x.stateNode.implementation!==y.implementation?(x=zl(y,g.mode,w),x.return=g,x):(x=r(x,y.children||[]),x.return=g,x)}function d(g,x,y,w,k){return x===null||x.tag!==7?(x=kn(y,g.mode,w,k),x.return=g,x):(x=r(x,y),x.return=g,x)}function h(g,x,y){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Bl(""+x,g.mode,y),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case so:return y=Ko(x.type,x.key,x.props,null,g.mode,y),y.ref=zr(g,null,x),y.return=g,y;case qn:return x=zl(x,g.mode,y),x.return=g,x;case Es:var w=x._init;return h(g,w(x._payload),y)}if(Gr(x)||Mr(x))return x=kn(x,g.mode,y,null),x.return=g,x;po(g,x)}return null}function f(g,x,y,w){var k=x!==null?x.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return k!==null?null:l(g,x,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case so:return y.key===k?c(g,x,y,w):null;case qn:return y.key===k?u(g,x,y,w):null;case Es:return k=y._init,f(g,x,k(y._payload),w)}if(Gr(y)||Mr(y))return k!==null?null:d(g,x,y,w,null);po(g,y)}return null}function p(g,x,y,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(y)||null,l(x,g,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case so:return g=g.get(w.key===null?y:w.key)||null,c(x,g,w,k);case qn:return g=g.get(w.key===null?y:w.key)||null,u(x,g,w,k);case Es:var E=w._init;return p(g,x,y,E(w._payload),k)}if(Gr(w)||Mr(w))return g=g.get(y)||null,d(x,g,w,k,null);po(x,w)}return null}function m(g,x,y,w){for(var k=null,E=null,P=x,R=x=0,S=null;P!==null&&R<y.length;R++){P.index>R?(S=P,P=null):S=P.sibling;var L=f(g,P,y[R],w);if(L===null){P===null&&(P=S);break}t&&P&&L.alternate===null&&e(g,P),x=i(L,x,R),E===null?k=L:E.sibling=L,E=L,P=S}if(R===y.length)return s(g,P),ke&&fn(g,R),k;if(P===null){for(;R<y.length;R++)P=h(g,y[R],w),P!==null&&(x=i(P,x,R),E===null?k=P:E.sibling=P,E=P);return ke&&fn(g,R),k}for(P=n(g,P);R<y.length;R++)S=p(P,g,R,y[R],w),S!==null&&(t&&S.alternate!==null&&P.delete(S.key===null?R:S.key),x=i(S,x,R),E===null?k=S:E.sibling=S,E=S);return t&&P.forEach(function(_){return e(g,_)}),ke&&fn(g,R),k}function v(g,x,y,w){var k=Mr(y);if(typeof k!="function")throw Error(F(150));if(y=k.call(y),y==null)throw Error(F(151));for(var E=k=null,P=x,R=x=0,S=null,L=y.next();P!==null&&!L.done;R++,L=y.next()){P.index>R?(S=P,P=null):S=P.sibling;var _=f(g,P,L.value,w);if(_===null){P===null&&(P=S);break}t&&P&&_.alternate===null&&e(g,P),x=i(_,x,R),E===null?k=_:E.sibling=_,E=_,P=S}if(L.done)return s(g,P),ke&&fn(g,R),k;if(P===null){for(;!L.done;R++,L=y.next())L=h(g,L.value,w),L!==null&&(x=i(L,x,R),E===null?k=L:E.sibling=L,E=L);return ke&&fn(g,R),k}for(P=n(g,P);!L.done;R++,L=y.next())L=p(P,g,R,L.value,w),L!==null&&(t&&L.alternate!==null&&P.delete(L.key===null?R:L.key),x=i(L,x,R),E===null?k=L:E.sibling=L,E=L);return t&&P.forEach(function(I){return e(g,I)}),ke&&fn(g,R),k}function b(g,x,y,w){if(typeof y=="object"&&y!==null&&y.type===Kn&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case so:e:{for(var k=y.key,E=x;E!==null;){if(E.key===k){if(k=y.type,k===Kn){if(E.tag===7){s(g,E.sibling),x=r(E,y.props.children),x.return=g,g=x;break e}}else if(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Es&&vh(k)===E.type){s(g,E.sibling),x=r(E,y.props),x.ref=zr(g,E,y),x.return=g,g=x;break e}s(g,E);break}else e(g,E);E=E.sibling}y.type===Kn?(x=kn(y.props.children,g.mode,w,y.key),x.return=g,g=x):(w=Ko(y.type,y.key,y.props,null,g.mode,w),w.ref=zr(g,x,y),w.return=g,g=w)}return o(g);case qn:e:{for(E=y.key;x!==null;){if(x.key===E)if(x.tag===4&&x.stateNode.containerInfo===y.containerInfo&&x.stateNode.implementation===y.implementation){s(g,x.sibling),x=r(x,y.children||[]),x.return=g,g=x;break e}else{s(g,x);break}else e(g,x);x=x.sibling}x=zl(y,g.mode,w),x.return=g,g=x}return o(g);case Es:return E=y._init,b(g,x,E(y._payload),w)}if(Gr(y))return m(g,x,y,w);if(Mr(y))return v(g,x,y,w);po(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,x!==null&&x.tag===6?(s(g,x.sibling),x=r(x,y),x.return=g,g=x):(s(g,x),x=Bl(y,g.mode,w),x.return=g,g=x),o(g)):s(g,x)}return b}var gr=Km(!0),Ym=Km(!1),da=en(null),ha=null,tr=null,Vu=null;function qu(){Vu=tr=ha=null}function Ku(t){var e=da.current;je(da),t._currentValue=e}function Lc(t,e,s){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===s)break;t=t.return}}function cr(t,e){ha=t,Vu=tr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dt=!0),t.firstContext=null)}function Lt(t){var e=t._currentValue;if(Vu!==t)if(t={context:t,memoizedValue:e,next:null},tr===null){if(ha===null)throw Error(F(308));tr=t,ha.dependencies={lanes:0,firstContext:t}}else tr=tr.next=t;return e}var bn=null;function Yu(t){bn===null?bn=[t]:bn.push(t)}function Gm(t,e,s,n){var r=e.interleaved;return r===null?(s.next=s,Yu(e)):(s.next=r.next,r.next=s),e.interleaved=s,_s(t,n)}function _s(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var Ts=!1;function Gu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ws(t,e,s){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,fe&2){var r=n.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e,_s(t,s)}return r=n.interleaved,r===null?(e.next=e,Yu(n)):(e.next=r.next,r.next=e),n.interleaved=e,_s(t,s)}function Fo(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Mu(t,s)}}function bh(t,e){var s=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var r=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?r=i=o:i=i.next=o,s=s.next}while(s!==null);i===null?r=i=e:i=i.next=e}else r=i=e;s={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function fa(t,e,s,n){var r=t.updateQueue;Ts=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=r.baseState;o=0,d=u=c=null,l=i;do{var f=l.lane,p=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=t,v=l;switch(f=e,p=s,v.tag){case 1:if(m=v.payload,typeof m=="function"){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,f=typeof m=="function"?m.call(p,h,f):m,f==null)break e;h=Ce({},h,f);break e;case 2:Ts=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,o|=f;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;f=l,l=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(d===null&&(c=h),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=d,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);En|=o,t.lanes=o,t.memoizedState=h}}function wh(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],r=n.callback;if(r!==null){if(n.callback=null,n=s,typeof r!="function")throw Error(F(191,r));r.call(n)}}}var Ki={},ns=en(Ki),Ai=en(Ki),Oi=en(Ki);function wn(t){if(t===Ki)throw Error(F(174));return t}function Qu(t,e){switch(ve(Oi,e),ve(Ai,t),ve(ns,Ki),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mc(e,t)}je(ns),ve(ns,e)}function xr(){je(ns),je(Ai),je(Oi)}function Jm(t){wn(Oi.current);var e=wn(ns.current),s=mc(e,t.type);e!==s&&(ve(Ai,t),ve(ns,s))}function Ju(t){Ai.current===t&&(je(ns),je(Ai))}var Se=en(0);function pa(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ol=[];function Xu(){for(var t=0;t<Ol.length;t++)Ol[t]._workInProgressVersionPrimary=null;Ol.length=0}var Uo=ks.ReactCurrentDispatcher,Rl=ks.ReactCurrentBatchConfig,Pn=0,Ne=null,Le=null,Be=null,ma=!1,li=!1,Ri=0,yv=0;function Ke(){throw Error(F(321))}function Zu(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!Yt(t[s],e[s]))return!1;return!0}function ed(t,e,s,n,r,i){if(Pn=i,Ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Uo.current=t===null||t.memoizedState===null?_v:jv,t=s(n,r),li){i=0;do{if(li=!1,Ri=0,25<=i)throw Error(F(301));i+=1,Be=Le=null,e.updateQueue=null,Uo.current=kv,t=s(n,r)}while(li)}if(Uo.current=ga,e=Le!==null&&Le.next!==null,Pn=0,Be=Le=Ne=null,ma=!1,e)throw Error(F(300));return t}function td(){var t=Ri!==0;return Ri=0,t}function Xt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?Ne.memoizedState=Be=t:Be=Be.next=t,Be}function Dt(){if(Le===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=Le.next;var e=Be===null?Ne.memoizedState:Be.next;if(e!==null)Be=e,Le=t;else{if(t===null)throw Error(F(310));Le=t,t={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},Be===null?Ne.memoizedState=Be=t:Be=Be.next=t}return Be}function Mi(t,e){return typeof e=="function"?e(t):e}function Ml(t){var e=Dt(),s=e.queue;if(s===null)throw Error(F(311));s.lastRenderedReducer=t;var n=Le,r=n.baseQueue,i=s.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}n.baseQueue=r=i,s.pending=null}if(r!==null){i=r.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Pn&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,Ne.lanes|=d,En|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,Yt(n,e.memoizedState)||(dt=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,s.lastRenderedState=n}if(t=s.interleaved,t!==null){r=t;do i=r.lane,Ne.lanes|=i,En|=i,r=r.next;while(r!==t)}else r===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function Ll(t){var e=Dt(),s=e.queue;if(s===null)throw Error(F(311));s.lastRenderedReducer=t;var n=s.dispatch,r=s.pending,i=e.memoizedState;if(r!==null){s.pending=null;var o=r=r.next;do i=t(i,o.action),o=o.next;while(o!==r);Yt(i,e.memoizedState)||(dt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),s.lastRenderedState=i}return[i,n]}function Xm(){}function Zm(t,e){var s=Ne,n=Dt(),r=e(),i=!Yt(n.memoizedState,r);if(i&&(n.memoizedState=r,dt=!0),n=n.queue,sd(sg.bind(null,s,n,t),[t]),n.getSnapshot!==e||i||Be!==null&&Be.memoizedState.tag&1){if(s.flags|=2048,Li(9,tg.bind(null,s,n,r,e),void 0,null),ze===null)throw Error(F(349));Pn&30||eg(s,e,r)}return r}function eg(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function tg(t,e,s,n){e.value=s,e.getSnapshot=n,ng(e)&&rg(t)}function sg(t,e,s){return s(function(){ng(e)&&rg(t)})}function ng(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!Yt(t,s)}catch{return!0}}function rg(t){var e=_s(t,1);e!==null&&Kt(e,t,1,-1)}function _h(t){var e=Xt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:t},e.queue=t,t=t.dispatch=wv.bind(null,Ne,t),[e.memoizedState,t]}function Li(t,e,s,n){return t={tag:t,create:e,destroy:s,deps:n,next:null},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(n=s.next,s.next=t,t.next=n,e.lastEffect=t)),t}function ig(){return Dt().memoizedState}function Wo(t,e,s,n){var r=Xt();Ne.flags|=t,r.memoizedState=Li(1|e,s,void 0,n===void 0?null:n)}function Va(t,e,s,n){var r=Dt();n=n===void 0?null:n;var i=void 0;if(Le!==null){var o=Le.memoizedState;if(i=o.destroy,n!==null&&Zu(n,o.deps)){r.memoizedState=Li(e,s,i,n);return}}Ne.flags|=t,r.memoizedState=Li(1|e,s,i,n)}function jh(t,e){return Wo(8390656,8,t,e)}function sd(t,e){return Va(2048,8,t,e)}function og(t,e){return Va(4,2,t,e)}function ag(t,e){return Va(4,4,t,e)}function lg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function cg(t,e,s){return s=s!=null?s.concat([t]):null,Va(4,4,lg.bind(null,e,t),s)}function nd(){}function ug(t,e){var s=Dt();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&Zu(e,n[1])?n[0]:(s.memoizedState=[t,e],t)}function dg(t,e){var s=Dt();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&Zu(e,n[1])?n[0]:(t=t(),s.memoizedState=[t,e],t)}function hg(t,e,s){return Pn&21?(Yt(s,e)||(s=xm(),Ne.lanes|=s,En|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dt=!0),t.memoizedState=s)}function vv(t,e){var s=me;me=s!==0&&4>s?s:4,t(!0);var n=Rl.transition;Rl.transition={};try{t(!1),e()}finally{me=s,Rl.transition=n}}function fg(){return Dt().memoizedState}function bv(t,e,s){var n=Vs(t);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},pg(t))mg(e,s);else if(s=Gm(t,e,s,n),s!==null){var r=st();Kt(s,t,n,r),gg(s,e,n)}}function wv(t,e,s){var n=Vs(t),r={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(pg(t))mg(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,s);if(r.hasEagerState=!0,r.eagerState=l,Yt(l,o)){var c=e.interleaved;c===null?(r.next=r,Yu(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}s=Gm(t,e,r,n),s!==null&&(r=st(),Kt(s,t,n,r),gg(s,e,n))}}function pg(t){var e=t.alternate;return t===Ne||e!==null&&e===Ne}function mg(t,e){li=ma=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function gg(t,e,s){if(s&4194240){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Mu(t,s)}}var ga={readContext:Lt,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useInsertionEffect:Ke,useLayoutEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useMutableSource:Ke,useSyncExternalStore:Ke,useId:Ke,unstable_isNewReconciler:!1},_v={readContext:Lt,useCallback:function(t,e){return Xt().memoizedState=[t,e===void 0?null:e],t},useContext:Lt,useEffect:jh,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,Wo(4194308,4,lg.bind(null,e,t),s)},useLayoutEffect:function(t,e){return Wo(4194308,4,t,e)},useInsertionEffect:function(t,e){return Wo(4,2,t,e)},useMemo:function(t,e){var s=Xt();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var n=Xt();return e=s!==void 0?s(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=bv.bind(null,Ne,t),[n.memoizedState,t]},useRef:function(t){var e=Xt();return t={current:t},e.memoizedState=t},useState:_h,useDebugValue:nd,useDeferredValue:function(t){return Xt().memoizedState=t},useTransition:function(){var t=_h(!1),e=t[0];return t=vv.bind(null,t[1]),Xt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var n=Ne,r=Xt();if(ke){if(s===void 0)throw Error(F(407));s=s()}else{if(s=e(),ze===null)throw Error(F(349));Pn&30||eg(n,e,s)}r.memoizedState=s;var i={value:s,getSnapshot:e};return r.queue=i,jh(sg.bind(null,n,i,t),[t]),n.flags|=2048,Li(9,tg.bind(null,n,i,s,e),void 0,null),s},useId:function(){var t=Xt(),e=ze.identifierPrefix;if(ke){var s=gs,n=ms;s=(n&~(1<<32-qt(n)-1)).toString(32)+s,e=":"+e+"R"+s,s=Ri++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=yv++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},jv={readContext:Lt,useCallback:ug,useContext:Lt,useEffect:sd,useImperativeHandle:cg,useInsertionEffect:og,useLayoutEffect:ag,useMemo:dg,useReducer:Ml,useRef:ig,useState:function(){return Ml(Mi)},useDebugValue:nd,useDeferredValue:function(t){var e=Dt();return hg(e,Le.memoizedState,t)},useTransition:function(){var t=Ml(Mi)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:Xm,useSyncExternalStore:Zm,useId:fg,unstable_isNewReconciler:!1},kv={readContext:Lt,useCallback:ug,useContext:Lt,useEffect:sd,useImperativeHandle:cg,useInsertionEffect:og,useLayoutEffect:ag,useMemo:dg,useReducer:Ll,useRef:ig,useState:function(){return Ll(Mi)},useDebugValue:nd,useDeferredValue:function(t){var e=Dt();return Le===null?e.memoizedState=t:hg(e,Le.memoizedState,t)},useTransition:function(){var t=Ll(Mi)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:Xm,useSyncExternalStore:Zm,useId:fg,unstable_isNewReconciler:!1};function Ut(t,e){if(t&&t.defaultProps){e=Ce({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function Dc(t,e,s,n){e=t.memoizedState,s=s(n,e),s=s==null?e:Ce({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var qa={isMounted:function(t){return(t=t._reactInternals)?Mn(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var n=st(),r=Vs(t),i=vs(n,r);i.payload=e,s!=null&&(i.callback=s),e=Ws(t,i,r),e!==null&&(Kt(e,t,r,n),Fo(e,t,r))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var n=st(),r=Vs(t),i=vs(n,r);i.tag=1,i.payload=e,s!=null&&(i.callback=s),e=Ws(t,i,r),e!==null&&(Kt(e,t,r,n),Fo(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=st(),n=Vs(t),r=vs(s,n);r.tag=2,e!=null&&(r.callback=e),e=Ws(t,r,n),e!==null&&(Kt(e,t,n,s),Fo(e,t,n))}};function kh(t,e,s,n,r,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ci(s,n)||!Ci(r,i):!0}function xg(t,e,s){var n=!1,r=Gs,i=e.contextType;return typeof i=="object"&&i!==null?i=Lt(i):(r=ft(e)?Nn:Je.current,n=e.contextTypes,i=(n=n!=null)?pr(t,r):Gs),e=new e(s,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=qa,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function Sh(t,e,s,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,n),e.state!==t&&qa.enqueueReplaceState(e,e.state,null)}function Ic(t,e,s,n){var r=t.stateNode;r.props=s,r.state=t.memoizedState,r.refs={},Gu(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=Lt(i):(i=ft(e)?Nn:Je.current,r.context=pr(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Dc(t,e,i,s),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&qa.enqueueReplaceState(r,r.state,null),fa(t,s,r,n),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function yr(t,e){try{var s="",n=e;do s+=Xx(n),n=n.return;while(n);var r=s}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function Dl(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function Bc(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var Sv=typeof WeakMap=="function"?WeakMap:Map;function yg(t,e,s){s=vs(-1,s),s.tag=3,s.payload={element:null};var n=e.value;return s.callback=function(){ya||(ya=!0,Yc=n),Bc(t,e)},s}function vg(t,e,s){s=vs(-1,s),s.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var r=e.value;s.payload=function(){return n(r)},s.callback=function(){Bc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){Bc(t,e),typeof n!="function"&&(Hs===null?Hs=new Set([this]):Hs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),s}function Nh(t,e,s){var n=t.pingCache;if(n===null){n=t.pingCache=new Sv;var r=new Set;n.set(e,r)}else r=n.get(e),r===void 0&&(r=new Set,n.set(e,r));r.has(s)||(r.add(s),t=zv.bind(null,t,e,s),e.then(t,t))}function Ch(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ph(t,e,s,n,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=vs(-1,1),e.tag=2,Ws(s,e,1))),s.lanes|=1),t)}var Nv=ks.ReactCurrentOwner,dt=!1;function tt(t,e,s,n){e.child=t===null?Ym(e,null,s,n):gr(e,t.child,s,n)}function Eh(t,e,s,n,r){s=s.render;var i=e.ref;return cr(e,r),n=ed(t,e,s,n,i,r),s=td(),t!==null&&!dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,js(t,e,r)):(ke&&s&&Uu(e),e.flags|=1,tt(t,e,n,r),e.child)}function Th(t,e,s,n,r){if(t===null){var i=s.type;return typeof i=="function"&&!dd(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=i,bg(t,e,i,n,r)):(t=Ko(s.type,null,n,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var o=i.memoizedProps;if(s=s.compare,s=s!==null?s:Ci,s(o,n)&&t.ref===e.ref)return js(t,e,r)}return e.flags|=1,t=qs(i,n),t.ref=e.ref,t.return=e,e.child=t}function bg(t,e,s,n,r){if(t!==null){var i=t.memoizedProps;if(Ci(i,n)&&t.ref===e.ref)if(dt=!1,e.pendingProps=n=i,(t.lanes&r)!==0)t.flags&131072&&(dt=!0);else return e.lanes=t.lanes,js(t,e,r)}return zc(t,e,s,n,r)}function wg(t,e,s){var n=e.pendingProps,r=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(nr,gt),gt|=s;else{if(!(s&1073741824))return t=i!==null?i.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ve(nr,gt),gt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:s,ve(nr,gt),gt|=n}else i!==null?(n=i.baseLanes|s,e.memoizedState=null):n=s,ve(nr,gt),gt|=n;return tt(t,e,r,s),e.child}function _g(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function zc(t,e,s,n,r){var i=ft(s)?Nn:Je.current;return i=pr(e,i),cr(e,r),s=ed(t,e,s,n,i,r),n=td(),t!==null&&!dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,js(t,e,r)):(ke&&n&&Uu(e),e.flags|=1,tt(t,e,s,r),e.child)}function Ah(t,e,s,n,r){if(ft(s)){var i=!0;la(e)}else i=!1;if(cr(e,r),e.stateNode===null)Ho(t,e),xg(e,s,n),Ic(e,s,n,r),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=s.contextType;typeof u=="object"&&u!==null?u=Lt(u):(u=ft(s)?Nn:Je.current,u=pr(e,u));var d=s.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Sh(e,o,n,u),Ts=!1;var f=e.memoizedState;o.state=f,fa(e,n,o,r),c=e.memoizedState,l!==n||f!==c||ht.current||Ts?(typeof d=="function"&&(Dc(e,s,d,n),c=e.memoizedState),(l=Ts||kh(e,s,l,n,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Qm(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Ut(e.type,l),o.props=u,h=e.pendingProps,f=o.context,c=s.contextType,typeof c=="object"&&c!==null?c=Lt(c):(c=ft(s)?Nn:Je.current,c=pr(e,c));var p=s.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Sh(e,o,n,c),Ts=!1,f=e.memoizedState,o.state=f,fa(e,n,o,r);var m=e.memoizedState;l!==h||f!==m||ht.current||Ts?(typeof p=="function"&&(Dc(e,s,p,n),m=e.memoizedState),(u=Ts||kh(e,s,u,n,f,m,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return $c(t,e,s,n,i,r)}function $c(t,e,s,n,r,i){_g(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return r&&gh(e,s,!1),js(t,e,i);n=e.stateNode,Nv.current=e;var l=o&&typeof s.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=gr(e,t.child,null,i),e.child=gr(e,null,l,i)):tt(t,e,l,i),e.memoizedState=n.state,r&&gh(e,s,!0),e.child}function jg(t){var e=t.stateNode;e.pendingContext?mh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&mh(t,e.context,!1),Qu(t,e.containerInfo)}function Oh(t,e,s,n,r){return mr(),Hu(r),e.flags|=256,tt(t,e,s,n),e.child}var Fc={dehydrated:null,treeContext:null,retryLane:0};function Uc(t){return{baseLanes:t,cachePool:null,transitions:null}}function kg(t,e,s){var n=e.pendingProps,r=Se.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),ve(Se,r&1),t===null)return Mc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ga(o,n,0,null),t=kn(t,n,s,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Uc(s),e.memoizedState=Fc,t):rd(e,o));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return Cv(t,e,o,n,l,r,s);if(i){i=n.fallback,o=e.mode,r=t.child,l=r.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==r?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=qs(r,c),n.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=qs(l,i):(i=kn(i,o,s,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=t.child.memoizedState,o=o===null?Uc(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~s,e.memoizedState=Fc,n}return i=t.child,t=i.sibling,n=qs(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=s),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n}function rd(t,e){return e=Ga({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function mo(t,e,s,n){return n!==null&&Hu(n),gr(e,t.child,null,s),t=rd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Cv(t,e,s,n,r,i,o){if(s)return e.flags&256?(e.flags&=-257,n=Dl(Error(F(422))),mo(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,r=e.mode,n=Ga({mode:"visible",children:n.children},r,0,null),i=kn(i,r,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&gr(e,t.child,null,o),e.child.memoizedState=Uc(o),e.memoizedState=Fc,i);if(!(e.mode&1))return mo(t,e,o,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(F(419)),n=Dl(i,n,void 0),mo(t,e,o,n)}if(l=(o&t.childLanes)!==0,dt||l){if(n=ze,n!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,_s(t,r),Kt(n,t,r,-1))}return ud(),n=Dl(Error(F(421))),mo(t,e,o,n)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=$v.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,yt=Us(r.nextSibling),bt=e,ke=!0,Vt=null,t!==null&&(Tt[At++]=ms,Tt[At++]=gs,Tt[At++]=Cn,ms=t.id,gs=t.overflow,Cn=e),e=rd(e,n.children),e.flags|=4096,e)}function Rh(t,e,s){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Lc(t.return,e,s)}function Il(t,e,s,n,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=s,i.tailMode=r)}function Sg(t,e,s){var n=e.pendingProps,r=n.revealOrder,i=n.tail;if(tt(t,e,n.children,s),n=Se.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Rh(t,s,e);else if(t.tag===19)Rh(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ve(Se,n),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(s=e.child,r=null;s!==null;)t=s.alternate,t!==null&&pa(t)===null&&(r=s),s=s.sibling;s=r,s===null?(r=e.child,e.child=null):(r=s.sibling,s.sibling=null),Il(e,!1,r,s,i);break;case"backwards":for(s=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&pa(t)===null){e.child=r;break}t=r.sibling,r.sibling=s,s=r,r=t}Il(e,!0,s,null,i);break;case"together":Il(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ho(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function js(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),En|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,s=qs(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=qs(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function Pv(t,e,s){switch(e.tag){case 3:jg(e),mr();break;case 5:Jm(e);break;case 1:ft(e.type)&&la(e);break;case 4:Qu(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,r=e.memoizedProps.value;ve(da,n._currentValue),n._currentValue=r;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ve(Se,Se.current&1),e.flags|=128,null):s&e.child.childLanes?kg(t,e,s):(ve(Se,Se.current&1),t=js(t,e,s),t!==null?t.sibling:null);ve(Se,Se.current&1);break;case 19:if(n=(s&e.childLanes)!==0,t.flags&128){if(n)return Sg(t,e,s);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ve(Se,Se.current),n)break;return null;case 22:case 23:return e.lanes=0,wg(t,e,s)}return js(t,e,s)}var Ng,Wc,Cg,Pg;Ng=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Wc=function(){};Cg=function(t,e,s,n){var r=t.memoizedProps;if(r!==n){t=e.stateNode,wn(ns.current);var i=null;switch(s){case"input":r=dc(t,r),n=dc(t,n),i=[];break;case"select":r=Ce({},r,{value:void 0}),n=Ce({},n,{value:void 0}),i=[];break;case"textarea":r=pc(t,r),n=pc(t,n),i=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=oa)}gc(s,n);var o;s=null;for(u in r)if(!n.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var l=r[u];for(o in l)l.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(bi.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=r!=null?r[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(s||(s={}),s[o]=c[o])}else s||(i||(i=[]),i.push(u,s)),s=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(bi.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&we("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}s&&(i=i||[]).push("style",s);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Pg=function(t,e,s,n){s!==n&&(e.flags|=4)};function $r(t,e){if(!ke)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Ye(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,n=0;if(e)for(var r=t.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=n,t.childLanes=s,e}function Ev(t,e,s){var n=e.pendingProps;switch(Wu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(e),null;case 1:return ft(e.type)&&aa(),Ye(e),null;case 3:return n=e.stateNode,xr(),je(ht),je(Je),Xu(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(fo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Vt!==null&&(Jc(Vt),Vt=null))),Wc(t,e),Ye(e),null;case 5:Ju(e);var r=wn(Oi.current);if(s=e.type,t!==null&&e.stateNode!=null)Cg(t,e,s,n,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(F(166));return Ye(e),null}if(t=wn(ns.current),fo(e)){n=e.stateNode,s=e.type;var i=e.memoizedProps;switch(n[es]=e,n[Ti]=i,t=(e.mode&1)!==0,s){case"dialog":we("cancel",n),we("close",n);break;case"iframe":case"object":case"embed":we("load",n);break;case"video":case"audio":for(r=0;r<Jr.length;r++)we(Jr[r],n);break;case"source":we("error",n);break;case"img":case"image":case"link":we("error",n),we("load",n);break;case"details":we("toggle",n);break;case"input":Ud(n,i),we("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},we("invalid",n);break;case"textarea":Hd(n,i),we("invalid",n)}gc(s,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&ho(n.textContent,l,t),r=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ho(n.textContent,l,t),r=["children",""+l]):bi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&we("scroll",n)}switch(s){case"input":no(n),Wd(n,i,!0);break;case"textarea":no(n),Vd(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=oa)}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=sm(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(s,{is:n.is}):(t=o.createElement(s),s==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,s),t[es]=e,t[Ti]=n,Ng(t,e,!1,!1),e.stateNode=t;e:{switch(o=xc(s,n),s){case"dialog":we("cancel",t),we("close",t),r=n;break;case"iframe":case"object":case"embed":we("load",t),r=n;break;case"video":case"audio":for(r=0;r<Jr.length;r++)we(Jr[r],t);r=n;break;case"source":we("error",t),r=n;break;case"img":case"image":case"link":we("error",t),we("load",t),r=n;break;case"details":we("toggle",t),r=n;break;case"input":Ud(t,n),r=dc(t,n),we("invalid",t);break;case"option":r=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},r=Ce({},n,{value:void 0}),we("invalid",t);break;case"textarea":Hd(t,n),r=pc(t,n),we("invalid",t);break;default:r=n}gc(s,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?im(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&nm(t,c)):i==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&wi(t,c):typeof c=="number"&&wi(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(bi.hasOwnProperty(i)?c!=null&&i==="onScroll"&&we("scroll",t):c!=null&&Pu(t,i,c,o))}switch(s){case"input":no(t),Wd(t,n,!1);break;case"textarea":no(t),Vd(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ys(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?ir(t,!!n.multiple,i,!1):n.defaultValue!=null&&ir(t,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=oa)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ye(e),null;case 6:if(t&&e.stateNode!=null)Pg(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(F(166));if(s=wn(Oi.current),wn(ns.current),fo(e)){if(n=e.stateNode,s=e.memoizedProps,n[es]=e,(i=n.nodeValue!==s)&&(t=bt,t!==null))switch(t.tag){case 3:ho(n.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ho(n.nodeValue,s,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[es]=e,e.stateNode=n}return Ye(e),null;case 13:if(je(Se),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ke&&yt!==null&&e.mode&1&&!(e.flags&128))qm(),mr(),e.flags|=98560,i=!1;else if(i=fo(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[es]=e}else mr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ye(e),i=!1}else Vt!==null&&(Jc(Vt),Vt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Se.current&1?De===0&&(De=3):ud())),e.updateQueue!==null&&(e.flags|=4),Ye(e),null);case 4:return xr(),Wc(t,e),t===null&&Pi(e.stateNode.containerInfo),Ye(e),null;case 10:return Ku(e.type._context),Ye(e),null;case 17:return ft(e.type)&&aa(),Ye(e),null;case 19:if(je(Se),i=e.memoizedState,i===null)return Ye(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)$r(i,!1);else{if(De!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=pa(t),o!==null){for(e.flags|=128,$r(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=s,s=e.child;s!==null;)i=s,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return ve(Se,Se.current&1|2),e.child}t=t.sibling}i.tail!==null&&Oe()>vr&&(e.flags|=128,n=!0,$r(i,!1),e.lanes=4194304)}else{if(!n)if(t=pa(o),t!==null){if(e.flags|=128,n=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),$r(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ke)return Ye(e),null}else 2*Oe()-i.renderingStartTime>vr&&s!==1073741824&&(e.flags|=128,n=!0,$r(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(s=i.last,s!==null?s.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Oe(),e.sibling=null,s=Se.current,ve(Se,n?s&1|2:s&1),e):(Ye(e),null);case 22:case 23:return cd(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?gt&1073741824&&(Ye(e),e.subtreeFlags&6&&(e.flags|=8192)):Ye(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function Tv(t,e){switch(Wu(e),e.tag){case 1:return ft(e.type)&&aa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xr(),je(ht),je(Je),Xu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ju(e),null;case 13:if(je(Se),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));mr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return je(Se),null;case 4:return xr(),null;case 10:return Ku(e.type._context),null;case 22:case 23:return cd(),null;case 24:return null;default:return null}}var go=!1,Qe=!1,Av=typeof WeakSet=="function"?WeakSet:Set,G=null;function sr(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){Pe(t,e,n)}else s.current=null}function Hc(t,e,s){try{s()}catch(n){Pe(t,e,n)}}var Mh=!1;function Ov(t,e){if(Cc=na,t=Rm(),Fu(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==s||r!==0&&h.nodeType!==3||(l=o+r),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===s&&++u===r&&(l=o),f===i&&++d===n&&(c=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}s=l===-1||c===-1?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(Pc={focusedElem:t,selectionRange:s},na=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,b=m.memoizedState,g=e.stateNode,x=g.getSnapshotBeforeUpdate(e.elementType===e.type?v:Ut(e.type,v),b);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(w){Pe(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return m=Mh,Mh=!1,m}function ci(t,e,s){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&Hc(e,s,i)}r=r.next}while(r!==n)}}function Ka(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var n=s.create;s.destroy=n()}s=s.next}while(s!==e)}}function Vc(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function Eg(t){var e=t.alternate;e!==null&&(t.alternate=null,Eg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[es],delete e[Ti],delete e[Ac],delete e[pv],delete e[mv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Tg(t){return t.tag===5||t.tag===3||t.tag===4}function Lh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Tg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qc(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=oa));else if(n!==4&&(t=t.child,t!==null))for(qc(t,e,s),t=t.sibling;t!==null;)qc(t,e,s),t=t.sibling}function Kc(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Kc(t,e,s),t=t.sibling;t!==null;)Kc(t,e,s),t=t.sibling}var Fe=null,Wt=!1;function Ss(t,e,s){for(s=s.child;s!==null;)Ag(t,e,s),s=s.sibling}function Ag(t,e,s){if(ss&&typeof ss.onCommitFiberUnmount=="function")try{ss.onCommitFiberUnmount(za,s)}catch{}switch(s.tag){case 5:Qe||sr(s,e);case 6:var n=Fe,r=Wt;Fe=null,Ss(t,e,s),Fe=n,Wt=r,Fe!==null&&(Wt?(t=Fe,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):Fe.removeChild(s.stateNode));break;case 18:Fe!==null&&(Wt?(t=Fe,s=s.stateNode,t.nodeType===8?Tl(t.parentNode,s):t.nodeType===1&&Tl(t,s),Si(t)):Tl(Fe,s.stateNode));break;case 4:n=Fe,r=Wt,Fe=s.stateNode.containerInfo,Wt=!0,Ss(t,e,s),Fe=n,Wt=r;break;case 0:case 11:case 14:case 15:if(!Qe&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Hc(s,e,o),r=r.next}while(r!==n)}Ss(t,e,s);break;case 1:if(!Qe&&(sr(s,e),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(l){Pe(s,e,l)}Ss(t,e,s);break;case 21:Ss(t,e,s);break;case 22:s.mode&1?(Qe=(n=Qe)||s.memoizedState!==null,Ss(t,e,s),Qe=n):Ss(t,e,s);break;default:Ss(t,e,s)}}function Dh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new Av),e.forEach(function(n){var r=Fv.bind(null,t,n);s.has(n)||(s.add(n),n.then(r,r))})}}function $t(t,e){var s=e.deletions;if(s!==null)for(var n=0;n<s.length;n++){var r=s[n];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Fe=l.stateNode,Wt=!1;break e;case 3:Fe=l.stateNode.containerInfo,Wt=!0;break e;case 4:Fe=l.stateNode.containerInfo,Wt=!0;break e}l=l.return}if(Fe===null)throw Error(F(160));Ag(i,o,r),Fe=null,Wt=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(u){Pe(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Og(e,t),e=e.sibling}function Og(t,e){var s=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($t(e,t),Gt(t),n&4){try{ci(3,t,t.return),Ka(3,t)}catch(v){Pe(t,t.return,v)}try{ci(5,t,t.return)}catch(v){Pe(t,t.return,v)}}break;case 1:$t(e,t),Gt(t),n&512&&s!==null&&sr(s,s.return);break;case 5:if($t(e,t),Gt(t),n&512&&s!==null&&sr(s,s.return),t.flags&32){var r=t.stateNode;try{wi(r,"")}catch(v){Pe(t,t.return,v)}}if(n&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,o=s!==null?s.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&em(r,i),xc(l,o);var u=xc(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?im(r,h):d==="dangerouslySetInnerHTML"?nm(r,h):d==="children"?wi(r,h):Pu(r,d,h,u)}switch(l){case"input":hc(r,i);break;case"textarea":tm(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?ir(r,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?ir(r,!!i.multiple,i.defaultValue,!0):ir(r,!!i.multiple,i.multiple?[]:"",!1))}r[Ti]=i}catch(v){Pe(t,t.return,v)}}break;case 6:if($t(e,t),Gt(t),n&4){if(t.stateNode===null)throw Error(F(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(v){Pe(t,t.return,v)}}break;case 3:if($t(e,t),Gt(t),n&4&&s!==null&&s.memoizedState.isDehydrated)try{Si(e.containerInfo)}catch(v){Pe(t,t.return,v)}break;case 4:$t(e,t),Gt(t);break;case 13:$t(e,t),Gt(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(ad=Oe())),n&4&&Dh(t);break;case 22:if(d=s!==null&&s.memoizedState!==null,t.mode&1?(Qe=(u=Qe)||d,$t(e,t),Qe=u):$t(e,t),Gt(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(G=t,d=t.child;d!==null;){for(h=G=d;G!==null;){switch(f=G,p=f.child,f.tag){case 0:case 11:case 14:case 15:ci(4,f,f.return);break;case 1:sr(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,s=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){Pe(n,s,v)}}break;case 5:sr(f,f.return);break;case 22:if(f.memoizedState!==null){Bh(h);continue}}p!==null?(p.return=f,G=p):Bh(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{r=h.stateNode,u?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=rm("display",o))}catch(v){Pe(t,t.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){Pe(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:$t(e,t),Gt(t),n&4&&Dh(t);break;case 21:break;default:$t(e,t),Gt(t)}}function Gt(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(Tg(s)){var n=s;break e}s=s.return}throw Error(F(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(wi(r,""),n.flags&=-33);var i=Lh(t);Kc(t,i,r);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Lh(t);qc(t,l,o);break;default:throw Error(F(161))}}catch(c){Pe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Rv(t,e,s){G=t,Rg(t)}function Rg(t,e,s){for(var n=(t.mode&1)!==0;G!==null;){var r=G,i=r.child;if(r.tag===22&&n){var o=r.memoizedState!==null||go;if(!o){var l=r.alternate,c=l!==null&&l.memoizedState!==null||Qe;l=go;var u=Qe;if(go=o,(Qe=c)&&!u)for(G=r;G!==null;)o=G,c=o.child,o.tag===22&&o.memoizedState!==null?zh(r):c!==null?(c.return=o,G=c):zh(r);for(;i!==null;)G=i,Rg(i),i=i.sibling;G=r,go=l,Qe=u}Ih(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,G=i):Ih(t)}}function Ih(t){for(;G!==null;){var e=G;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qe||Ka(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Qe)if(s===null)n.componentDidMount();else{var r=e.elementType===e.type?s.memoizedProps:Ut(e.type,s.memoizedProps);n.componentDidUpdate(r,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&wh(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}wh(e,o,s)}break;case 5:var l=e.stateNode;if(s===null&&e.flags&4){s=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Si(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}Qe||e.flags&512&&Vc(e)}catch(f){Pe(e,e.return,f)}}if(e===t){G=null;break}if(s=e.sibling,s!==null){s.return=e.return,G=s;break}G=e.return}}function Bh(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var s=e.sibling;if(s!==null){s.return=e.return,G=s;break}G=e.return}}function zh(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{Ka(4,e)}catch(c){Pe(e,s,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var r=e.return;try{n.componentDidMount()}catch(c){Pe(e,r,c)}}var i=e.return;try{Vc(e)}catch(c){Pe(e,i,c)}break;case 5:var o=e.return;try{Vc(e)}catch(c){Pe(e,o,c)}}}catch(c){Pe(e,e.return,c)}if(e===t){G=null;break}var l=e.sibling;if(l!==null){l.return=e.return,G=l;break}G=e.return}}var Mv=Math.ceil,xa=ks.ReactCurrentDispatcher,id=ks.ReactCurrentOwner,Rt=ks.ReactCurrentBatchConfig,fe=0,ze=null,Me=null,He=0,gt=0,nr=en(0),De=0,Di=null,En=0,Ya=0,od=0,ui=null,lt=null,ad=0,vr=1/0,us=null,ya=!1,Yc=null,Hs=null,xo=!1,Ls=null,va=0,di=0,Gc=null,Vo=-1,qo=0;function st(){return fe&6?Oe():Vo!==-1?Vo:Vo=Oe()}function Vs(t){return t.mode&1?fe&2&&He!==0?He&-He:xv.transition!==null?(qo===0&&(qo=xm()),qo):(t=me,t!==0||(t=window.event,t=t===void 0?16:km(t.type)),t):1}function Kt(t,e,s,n){if(50<di)throw di=0,Gc=null,Error(F(185));Hi(t,s,n),(!(fe&2)||t!==ze)&&(t===ze&&(!(fe&2)&&(Ya|=s),De===4&&Os(t,He)),pt(t,n),s===1&&fe===0&&!(e.mode&1)&&(vr=Oe()+500,Ha&&tn()))}function pt(t,e){var s=t.callbackNode;xy(t,e);var n=sa(t,t===ze?He:0);if(n===0)s!==null&&Yd(s),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(s!=null&&Yd(s),e===1)t.tag===0?gv($h.bind(null,t)):Wm($h.bind(null,t)),hv(function(){!(fe&6)&&tn()}),s=null;else{switch(ym(n)){case 1:s=Ru;break;case 4:s=mm;break;case 16:s=ta;break;case 536870912:s=gm;break;default:s=ta}s=Fg(s,Mg.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function Mg(t,e){if(Vo=-1,qo=0,fe&6)throw Error(F(327));var s=t.callbackNode;if(ur()&&t.callbackNode!==s)return null;var n=sa(t,t===ze?He:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=ba(t,n);else{e=n;var r=fe;fe|=2;var i=Dg();(ze!==t||He!==e)&&(us=null,vr=Oe()+500,jn(t,e));do try{Iv();break}catch(l){Lg(t,l)}while(!0);qu(),xa.current=i,fe=r,Me!==null?e=0:(ze=null,He=0,e=De)}if(e!==0){if(e===2&&(r=_c(t),r!==0&&(n=r,e=Qc(t,r))),e===1)throw s=Di,jn(t,0),Os(t,n),pt(t,Oe()),s;if(e===6)Os(t,n);else{if(r=t.current.alternate,!(n&30)&&!Lv(r)&&(e=ba(t,n),e===2&&(i=_c(t),i!==0&&(n=i,e=Qc(t,i))),e===1))throw s=Di,jn(t,0),Os(t,n),pt(t,Oe()),s;switch(t.finishedWork=r,t.finishedLanes=n,e){case 0:case 1:throw Error(F(345));case 2:pn(t,lt,us);break;case 3:if(Os(t,n),(n&130023424)===n&&(e=ad+500-Oe(),10<e)){if(sa(t,0)!==0)break;if(r=t.suspendedLanes,(r&n)!==n){st(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Tc(pn.bind(null,t,lt,us),e);break}pn(t,lt,us);break;case 4:if(Os(t,n),(n&4194240)===n)break;for(e=t.eventTimes,r=-1;0<n;){var o=31-qt(n);i=1<<o,o=e[o],o>r&&(r=o),n&=~i}if(n=r,n=Oe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Mv(n/1960))-n,10<n){t.timeoutHandle=Tc(pn.bind(null,t,lt,us),n);break}pn(t,lt,us);break;case 5:pn(t,lt,us);break;default:throw Error(F(329))}}}return pt(t,Oe()),t.callbackNode===s?Mg.bind(null,t):null}function Qc(t,e){var s=ui;return t.current.memoizedState.isDehydrated&&(jn(t,e).flags|=256),t=ba(t,e),t!==2&&(e=lt,lt=s,e!==null&&Jc(e)),t}function Jc(t){lt===null?lt=t:lt.push.apply(lt,t)}function Lv(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var r=s[n],i=r.getSnapshot;r=r.value;try{if(!Yt(i(),r))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Os(t,e){for(e&=~od,e&=~Ya,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-qt(e),n=1<<s;t[s]=-1,e&=~n}}function $h(t){if(fe&6)throw Error(F(327));ur();var e=sa(t,0);if(!(e&1))return pt(t,Oe()),null;var s=ba(t,e);if(t.tag!==0&&s===2){var n=_c(t);n!==0&&(e=n,s=Qc(t,n))}if(s===1)throw s=Di,jn(t,0),Os(t,e),pt(t,Oe()),s;if(s===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,pn(t,lt,us),pt(t,Oe()),null}function ld(t,e){var s=fe;fe|=1;try{return t(e)}finally{fe=s,fe===0&&(vr=Oe()+500,Ha&&tn())}}function Tn(t){Ls!==null&&Ls.tag===0&&!(fe&6)&&ur();var e=fe;fe|=1;var s=Rt.transition,n=me;try{if(Rt.transition=null,me=1,t)return t()}finally{me=n,Rt.transition=s,fe=e,!(fe&6)&&tn()}}function cd(){gt=nr.current,je(nr)}function jn(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,dv(s)),Me!==null)for(s=Me.return;s!==null;){var n=s;switch(Wu(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&aa();break;case 3:xr(),je(ht),je(Je),Xu();break;case 5:Ju(n);break;case 4:xr();break;case 13:je(Se);break;case 19:je(Se);break;case 10:Ku(n.type._context);break;case 22:case 23:cd()}s=s.return}if(ze=t,Me=t=qs(t.current,null),He=gt=e,De=0,Di=null,od=Ya=En=0,lt=ui=null,bn!==null){for(e=0;e<bn.length;e++)if(s=bn[e],n=s.interleaved,n!==null){s.interleaved=null;var r=n.next,i=s.pending;if(i!==null){var o=i.next;i.next=r,n.next=o}s.pending=n}bn=null}return t}function Lg(t,e){do{var s=Me;try{if(qu(),Uo.current=ga,ma){for(var n=Ne.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}ma=!1}if(Pn=0,Be=Le=Ne=null,li=!1,Ri=0,id.current=null,s===null||s.return===null){De=1,Di=e,Me=null;break}e:{var i=t,o=s.return,l=s,c=e;if(e=He,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Ch(o);if(p!==null){p.flags&=-257,Ph(p,o,l,i,e),p.mode&1&&Nh(i,u,e),e=p,c=u;var m=e.updateQueue;if(m===null){var v=new Set;v.add(c),e.updateQueue=v}else m.add(c);break e}else{if(!(e&1)){Nh(i,u,e),ud();break e}c=Error(F(426))}}else if(ke&&l.mode&1){var b=Ch(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Ph(b,o,l,i,e),Hu(yr(c,l));break e}}i=c=yr(c,l),De!==4&&(De=2),ui===null?ui=[i]:ui.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=yg(i,c,e);bh(i,g);break e;case 1:l=c;var x=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Hs===null||!Hs.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=vg(i,l,e);bh(i,w);break e}}i=i.return}while(i!==null)}Bg(s)}catch(k){e=k,Me===s&&s!==null&&(Me=s=s.return);continue}break}while(!0)}function Dg(){var t=xa.current;return xa.current=ga,t===null?ga:t}function ud(){(De===0||De===3||De===2)&&(De=4),ze===null||!(En&268435455)&&!(Ya&268435455)||Os(ze,He)}function ba(t,e){var s=fe;fe|=2;var n=Dg();(ze!==t||He!==e)&&(us=null,jn(t,e));do try{Dv();break}catch(r){Lg(t,r)}while(!0);if(qu(),fe=s,xa.current=n,Me!==null)throw Error(F(261));return ze=null,He=0,De}function Dv(){for(;Me!==null;)Ig(Me)}function Iv(){for(;Me!==null&&!ly();)Ig(Me)}function Ig(t){var e=$g(t.alternate,t,gt);t.memoizedProps=t.pendingProps,e===null?Bg(t):Me=e,id.current=null}function Bg(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=Tv(s,e),s!==null){s.flags&=32767,Me=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{De=6,Me=null;return}}else if(s=Ev(s,e,gt),s!==null){Me=s;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);De===0&&(De=5)}function pn(t,e,s){var n=me,r=Rt.transition;try{Rt.transition=null,me=1,Bv(t,e,s,n)}finally{Rt.transition=r,me=n}return null}function Bv(t,e,s,n){do ur();while(Ls!==null);if(fe&6)throw Error(F(327));s=t.finishedWork;var r=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=s.lanes|s.childLanes;if(yy(t,i),t===ze&&(Me=ze=null,He=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||xo||(xo=!0,Fg(ta,function(){return ur(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=Rt.transition,Rt.transition=null;var o=me;me=1;var l=fe;fe|=4,id.current=null,Ov(t,s),Og(s,t),rv(Pc),na=!!Cc,Pc=Cc=null,t.current=s,Rv(s),cy(),fe=l,me=o,Rt.transition=i}else t.current=s;if(xo&&(xo=!1,Ls=t,va=r),i=t.pendingLanes,i===0&&(Hs=null),hy(s.stateNode),pt(t,Oe()),e!==null)for(n=t.onRecoverableError,s=0;s<e.length;s++)r=e[s],n(r.value,{componentStack:r.stack,digest:r.digest});if(ya)throw ya=!1,t=Yc,Yc=null,t;return va&1&&t.tag!==0&&ur(),i=t.pendingLanes,i&1?t===Gc?di++:(di=0,Gc=t):di=0,tn(),null}function ur(){if(Ls!==null){var t=ym(va),e=Rt.transition,s=me;try{if(Rt.transition=null,me=16>t?16:t,Ls===null)var n=!1;else{if(t=Ls,Ls=null,va=0,fe&6)throw Error(F(331));var r=fe;for(fe|=4,G=t.current;G!==null;){var i=G,o=i.child;if(G.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(G=u;G!==null;){var d=G;switch(d.tag){case 0:case 11:case 15:ci(8,d,i)}var h=d.child;if(h!==null)h.return=d,G=h;else for(;G!==null;){d=G;var f=d.sibling,p=d.return;if(Eg(d),d===u){G=null;break}if(f!==null){f.return=p,G=f;break}G=p}}}var m=i.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}G=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,G=o;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ci(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,G=g;break e}G=i.return}}var x=t.current;for(G=x;G!==null;){o=G;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,G=y;else e:for(o=x;G!==null;){if(l=G,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ka(9,l)}}catch(k){Pe(l,l.return,k)}if(l===o){G=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,G=w;break e}G=l.return}}if(fe=r,tn(),ss&&typeof ss.onPostCommitFiberRoot=="function")try{ss.onPostCommitFiberRoot(za,t)}catch{}n=!0}return n}finally{me=s,Rt.transition=e}}return!1}function Fh(t,e,s){e=yr(s,e),e=yg(t,e,1),t=Ws(t,e,1),e=st(),t!==null&&(Hi(t,1,e),pt(t,e))}function Pe(t,e,s){if(t.tag===3)Fh(t,t,s);else for(;e!==null;){if(e.tag===3){Fh(e,t,s);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Hs===null||!Hs.has(n))){t=yr(s,t),t=vg(e,t,1),e=Ws(e,t,1),t=st(),e!==null&&(Hi(e,1,t),pt(e,t));break}}e=e.return}}function zv(t,e,s){var n=t.pingCache;n!==null&&n.delete(e),e=st(),t.pingedLanes|=t.suspendedLanes&s,ze===t&&(He&s)===s&&(De===4||De===3&&(He&130023424)===He&&500>Oe()-ad?jn(t,0):od|=s),pt(t,e)}function zg(t,e){e===0&&(t.mode&1?(e=oo,oo<<=1,!(oo&130023424)&&(oo=4194304)):e=1);var s=st();t=_s(t,e),t!==null&&(Hi(t,e,s),pt(t,s))}function $v(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),zg(t,s)}function Fv(t,e){var s=0;switch(t.tag){case 13:var n=t.stateNode,r=t.memoizedState;r!==null&&(s=r.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(F(314))}n!==null&&n.delete(e),zg(t,s)}var $g;$g=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||ht.current)dt=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return dt=!1,Pv(t,e,s);dt=!!(t.flags&131072)}else dt=!1,ke&&e.flags&1048576&&Hm(e,ua,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Ho(t,e),t=e.pendingProps;var r=pr(e,Je.current);cr(e,s),r=ed(null,e,n,t,r,s);var i=td();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ft(n)?(i=!0,la(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Gu(e),r.updater=qa,e.stateNode=r,r._reactInternals=e,Ic(e,n,t,s),e=$c(null,e,n,!0,i,s)):(e.tag=0,ke&&i&&Uu(e),tt(null,e,r,s),e=e.child),e;case 16:n=e.elementType;e:{switch(Ho(t,e),t=e.pendingProps,r=n._init,n=r(n._payload),e.type=n,r=e.tag=Wv(n),t=Ut(n,t),r){case 0:e=zc(null,e,n,t,s);break e;case 1:e=Ah(null,e,n,t,s);break e;case 11:e=Eh(null,e,n,t,s);break e;case 14:e=Th(null,e,n,Ut(n.type,t),s);break e}throw Error(F(306,n,""))}return e;case 0:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Ut(n,r),zc(t,e,n,r,s);case 1:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Ut(n,r),Ah(t,e,n,r,s);case 3:e:{if(jg(e),t===null)throw Error(F(387));n=e.pendingProps,i=e.memoizedState,r=i.element,Qm(t,e),fa(e,n,null,s);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=yr(Error(F(423)),e),e=Oh(t,e,n,s,r);break e}else if(n!==r){r=yr(Error(F(424)),e),e=Oh(t,e,n,s,r);break e}else for(yt=Us(e.stateNode.containerInfo.firstChild),bt=e,ke=!0,Vt=null,s=Ym(e,null,n,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(mr(),n===r){e=js(t,e,s);break e}tt(t,e,n,s)}e=e.child}return e;case 5:return Jm(e),t===null&&Mc(e),n=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,o=r.children,Ec(n,r)?o=null:i!==null&&Ec(n,i)&&(e.flags|=32),_g(t,e),tt(t,e,o,s),e.child;case 6:return t===null&&Mc(e),null;case 13:return kg(t,e,s);case 4:return Qu(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=gr(e,null,n,s):tt(t,e,n,s),e.child;case 11:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Ut(n,r),Eh(t,e,n,r,s);case 7:return tt(t,e,e.pendingProps,s),e.child;case 8:return tt(t,e,e.pendingProps.children,s),e.child;case 12:return tt(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(n=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,ve(da,n._currentValue),n._currentValue=o,i!==null)if(Yt(i.value,o)){if(i.children===r.children&&!ht.current){e=js(t,e,s);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=vs(-1,s&-s),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=s,c=i.alternate,c!==null&&(c.lanes|=s),Lc(i.return,s,e),l.lanes|=s;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(F(341));o.lanes|=s,l=o.alternate,l!==null&&(l.lanes|=s),Lc(o,s,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}tt(t,e,r.children,s),e=e.child}return e;case 9:return r=e.type,n=e.pendingProps.children,cr(e,s),r=Lt(r),n=n(r),e.flags|=1,tt(t,e,n,s),e.child;case 14:return n=e.type,r=Ut(n,e.pendingProps),r=Ut(n.type,r),Th(t,e,n,r,s);case 15:return bg(t,e,e.type,e.pendingProps,s);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Ut(n,r),Ho(t,e),e.tag=1,ft(n)?(t=!0,la(e)):t=!1,cr(e,s),xg(e,n,r),Ic(e,n,r,s),$c(null,e,n,!0,t,s);case 19:return Sg(t,e,s);case 22:return wg(t,e,s)}throw Error(F(156,e.tag))};function Fg(t,e){return pm(t,e)}function Uv(t,e,s,n){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(t,e,s,n){return new Uv(t,e,s,n)}function dd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Wv(t){if(typeof t=="function")return dd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Tu)return 11;if(t===Au)return 14}return 2}function qs(t,e){var s=t.alternate;return s===null?(s=Ot(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Ko(t,e,s,n,r,i){var o=2;if(n=t,typeof t=="function")dd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Kn:return kn(s.children,r,i,e);case Eu:o=8,r|=8;break;case ac:return t=Ot(12,s,e,r|2),t.elementType=ac,t.lanes=i,t;case lc:return t=Ot(13,s,e,r),t.elementType=lc,t.lanes=i,t;case cc:return t=Ot(19,s,e,r),t.elementType=cc,t.lanes=i,t;case Jp:return Ga(s,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Gp:o=10;break e;case Qp:o=9;break e;case Tu:o=11;break e;case Au:o=14;break e;case Es:o=16,n=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Ot(o,s,e,r),e.elementType=t,e.type=n,e.lanes=i,e}function kn(t,e,s,n){return t=Ot(7,t,n,e),t.lanes=s,t}function Ga(t,e,s,n){return t=Ot(22,t,n,e),t.elementType=Jp,t.lanes=s,t.stateNode={isHidden:!1},t}function Bl(t,e,s){return t=Ot(6,t,null,e),t.lanes=s,t}function zl(t,e,s){return e=Ot(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Hv(t,e,s,n,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vl(0),this.expirationTimes=vl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vl(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function hd(t,e,s,n,r,i,o,l,c){return t=new Hv(t,e,s,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ot(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gu(i),t}function Vv(t,e,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qn,key:n==null?null:""+n,children:t,containerInfo:e,implementation:s}}function Ug(t){if(!t)return Gs;t=t._reactInternals;e:{if(Mn(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ft(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var s=t.type;if(ft(s))return Um(t,s,e)}return e}function Wg(t,e,s,n,r,i,o,l,c){return t=hd(s,n,!0,t,r,i,o,l,c),t.context=Ug(null),s=t.current,n=st(),r=Vs(s),i=vs(n,r),i.callback=e??null,Ws(s,i,r),t.current.lanes=r,Hi(t,r,n),pt(t,n),t}function Qa(t,e,s,n){var r=e.current,i=st(),o=Vs(r);return s=Ug(s),e.context===null?e.context=s:e.pendingContext=s,e=vs(i,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Ws(r,e,o),t!==null&&(Kt(t,r,o,i),Fo(t,r,o)),o}function wa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Uh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function fd(t,e){Uh(t,e),(t=t.alternate)&&Uh(t,e)}function qv(){return null}var Hg=typeof reportError=="function"?reportError:function(t){console.error(t)};function pd(t){this._internalRoot=t}Ja.prototype.render=pd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));Qa(t,e,null,null)};Ja.prototype.unmount=pd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Tn(function(){Qa(null,t,null,null)}),e[ws]=null}};function Ja(t){this._internalRoot=t}Ja.prototype.unstable_scheduleHydration=function(t){if(t){var e=wm();t={blockedOn:null,target:t,priority:e};for(var s=0;s<As.length&&e!==0&&e<As[s].priority;s++);As.splice(s,0,t),s===0&&jm(t)}};function md(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Wh(){}function Kv(t,e,s,n,r){if(r){if(typeof n=="function"){var i=n;n=function(){var u=wa(o);i.call(u)}}var o=Wg(e,n,t,0,null,!1,!1,"",Wh);return t._reactRootContainer=o,t[ws]=o.current,Pi(t.nodeType===8?t.parentNode:t),Tn(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof n=="function"){var l=n;n=function(){var u=wa(c);l.call(u)}}var c=hd(t,0,!1,null,null,!1,!1,"",Wh);return t._reactRootContainer=c,t[ws]=c.current,Pi(t.nodeType===8?t.parentNode:t),Tn(function(){Qa(e,c,s,n)}),c}function Za(t,e,s,n,r){var i=s._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var l=r;r=function(){var c=wa(o);l.call(c)}}Qa(e,o,t,r)}else o=Kv(s,e,t,r,n);return wa(o)}vm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=Qr(e.pendingLanes);s!==0&&(Mu(e,s|1),pt(e,Oe()),!(fe&6)&&(vr=Oe()+500,tn()))}break;case 13:Tn(function(){var n=_s(t,1);if(n!==null){var r=st();Kt(n,t,1,r)}}),fd(t,1)}};Lu=function(t){if(t.tag===13){var e=_s(t,134217728);if(e!==null){var s=st();Kt(e,t,134217728,s)}fd(t,134217728)}};bm=function(t){if(t.tag===13){var e=Vs(t),s=_s(t,e);if(s!==null){var n=st();Kt(s,t,e,n)}fd(t,e)}};wm=function(){return me};_m=function(t,e){var s=me;try{return me=t,e()}finally{me=s}};vc=function(t,e,s){switch(e){case"input":if(hc(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var n=s[e];if(n!==t&&n.form===t.form){var r=Wa(n);if(!r)throw Error(F(90));Zp(n),hc(n,r)}}}break;case"textarea":tm(t,s);break;case"select":e=s.value,e!=null&&ir(t,!!s.multiple,e,!1)}};lm=ld;cm=Tn;var Yv={usingClientEntryPoint:!1,Events:[qi,Jn,Wa,om,am,ld]},Fr={findFiberByHostInstance:vn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gv={bundleType:Fr.bundleType,version:Fr.version,rendererPackageName:Fr.rendererPackageName,rendererConfig:Fr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ks.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=hm(t),t===null?null:t.stateNode},findFiberByHostInstance:Fr.findFiberByHostInstance||qv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yo.isDisabled&&yo.supportsFiber)try{za=yo.inject(Gv),ss=yo}catch{}}jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yv;jt.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!md(e))throw Error(F(200));return Vv(t,e,null,s)};jt.createRoot=function(t,e){if(!md(t))throw Error(F(299));var s=!1,n="",r=Hg;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=hd(t,1,!1,null,null,s,!1,n,r),t[ws]=e.current,Pi(t.nodeType===8?t.parentNode:t),new pd(e)};jt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=hm(e),t=t===null?null:t.stateNode,t};jt.flushSync=function(t){return Tn(t)};jt.hydrate=function(t,e,s){if(!Xa(e))throw Error(F(200));return Za(null,t,e,!0,s)};jt.hydrateRoot=function(t,e,s){if(!md(t))throw Error(F(405));var n=s!=null&&s.hydratedSources||null,r=!1,i="",o=Hg;if(s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),e=Wg(e,null,t,1,s??null,r,!1,i,o),t[ws]=e.current,Pi(t),n)for(t=0;t<n.length;t++)s=n[t],r=s._getVersion,r=r(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,r]:e.mutableSourceEagerHydrationData.push(s,r);return new Ja(e)};jt.render=function(t,e,s){if(!Xa(e))throw Error(F(200));return Za(null,t,e,!1,s)};jt.unmountComponentAtNode=function(t){if(!Xa(t))throw Error(F(40));return t._reactRootContainer?(Tn(function(){Za(null,null,t,!1,function(){t._reactRootContainer=null,t[ws]=null})}),!0):!1};jt.unstable_batchedUpdates=ld;jt.unstable_renderSubtreeIntoContainer=function(t,e,s,n){if(!Xa(s))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return Za(t,e,s,!1,n)};jt.version="18.3.1-next-f1338f8080-20240426";function Vg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vg)}catch(t){console.error(t)}}Vg(),Vp.exports=jt;var Qv=Vp.exports,qg,Hh=Qv;qg=Hh.createRoot,Hh.hydrateRoot;const Jv="modulepreload",Xv=function(t){return"/"+t},Vh={},Yi=function(e,s,n){let r=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(s.map(c=>{if(c=Xv(c),c in Vh)return;Vh[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Jv,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return r.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},Zv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Yi(async()=>{const{default:n}=await Promise.resolve().then(()=>Er);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)};class gd extends Error{constructor(e,s="FunctionsError",n){super(e),this.name=s,this.context=n}}class eb extends gd{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class qh extends gd{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Kh extends gd{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Xc;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Xc||(Xc={}));var tb=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class sb{constructor(e,{headers:s={},customFetch:n,region:r=Xc.Any}={}){this.url=e,this.headers=s,this.region=r,this.fetch=Zv(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var n;return tb(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:o}=s;let l={},{region:c}=s;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const h=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),r),body:d}).catch(v=>{throw new eb(v)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new qh(h);if(!h.ok)throw new Kh(h);let p=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return p==="application/json"?m=yield h.json():p==="application/octet-stream"?m=yield h.blob():p==="text/event-stream"?m=h:p==="multipart/form-data"?m=yield h.formData():m=yield h.text(),{data:m,error:null,response:h}}catch(r){return{data:null,error:r,response:r instanceof Kh||r instanceof qh?r.context:void 0}}})}}var ct={},xd={},el={},Gi={},tl={},sl={},nb=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},br=nb();const rb=br.fetch,Kg=br.fetch.bind(br),Yg=br.Headers,ib=br.Request,ob=br.Response,Er=Object.freeze(Object.defineProperty({__proto__:null,Headers:Yg,Request:ib,Response:ob,default:Kg,fetch:rb},Symbol.toStringTag,{value:"Module"})),ab=kx(Er);var nl={};Object.defineProperty(nl,"__esModule",{value:!0});let lb=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};nl.default=lb;var Gg=Mt&&Mt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sl,"__esModule",{value:!0});const cb=Gg(ab),ub=Gg(nl);let db=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=cb.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=Object.assign({},this.headers),this.headers[e]=s,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let r=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let u=null,d=null,h=null,f=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const g=await i.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=g:d=JSON.parse(g))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),b=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&b&&b.length>1&&(h=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const v=await i.text();try{u=JSON.parse(v),Array.isArray(u)&&i.status===404&&(d=[],u=null,f=200,p="OK")}catch{i.status===404&&v===""?(f=204,p="No Content"):u={message:v}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,f=200,p="OK"),u&&this.shouldThrowOnError)throw new ub.default(u)}return{error:u,data:d,count:h,status:f,statusText:p}});return this.shouldThrowOnError||(r=r.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,s)}returns(){return this}overrideTypes(){return this}};sl.default=db;var hb=Mt&&Mt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tl,"__esModule",{value:!0});const fb=hb(sl);let pb=class extends fb.default{select(e){let s=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!s?"":(r==='"'&&(s=!s),r)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:n=s}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,s,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,s?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};tl.default=pb;var mb=Mt&&Mt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gi,"__esModule",{value:!0});const gb=mb(tl);let xb=class extends gb.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const n=Array.from(new Set(s)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${s}`),this}match(e){return Object.entries(e).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(e,s,n){return this.url.searchParams.append(e,`not.${s}.${n}`),this}or(e,{foreignTable:s,referencedTable:n=s}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,s,n){return this.url.searchParams.append(e,`${s}.${n}`),this}};Gi.default=xb;var yb=Mt&&Mt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(el,"__esModule",{value:!0});const Ur=yb(Gi);let vb=class{constructor(e,{headers:s={},schema:n,fetch:r}){this.url=e,this.headers=s,this.schema=n,this.fetch=r}select(e,{head:s=!1,count:n}={}){const r=s?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Ur.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:n=!0}={}){const r="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ur.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&l.push(this.headers.Prefer),r&&l.push(`count=${r}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Ur.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const n="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),s&&r.push(`count=${s}`),this.headers.Prefer=r.join(","),new Ur.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Ur.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};el.default=vb;var rl={},il={};Object.defineProperty(il,"__esModule",{value:!0});il.version=void 0;il.version="0.0.0-automated";Object.defineProperty(rl,"__esModule",{value:!0});rl.DEFAULT_HEADERS=void 0;const bb=il;rl.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${bb.version}`};var Qg=Mt&&Mt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xd,"__esModule",{value:!0});const wb=Qg(el),_b=Qg(Gi),jb=rl;let kb=class Jg{constructor(e,{headers:s={},schema:n,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},jb.DEFAULT_HEADERS),s),this.schemaName=n,this.fetch=r}from(e){const s=new URL(`${this.url}/${e}`);return new wb.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Jg(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:n=!1,get:r=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let c;n||r?(o=n?"HEAD":"GET",Object.entries(s).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(o="POST",c=s);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new _b.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};xd.default=kb;var Tr=Mt&&Mt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ct,"__esModule",{value:!0});ct.PostgrestError=ct.PostgrestBuilder=ct.PostgrestTransformBuilder=ct.PostgrestFilterBuilder=ct.PostgrestQueryBuilder=ct.PostgrestClient=void 0;const Xg=Tr(xd);ct.PostgrestClient=Xg.default;const Zg=Tr(el);ct.PostgrestQueryBuilder=Zg.default;const e0=Tr(Gi);ct.PostgrestFilterBuilder=e0.default;const t0=Tr(tl);ct.PostgrestTransformBuilder=t0.default;const s0=Tr(sl);ct.PostgrestBuilder=s0.default;const n0=Tr(nl);ct.PostgrestError=n0.default;var Sb=ct.default={PostgrestClient:Xg.default,PostgrestQueryBuilder:Zg.default,PostgrestFilterBuilder:e0.default,PostgrestTransformBuilder:t0.default,PostgrestBuilder:s0.default,PostgrestError:n0.default};const{PostgrestClient:Nb,PostgrestQueryBuilder:AS,PostgrestFilterBuilder:OS,PostgrestTransformBuilder:RS,PostgrestBuilder:MS,PostgrestError:LS}=Sb;function Cb(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Pb=Cb(),Eb="2.11.15",Tb=`realtime-js/${Eb}`,Ab="1.0.0",r0=1e4,Ob=1e3;var hi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(hi||(hi={}));var Ge;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ge||(Ge={}));var Ht;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ht||(Ht={}));var Zc;(function(t){t.websocket="websocket"})(Zc||(Zc={}));var yn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(yn||(yn={}));class Rb{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,s,n)}_decodeBroadcast(e,s,n){const r=s.getUint8(1),i=s.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+r));o=o+r;const c=n.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class i0{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var xe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(xe||(xe={}));const Yh=(t,e,s={})=>{var n;const r=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=Mb(o,t,e,r),i),{})},Mb=(t,e,s,n)=>{const r=e.find(l=>l.name===t),i=r==null?void 0:r.type,o=s[t];return i&&!n.includes(i)?o0(i,o):eu(o)},o0=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return Bb(e,s)}switch(t){case xe.bool:return Lb(e);case xe.float4:case xe.float8:case xe.int2:case xe.int4:case xe.int8:case xe.numeric:case xe.oid:return Db(e);case xe.json:case xe.jsonb:return Ib(e);case xe.timestamp:return zb(e);case xe.abstime:case xe.date:case xe.daterange:case xe.int4range:case xe.int8range:case xe.money:case xe.reltime:case xe.text:case xe.time:case xe.timestamptz:case xe.timetz:case xe.tsrange:case xe.tstzrange:return eu(e);default:return eu(e)}},eu=t=>t,Lb=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Db=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Ib=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Bb=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,n=t[s];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>o0(e,l))}return t},zb=t=>typeof t=="string"?t.replace(" ","T"):t,a0=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class $l{constructor(e,s,n={},r=r0){this.channel=e,this.event=s,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var n;return this._hasReceived(e)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Gh;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Gh||(Gh={}));class fi{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=fi.syncState(this.state,r,i,o),this.pendingDiffs.forEach(c=>{this.state=fi.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},r=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=fi.syncDiff(this.state,r,i,o),l())}),this.onJoin((r,i,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:o})}),this.onLeave((r,i,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,n,r){const i=this.cloneDeep(e),o=this.transformState(s),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(b=>b.presence_ref),p=h.map(b=>b.presence_ref),m=d.filter(b=>p.indexOf(b.presence_ref)<0),v=h.filter(b=>f.indexOf(b.presence_ref)<0);m.length>0&&(l[u]=m),v.length>0&&(c[u]=v)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,r)}static syncDiff(e,s,n,r){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);e[l].unshift(...f)}n(l,d,c)}),this.map(o,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,r(l,u,c),u.length===0&&delete e[l]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(n=>s(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,n)=>{const r=e[n];return"metas"in r?s[n]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[n]=r,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Qh;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Qh||(Qh={}));var Jh;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Jh||(Jh={}));var ds;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ds||(ds={}));class yd{constructor(e,s={config:{}},n){this.topic=e,this.params=s,this.socket=n,this.bindings={},this.state=Ge.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new $l(this,Ht.join,this.params,this.timeout),this.rejoinTimer=new i0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ge.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ge.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ht.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new fi(this),this.broadcastEndpointURL=a0(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.state==Ge.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(d=>e==null?void 0:e(ds.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(ds.CLOSED));const c={},u={broadcast:i,presence:o,postgres_changes:(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&r!==void 0?r:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){e==null||e(ds.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,p=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,m=[];for(let v=0;v<p;v++){const b=f[v],{filter:{event:g,schema:x,table:y,filter:w}}=b,k=d&&d[v];if(k&&k.event===g&&k.schema===x&&k.table===y&&k.filter===w)m.push(Object.assign(Object.assign({},b),{id:k.id}));else{this.unsubscribe(),this.state=Ge.errored,e==null||e(ds.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e(ds.SUBSCRIBED);return}}).receive("error",d=>{this.state=Ge.errored,e==null||e(ds.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ds.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,n){return this._on(e,s,n)}async send(e,s={}){var n,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=u.body)===null||r===void 0?void 0:r.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ge.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ht.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new $l(this,Ht.leave,{},e),n.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,s,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:r.signal}));return clearTimeout(i),o}_push(e,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new $l(this,e,s,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,s,n){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,n){var r,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Ht;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,s,n);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(p=>{var m,v,b;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((b=(v=p.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(p=>p.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var m,v,b,g,x,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const w=p.id,k=(m=p.filter)===null||m===void 0?void 0:m.event;return w&&((v=s.ids)===null||v===void 0?void 0:v.includes(w))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((b=s.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const w=(x=(g=p==null?void 0:p.filter)===null||g===void 0?void 0:g.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return w==="*"||w===((y=s==null?void 0:s.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:v,table:b,commit_timestamp:g,type:x,errors:y}=m;f=Object.assign(Object.assign({},{schema:v,table:b,commit_timestamp:g,eventType:x,new:{},old:{},errors:y}),this._getPayloadRecords(m))}p.callback(f,n)})}_isClosed(){return this.state===Ge.closed}_isJoined(){return this.state===Ge.joined}_isJoining(){return this.state===Ge.joining}_isLeaving(){return this.state===Ge.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,n){const r=e.toLocaleLowerCase(),i={type:r,filter:s,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,s){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&yd.isEqual(r.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(e[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ht.close,{},e)}_onError(e){this._on(Ht.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ge.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=Yh(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=Yh(e.columns,e.old_record)),s}}const Xh=()=>{},$b=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Fb{constructor(e,s){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=r0,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Xh,this.ref=0,this.logger=Xh,this.conn=null,this.sendBuffer=[],this.serializer=new Rb,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>Yi(async()=>{const{default:c}=await Promise.resolve().then(()=>Er);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${Zc.websocket}`,this.httpEndpoint=a0(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const r=(n=s==null?void 0:s.params)===null||n===void 0?void 0:n.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,o)=>o(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new i0(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Pb),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ab}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,n){this.logger(e,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case hi.connecting:return yn.Connecting;case hi.open:return yn.Open;case hi.closing:return yn.Closing;default:return yn.Closed}}isConnected(){return this.connectionState()===yn.Open}channel(e,s={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(i=>i.topic===n);if(r)return r;{const i=new yd(`realtime:${e}`,s,this);return this.channels.push(i),i}}push(e){const{topic:s,event:n,payload:r,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${s} ${n} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const r={access_token:s,version:Tb};s&&n.updateJoinPayload(r),n.joinedOnce&&n._isJoined()&&n._push(Ht.access_token,{access_token:s})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Ob,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:n,event:r,payload:i,ref:o}=s;n==="phoenix"&&r==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${r} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(r,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(s))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ht.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(s);return`${e}${n}${r}`}_workerObjectUrl(e){let s;if(e)s=e;else{const n=new Blob([$b],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}}class vd extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ie(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Ub extends vd{constructor(e,s,n){super(e),this.name="StorageApiError",this.status=s,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class tu extends vd{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var Wb=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const l0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Yi(async()=>{const{default:n}=await Promise.resolve().then(()=>Er);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},Hb=()=>Wb(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Yi(()=>Promise.resolve().then(()=>Er),void 0)).Response:Response}),su=t=>{if(Array.isArray(t))return t.map(s=>su(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,n])=>{const r=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=su(n)}),e},Vb=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Ln=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const Fl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),qb=(t,e,s)=>Ln(void 0,void 0,void 0,function*(){const n=yield Hb();t instanceof n&&!(s!=null&&s.noResolveJson)?t.json().then(r=>{const i=t.status||500,o=(r==null?void 0:r.statusCode)||i+"";e(new Ub(Fl(r),i,o))}).catch(r=>{e(new tu(Fl(r),r))}):e(new tu(Fl(t),t))}),Kb=(t,e,s,n)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?r:(Vb(n)?(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(n)):r.body=n,Object.assign(Object.assign({},r),s))};function Qi(t,e,s,n,r,i){return Ln(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(s,Kb(e,n,r,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>qb(c,l,n))})})}function _a(t,e,s,n){return Ln(this,void 0,void 0,function*(){return Qi(t,"GET",e,s,n)})}function hs(t,e,s,n,r){return Ln(this,void 0,void 0,function*(){return Qi(t,"POST",e,n,r,s)})}function nu(t,e,s,n,r){return Ln(this,void 0,void 0,function*(){return Qi(t,"PUT",e,n,r,s)})}function Yb(t,e,s,n){return Ln(this,void 0,void 0,function*(){return Qi(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function c0(t,e,s,n,r){return Ln(this,void 0,void 0,function*(){return Qi(t,"DELETE",e,n,r,s)})}var ot=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const Gb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Zh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Qb{constructor(e,s={},n,r){this.url=e,this.headers=s,this.bucketId=n,this.fetch=l0(r)}uploadOrUpdate(e,s,n,r){return ot(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Zh),r);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),r!=null&&r.headers&&(l=Object.assign(Object.assign({},l),r.headers));const u=this._removeEmptyFolders(s),d=this._getFinalPath(u),h=yield(e=="PUT"?nu:hs)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(Ie(i))return{data:null,error:i};throw i}})}upload(e,s,n){return ot(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,n)})}uploadToSignedUrl(e,s,n,r){return ot(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",s);try{let c;const u=Object.assign({upsert:Zh.upsert},r),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield nu(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(Ie(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,s){return ot(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);s!=null&&s.upsert&&(r["x-upsert"]="true");const i=yield hs(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new vd("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}update(e,s,n){return ot(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,n)})}move(e,s,n){return ot(this,void 0,void 0,function*(){try{return{data:yield hs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}})}copy(e,s,n){return ot(this,void 0,void 0,function*(){try{return{data:{path:(yield hs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}})}createSignedUrl(e,s,n){return ot(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield hs(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}})}createSignedUrls(e,s,n){return ot(this,void 0,void 0,function*(){try{const r=yield hs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}})}download(e,s){return ot(this,void 0,void 0,function*(){const r=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield _a(this.fetch,`${this.url}/${r}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Ie(l))return{data:null,error:l};throw l}})}info(e){return ot(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const n=yield _a(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:su(n),error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}exists(e){return ot(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield Yb(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Ie(n)&&n instanceof tu){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,s){const n=this._getFinalPath(e),r=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&r.push(i);const l=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&r.push(c);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(e){return ot(this,void 0,void 0,function*(){try{return{data:yield c0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(Ie(s))return{data:null,error:s};throw s}})}list(e,s,n){return ot(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Gb),s),{prefix:e||""});return{data:yield hs(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const Jb="2.10.4",Xb={"X-Client-Info":`storage-js/${Jb}`};var Bn=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class Zb{constructor(e,s={},n,r){const i=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},Xb),s),this.fetch=l0(n)}listBuckets(){return Bn(this,void 0,void 0,function*(){try{return{data:yield _a(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ie(e))return{data:null,error:e};throw e}})}getBucket(e){return Bn(this,void 0,void 0,function*(){try{return{data:yield _a(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(Ie(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Bn(this,void 0,void 0,function*(){try{return{data:yield hs(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}updateBucket(e,s){return Bn(this,void 0,void 0,function*(){try{return{data:yield nu(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Bn(this,void 0,void 0,function*(){try{return{data:yield hs(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Ie(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Bn(this,void 0,void 0,function*(){try{return{data:yield c0(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(Ie(s))return{data:null,error:s};throw s}})}}class ew extends Zb{constructor(e,s={},n,r){super(e,s,n,r)}from(e){return new Qb(this.url,this.headers,e,this.fetch)}}const tw="2.53.0";let Xr="";typeof Deno<"u"?Xr="deno":typeof document<"u"?Xr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xr="react-native":Xr="node";const sw={"X-Client-Info":`supabase-js-${Xr}/${tw}`},nw={headers:sw},rw={schema:"public"},iw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ow={};var aw=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const lw=t=>{let e;return t?e=t:typeof fetch>"u"?e=Kg:e=fetch,(...s)=>e(...s)},cw=()=>typeof Headers>"u"?Yg:Headers,uw=(t,e,s)=>{const n=lw(s),r=cw();return(i,o)=>aw(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new r(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var dw=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};function hw(t){return t.endsWith("/")?t:t+"/"}function fw(t,e){var s,n;const{db:r,auth:i,realtime:o,global:l}=t,{db:c,auth:u,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},c),r),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>dw(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const u0="2.71.1",Hn=30*1e3,ru=3,Ul=ru*Hn,pw="http://localhost:9999",mw="supabase.auth.token",gw={"X-Client-Info":`gotrue-js/${u0}`},iu="X-Supabase-Api-Version",d0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},xw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,yw=10*60*1e3;class bd extends Error{constructor(e,s,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function ne(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class vw extends bd{constructor(e,s,n){super(e,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function bw(t){return ne(t)&&t.name==="AuthApiError"}class h0 extends bd{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class sn extends bd{constructor(e,s,n,r){super(e,n,r),this.name=s,this.status=n}}class Ps extends sn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ww(t){return ne(t)&&t.name==="AuthSessionMissingError"}class vo extends sn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class bo extends sn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class wo extends sn{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function _w(t){return ne(t)&&t.name==="AuthImplicitGrantRedirectError"}class ef extends sn{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ou extends sn{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function Wl(t){return ne(t)&&t.name==="AuthRetryableFetchError"}class tf extends sn{constructor(e,s,n){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class au extends sn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ja="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),sf=` 	
\r=`.split(""),jw=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<sf.length;e+=1)t[sf[e].charCodeAt(0)]=-2;for(let e=0;e<ja.length;e+=1)t[ja[e].charCodeAt(0)]=e;return t})();function nf(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(ja[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(ja[n]),e.queuedBits-=6}}function f0(t,e,s){const n=jw[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function rf(t){const e=[],s=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},i=o=>{Nw(o,n,s)};for(let o=0;o<t.length;o+=1)f0(t.charCodeAt(o),r,i);return e.join("")}function kw(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Sw(t,e){for(let s=0;s<t.length;s+=1){let n=t.charCodeAt(s);if(n>55295&&n<=56319){const r=(n-55296)*1024&65535;n=(t.charCodeAt(s+1)-56320&65535|r)+65536,s+=1}kw(n,e)}}function Nw(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function Cw(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)f0(t.charCodeAt(r),s,n);return new Uint8Array(e)}function Pw(t){const e=[];return Sw(t,s=>e.push(s)),new Uint8Array(e)}function Ew(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};return t.forEach(r=>nf(r,s,n)),nf(null,s,n),e.join("")}function Tw(t){return Math.round(Date.now()/1e3)+t}function Aw(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ft=()=>typeof window<"u"&&typeof document<"u",ln={tested:!1,writable:!1},p0=()=>{if(!Ft())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ln.tested)return ln.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ln.tested=!0,ln.writable=!0}catch{ln.tested=!0,ln.writable=!1}return ln.writable};function Ow(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return s.searchParams.forEach((n,r)=>{e[r]=n}),e}const m0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Yi(async()=>{const{default:n}=await Promise.resolve().then(()=>Er);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},Rw=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Vn=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},cn=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Ns=async(t,e)=>{await t.removeItem(e)};class ol{constructor(){this.promise=new ol.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}ol.promiseConstructor=Promise;function Hl(t){const e=t.split(".");if(e.length!==3)throw new au("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!xw.test(e[n]))throw new au("JWT not in base64url format");return{header:JSON.parse(rf(e[0])),payload:JSON.parse(rf(e[1])),signature:Cw(e[2]),raw:{header:e[0],payload:e[1]}}}async function Mw(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Lw(t,e){return new Promise((n,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){r(o);return}}})()})}function Dw(t){return("0"+t.toString(16)).substr(-2)}function Iw(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let r="";for(let i=0;i<56;i++)r+=s.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,Dw).join("")}async function Bw(t){const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",s),r=new Uint8Array(n);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}async function zw(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await Bw(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function zn(t,e,s=!1){const n=Iw();let r=n;s&&(r+="/PASSWORD_RECOVERY"),await Vn(t,`${e}-code-verifier`,r);const i=await zw(n);return[i,n===i?"plain":"s256"]}const $w=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Fw(t){const e=t.headers.get(iu);if(!e||!e.match($w))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Uw(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Ww(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Hw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function $n(t){if(!Hw.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Vl(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const n=s.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function of(t){return JSON.parse(JSON.stringify(t))}var Vw=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};const mn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),qw=[502,503,504];async function af(t){var e;if(!Rw(t))throw new ou(mn(t),0);if(qw.includes(t.status))throw new ou(mn(t),t.status);let s;try{s=await t.json()}catch(i){throw new h0(mn(i),i)}let n;const r=Fw(t);if(r&&r.getTime()>=d0["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new tf(mn(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Ps}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new tf(mn(s),t.status,s.weak_password.reasons);throw new vw(mn(s),t.status||500,n)}const Kw=(t,e,s,n)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),s))};async function ae(t,e,s,n){var r;const i=Object.assign({},n==null?void 0:n.headers);i[iu]||(i[iu]=d0["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Yw(t,e,s+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Yw(t,e,s,n,r,i){const o=Kw(e,n,r,i);let l;try{l=await t(s,Object.assign({},o))}catch(c){throw console.error(c),new ou(mn(c),0)}if(l.ok||await af(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await af(c)}}function as(t){var e;let s=null;Xw(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=Tw(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:n},error:null}}function lf(t){const e=as(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Rs(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Gw(t){return{data:t,error:null}}function Qw(t){const{action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i}=t,o=Vw(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Jw(t){return t}function Xw(t){return t.access_token&&t.refresh_token&&t.expires_in}const ql=["global","local","others"];var Zw=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};class e_{constructor({url:e="",headers:s={},fetch:n}){this.url=e,this.headers=s,this.fetch=m0(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=ql[0]){if(ql.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ql.join(", ")}`);try{return await ae(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ne(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,s={}){try{return await ae(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Rs})}catch(n){if(ne(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:s}=e,n=Zw(e,["options"]),r=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await ae(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Qw,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(ne(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await ae(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Rs})}catch(s){if(ne(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,n,r,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ae(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:Jw});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(m=>{const v=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(m.split(";")[1].split("=")[1]);u[`${b}Page`]=v}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ne(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){$n(e);try{return await ae(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Rs})}catch(s){if(ne(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){$n(e);try{return await ae(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Rs})}catch(n){if(ne(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,s=!1){$n(e);try{return await ae(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Rs})}catch(n){if(ne(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){$n(e.userId);try{const{data:s,error:n}=await ae(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:s,error:n}}catch(s){if(ne(s))return{data:null,error:s};throw s}}async _deleteFactor(e){$n(e.userId),$n(e.id);try{return{data:await ae(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(ne(s))return{data:null,error:s};throw s}}}function cf(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function t_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Fn={debug:!!(globalThis&&p0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class g0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class s_ extends g0{}async function n_(t,e,s){Fn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Fn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){Fn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await s()}finally{Fn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw Fn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new s_(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Fn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}t_();const r_={url:pw,storageKey:mw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:gw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function uf(t,e,s){return await s()}const Un={};class Ii{constructor(e){var s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ii.nextInstanceID,Ii.nextInstanceID+=1,this.instanceID>0&&Ft()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},r_),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new e_({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=m0(r.fetch),this.lock=r.lock||uf,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Ft()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=n_:this.lock=uf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:p0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=cf(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=cf(this.memoryStorage)),Ft()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,s;return(s=(e=Un[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){Un[this.storageKey]=Object.assign(Object.assign({},Un[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=Un[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Un[this.storageKey]=Object.assign(Object.assign({},Un[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${u0}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=Ow(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),Ft()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:i}=await this._getSessionFromURL(s,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),_w(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ne(s)?{error:s}:{error:new h0("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,n,r;try{const i=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:as}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(ne(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,n,r;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await zn(this.storage,this.storageKey)),i=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:m},xform:as})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(r=f==null?void 0:f.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:as})}else throw new bo("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(ne(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:o,options:l}=e;s=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:lf})}else if("phone"in e){const{phone:i,password:o,options:l}=e;s=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:lf})}else throw new bo("You must provide either an email or phone number and a password");const{data:n,error:r}=s;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new vo}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(s){if(ne(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,n,r,i,o,l,c,u,d,h,f,p;let m,v;if("message"in e)m=e.message,v=e.signature;else{const{chain:b,wallet:g,statement:x,options:y}=e;let w;if(Ft())if(typeof g=="object")w=g;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))w=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=g}const k=new URL((s=y==null?void 0:y.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in w&&w.signIn){const E=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),x?{statement:x}:null));let P;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")P=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)P=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)m=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),v=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${k.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(r=(n=y==null?void 0:y.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const E=await w.signMessage(new TextEncoder().encode(m),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=E}}try{const{data:b,error:g}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Ew(v)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:as});if(g)throw g;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new vo}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:g})}catch(b){if(ne(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(e){const s=await cn(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(s??"").split("/");try{const{data:i,error:o}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:as});if(await Ns(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new vo}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:o})}catch(i){if(ne(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:s,provider:n,token:r,access_token:i,nonce:o}=e,l=await ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:as}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new vo}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(s){if(ne(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,n,r,i,o;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await zn(this.storage,this.storageKey));const{error:h}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new bo("You must provide either an email or phone number.")}catch(l){if(ne(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var s,n;try{let r,i;"options"in e&&(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await ae(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:as});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(r){if(ne(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var s,n,r;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await zn(this.storage,this.storageKey)),await ae(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Gw})}catch(i){if(ne(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;if(n)throw n;if(!s)throw new Ps;const{error:r}=await ae(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(ne(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:o}=await ae(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:r,options:i}=e,{data:o,error:l}=await ae(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new bo("You must provide either an email or phone number and a type")}catch(s){if(ne(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await cn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Ul:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await cn(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Vl()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Rs}):await this._useSession(async s=>{var n,r,i;const{data:o,error:l}=s;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ps}:await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:Rs})})}catch(s){if(ne(s))return ww(s)&&(await this._removeSession(),await Ns(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new Ps;const o=r.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await zn(this.storage,this.storageKey));const{data:u,error:d}=await ae(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Rs});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(ne(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ps;const s=Date.now()/1e3;let n=s,r=!0,i=null;const{payload:o}=Hl(e.access_token);if(o.exp&&(n=o.exp,r=n<=s),r){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(ne(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var n;if(!e){const{data:o,error:l}=s;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Ps;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(ne(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!Ft())throw new wo("No browser detected.");if(e.error||e.error_description||e.error_code)throw new wo(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new ef("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new wo("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ef("No code detected.");const{data:x,error:y}=await this._exchangeCodeForSession(e.code);if(y)throw y;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=e;if(!i||!l||!o||!u)throw new wo("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const p=f-d;p*1e3<=Hn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const m=f-h;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,d);const{data:v,error:b}=await this._getUser(i);if(b)throw b;const g={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(n){if(ne(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await cn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:r,error:i}=s;if(i)return{error:i};const o=(n=r.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(bw(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Ns(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=Aw(),n={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async s=>{var n,r;try{const{data:{session:i},error:o}=s;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await zn(this.storage,this.storageKey,!0));try{return await ae(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(ne(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(ne(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:n,error:r}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ae(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(r)throw r;return Ft()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ne(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var n,r;const{data:i,error:o}=s;if(o)throw o;return await ae(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(s){if(ne(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await Lw(async r=>(r>0&&await Mw(200*Math.pow(2,r-1)),this._debug(s,"refreshing attempt",r),await ae(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:as})),(r,i)=>{const o=200*Math.pow(2,r);return i&&Wl(i)&&Date.now()+o-n<Hn})}catch(n){if(this._debug(s,"error",n),ne(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",n),Ft()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,s;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await cn(this.storage,this.storageKey);if(r&&this.userStorage){let o=await cn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:r.user},await Vn(this.userStorage,this.storageKey+"-user",o)),r.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Vl()}else if(r&&!r.user&&!r.user){const o=await cn(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(r.user=o.user,await Ns(this.storage,this.storageKey+"-user"),await Vn(this.storage,this.storageKey,r)):r.user=Vl()}if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=((s=r.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Ul;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Ul}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),Wl(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(r.access_token);!l&&(o!=null&&o.user)?(r.user=o.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var s,n;if(!e)throw new Ps;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new ol;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ps;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(r,"error",i),ne(i)){const o={session:null,error:i};return Wl(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,s,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,s)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const s=Object.assign({},e),n=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&s.user&&await Vn(this.userStorage,this.storageKey+"-user",{user:s.user});const r=Object.assign({},s);delete r.user;const i=of(r);await Vn(this.storage,this.storageKey,i)}else{const r=of(s);await Vn(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),await Ns(this.storage,this.storageKey),await Ns(this.storage,this.storageKey+"-code-verifier"),await Ns(this.storage,this.storageKey+"-user"),this.userStorage&&await Ns(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ft()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Hn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-e)/Hn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Hn}ms, refresh threshold is ${ru} ticks`),r<=ru&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof g0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ft()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,n){const r=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await zn(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);r.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;return i?{data:null,error:i}:await ae(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(ne(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var n,r;const{data:i,error:o}=s;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await ae(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((r=c==null?void 0:c.totp)===null||r===void 0)&&r.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(s){if(ne(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;if(i)return{data:null,error:i};const{data:o,error:l}=await ae(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(s){if(ne(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;return i?{data:null,error:i}:await ae(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(ne(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(e==null?void 0:e.factors)||[],r=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Hl(r.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(s=r.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,s={keys:[]}){let n=s.keys.find(l=>l.kid===e);if(n)return n;const r=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+yw>r)return n;const{data:i,error:o}=await ae(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=r,n=i.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,s={}){try{let n=e;if(!n){const{data:p,error:m}=await this.getSession();if(m||!p.session)return{data:null,error:m};n=p.session.access_token}const{header:r,payload:i,signature:o,raw:{header:l,payload:c}}=Hl(n);s!=null&&s.allowExpired||Uw(i.exp);const u=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:r,signature:o},error:null}}const d=Ww(r.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,Pw(`${l}.${c}`)))throw new au("Invalid JWT signature");return{data:{claims:i,header:r,signature:o},error:null}}catch(n){if(ne(n))return{data:null,error:n};throw n}}}Ii.nextInstanceID=0;const i_=Ii;class o_ extends i_{constructor(e){super(e)}}var a_=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class l_{constructor(e,s,n){var r,i,o;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const l=hw(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:rw,realtime:ow,auth:Object.assign(Object.assign({},iw),{storageKey:u}),global:nw},h=fw(n??{},d);this.storageKey=(r=h.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=uw(s,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Nb(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new ew(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new sb(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},n={}){return this.rest.rpc(e,s,n)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return a_(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,storageKey:i,flowType:o,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new o_({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Fb(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,s,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const c_=(t,e,s)=>new l_(t,e,s);function u_(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const t=process.version.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}u_()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const d_="https://eymxpphofhhfeuvaqfad.supabase.co",h_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV5bXhwcGhvZmhoZmV1dmFxZmFkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzNTAwMTIsImV4cCI6MjA2ODkyNjAxMn0.mR-TxkFP6b48BB_s_W7mD7NFV3oEZIweAQk7EefzssY",K=c_(d_,h_),x0=A.createContext(void 0);function f_({children:t}){const[e,s]=A.useState(null),[n,r]=A.useState(!1);A.useEffect(()=>{(async()=>{r(!0);try{const{data:{session:u}}=await K.auth.getSession();if(u!=null&&u.user){const{data:d}=await K.from("profiles").select("*").eq("id",u.user.id).limit(1);d&&d.length>0&&s({id:d[0].id,username:d[0].username,email:d[0].email||"",role:d[0].role||"user",joinedDate:d[0].created_at})}}catch(u){console.error("Session check error:",u)}finally{r(!1)}})()},[]);const i=async(c,u)=>{try{console.log(" LOGIN ATTEMPT - Username:",c);const{data:d,error:h}=await K.from("profiles").select("*").eq("username",c).limit(1);if(h)return console.error(" LOGIN FAILED - Database error:",h),!1;if(!d||d.length===0)return console.error(" LOGIN FAILED - No profile found for username:",c),!1;const f=d[0];if(!f.email)return console.error(" LOGIN FAILED - Profile has no email:",f),!1;console.log(" Profile found - Email:",f.email,"Role:",f.role);const{data:p,error:m}=await K.auth.signInWithPassword({email:f.email,password:u});return m?(console.error(" SUPABASE AUTH ERROR:",m.message),!1):(s({id:f.id,username:f.username,email:f.email||"",role:f.role||"user",joinedDate:f.created_at}),!0)}catch(d){return console.error("Login error:",d),!1}},o=async(c,u,d,h)=>{var f,p,m,v;try{console.log(" SIGNUP ATTEMPT - Username:",c,"Email:",u);const{data:b,error:g}=await K.auth.signUp({email:u,password:d,options:{data:{username:c}}});if(g)return console.error(" SUPABASE SIGNUP ERROR:",g.message,"Code:",g.status),!1;if(console.log(" SUPABASE SIGNUP SUCCESS:",{user_id:(f=b.user)==null?void 0:f.id,email:(p=b.user)==null?void 0:p.email,email_confirmed:(m=b.user)==null?void 0:m.email_confirmed_at,user_metadata:(v=b.user)==null?void 0:v.user_metadata}),b.user){const{error:x}=await K.from("profiles").insert({id:b.user.id,username:c,email:u,role:h});x?console.error(" PROFILE CREATION ERROR:",x.message):console.log(" PROFILE CREATED SUCCESSFULLY")}return!0}catch(b){return console.error("Signup error:",b),!1}},l=async()=>{await K.auth.signOut(),s(null),console.log(" LOGGED OUT - Back to guest mode")};return a.jsx(x0.Provider,{value:{user:e,login:i,signup:o,logout:l,loading:n,setUser:s},children:t})}function It(){const t=A.useContext(x0);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var p_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),oe=(t,e)=>{const s=A.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>A.createElement("svg",{ref:d,...p_,width:r,height:r,stroke:n,strokeWidth:o?Number(i)*24/Number(r):i,className:["lucide",`lucide-${m_(t)}`,l].join(" "),...u},[...e.map(([h,f])=>A.createElement(h,f)),...Array.isArray(c)?c:[c]]));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=oe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=oe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=oe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=oe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=oe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_=oe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=oe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=oe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=oe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=oe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=oe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=oe("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=oe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=oe("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=oe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=oe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=oe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=oe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=oe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=oe("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=oe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=oe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hf=oe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=oe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=oe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=oe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=oe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=oe("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=oe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=oe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=oe("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=oe("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=oe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=oe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=oe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=oe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=oe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=oe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=oe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function T_({onBackToLogin:t,onSignupSuccess:e}){const[s,n]=A.useState(""),[r,i]=A.useState(""),[o,l]=A.useState(""),[c,u]=A.useState(""),[d,h]=A.useState(""),[f,p]=A.useState(!1),[m,v]=A.useState(!1),{signup:b}=It(),g=async x=>{if(x.preventDefault(),p(!0),h(""),v(!1),o!==c){h("Passwords do not match."),p(!1);return}if(o.length<6){h("Password must be at least 6 characters long."),p(!1);return}if(s.trim().length<3){h("Username must be at least 3 characters long."),p(!1);return}if(!/^[a-zA-Z0-9_-]+$/.test(s.trim())){h("Username can only contain letters, numbers, hyphens, and underscores."),p(!1);return}await b(s.trim(),r.trim(),o,"user")?(v(!0),setTimeout(()=>{e==null||e()},2e3)):h("Failed to create account. Username might already be taken or there was a server error. Please try a different username."),p(!1)};return m?a.jsx("div",{className:"w-full max-w-md bg-white rounded-xl shadow-2xl p-8 mx-auto",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("span",{className:"text-white text-2xl",children:""})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Account Created!"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Your account has been successfully created! You can now sign in to access the system."}),a.jsx("button",{onClick:t,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Back to Login"})]})}):a.jsxs("div",{className:"w-full max-w-md bg-white rounded-xl shadow-2xl p-8 mx-auto",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors mr-3",children:a.jsx(Sa,{size:20})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create Account"}),a.jsx("p",{className:"text-gray-600",children:"Join the Beyblade community"})]})]}),a.jsxs("form",{onSubmit:g,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),a.jsx("input",{type:"text",id:"username",value:s,onChange:x=>n(x.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,minLength:3,placeholder:"Choose a unique username"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),a.jsx("input",{type:"email",id:"email",value:r,onChange:x=>i(x.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,placeholder:"your.email@example.com"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),a.jsx("input",{type:"password",id:"password",value:o,onChange:x=>l(x.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,minLength:6,placeholder:"At least 6 characters"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),a.jsx("input",{type:"password",id:"confirmPassword",value:c,onChange:x=>u(x.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,minLength:6,placeholder:"Confirm your password"})]}),d&&a.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-md",children:d}),a.jsx("button",{type:"submit",disabled:f,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:f?"Creating Account...":"Create Account"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("p",{className:"text-xs text-gray-500",children:"By creating an account, you agree to participate in tournaments and follow community guidelines. All new accounts start with basic user permissions."})})]})}function A_({onLoginSuccess:t}){const[e,s]=A.useState(""),[n,r]=A.useState(""),[i,o]=A.useState(""),[l,c]=A.useState(!1),[u,d]=A.useState("login"),{login:h}=It(),f=async p=>{p.preventDefault(),c(!0),o(""),await h(e,n)?(s(""),r(""),o(""),t==null||t()):o("Invalid username or password. Please check your credentials and try again."),c(!1)};return u==="signup"?a.jsx(T_,{onBackToLogin:()=>d("login"),onSignupSuccess:t}):a.jsxs("div",{className:"w-full max-w-md bg-white rounded-xl shadow-2xl p-8 mx-auto",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-16 h-16 bg-orange-500 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("span",{className:"text-white text-2xl font-bold",children:"B"})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"OBC Portal"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to access your account"})]}),a.jsxs("form",{onSubmit:f,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),a.jsx("input",{type:"text",id:"username",value:e,onChange:p=>s(p.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),a.jsx("input",{type:"password",id:"password",value:n,onChange:p=>r(p.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-gray-900 bg-white",required:!0})]}),i&&a.jsx("div",{className:"text-red-600 text-sm",children:i}),a.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:l?"Signing in...":"Sign In"})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or"})})]}),a.jsx("div",{className:"mt-6 space-y-3",children:a.jsx("button",{onClick:()=>d("signup"),className:"w-full flex justify-center py-2 px-4 border border-green-300 rounded-md shadow-sm text-sm font-medium text-green-700 bg-green-50 hover:bg-green-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Create New Account"})})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("p",{className:"text-xs text-gray-500",children:"Create an account to participate in tournaments and access all features."})})]})}function O_({onMenuToggle:t,isMenuOpen:e}){const{user:s,logout:n}=It(),[r,i]=A.useState(!1),[o,l]=A.useState(!1),c=u=>{switch(u){case"admin":return"bg-red-500";case"technical_officer":return"bg-blue-500";case"developer":return"bg-purple-500";default:return"bg-gray-500"}};return a.jsx(a.Fragment,{children:a.jsxs("header",{className:"bg-gradient-to-r from-slate-900/95 to-blue-900/95 backdrop-blur-md border-b border-slate-700/50 shadow-2xl",children:[a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center py-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:t,className:"lg:hidden p-2 rounded-lg hover:bg-slate-800/50 transition-all duration-300 hover:shadow-glow",children:e?a.jsx(ts,{size:24}):a.jsx(S_,{size:24})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-energy-400 to-battle-500 rounded-full flex items-center justify-center font-orbitron font-bold text-lg shadow-energy animate-spin-slow",children:""}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-orbitron font-bold bg-gradient-to-r from-blue-400 to-indigo-400 bg-clip-text text-transparent",children:"BEYBLADE"}),a.jsx("p",{className:"text-xs text-slate-400 font-rajdhani",children:"COMMUNITY"})]})]})]}),s&&a.jsx("div",{className:"flex items-center space-x-4",children:a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>i(!r),className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-slate-800/50 transition-all duration-300 hover:shadow-glow beyblade-glow",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center font-orbitron font-bold text-sm",children:s.username.charAt(0).toUpperCase()}),a.jsxs("div",{className:"hidden sm:block text-left",children:[a.jsx("p",{className:"font-rajdhani font-semibold text-white",children:s.username}),a.jsx("p",{className:`text-xs font-rajdhani capitalize ${c(s.role)}`,children:s.role.replace("_"," ")})]})]}),r&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-slate-800/95 backdrop-blur-md border border-slate-700/50 rounded-xl shadow-2xl z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-slate-700/50",children:[a.jsx("p",{className:"font-rajdhani font-semibold text-white",children:s.username}),a.jsx("p",{className:"text-sm text-slate-400 capitalize font-rajdhani",children:s.role.replace("_"," ")})]}),a.jsxs("button",{className:"w-full text-left px-4 py-3 hover:bg-slate-700/50 flex items-center space-x-2 text-slate-300 hover:text-white transition-colors",children:[a.jsx(y0,{size:16}),a.jsx("span",{className:"font-rajdhani",children:"Settings"})]}),a.jsxs("button",{onClick:n,className:"w-full text-left px-4 py-3 hover:bg-red-900/20 flex items-center space-x-2 text-red-400 hover:text-red-300 transition-colors",children:[a.jsx(__,{size:16}),a.jsx("span",{className:"font-rajdhani",children:"Logout"})]})]})})]})}),!s&&a.jsx("div",{className:"flex items-center space-x-4",children:a.jsxs("button",{onClick:()=>l(!0),className:"beyblade-button flex items-center space-x-2",children:[a.jsx(w_,{size:20}),a.jsx("span",{className:"hidden sm:block font-rajdhani font-semibold",children:"Login"})]})})]})}),r&&a.jsx("div",{className:"fixed inset-0 z-30",onClick:()=>{i(!1)}}),o&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",style:{zIndex:999999},onClick:()=>l(!1)}),a.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 pointer-events-none",style:{zIndex:1e6},children:a.jsxs("div",{className:"relative pointer-events-auto",children:[a.jsx(A_,{onLoginSuccess:()=>l(!1)}),a.jsx("button",{onClick:()=>l(!1),className:"absolute -top-3 -right-3 w-8 h-8 bg-red-500 hover:bg-red-600 rounded-full flex items-center justify-center text-white shadow-lg transition-colors z-10",children:a.jsx(ts,{size:16})})]})})]})]})})}const R_=[{id:"dashboard",label:"Dashboard",icon:a.jsx(b_,{size:20}),roles:["user","technical_officer","admin","developer"]},{id:"tournaments",label:"Tournaments",icon:a.jsx(Qs,{size:20}),roles:["user","technical_officer","admin","developer"]},{id:"analytics",label:"Analytics",icon:a.jsx(Na,{size:20}),roles:["user","technical_officer","admin","developer"]},{id:"inventory",label:"My Inventory",icon:a.jsx(cu,{size:20}),roles:["user","technical_officer","admin","developer"]},{id:"deck-builder",label:"Deck Builder",icon:a.jsx(Ca,{size:20}),roles:["user","technical_officer","admin","developer"]},{id:"match-tracker",label:"Match Tracker",icon:a.jsx(Dn,{size:20}),roles:["technical_officer","admin","developer"]},{id:"tournament-manager",label:"Tournament Manager",icon:a.jsx(y0,{size:20}),roles:["admin","developer"]},{id:"user-management",label:"User Management",icon:a.jsx(nn,{size:20}),roles:["admin","developer"]},{id:"database",label:"Database",icon:a.jsx(lu,{size:20}),roles:["developer"]}];function M_({isOpen:t,currentView:e,onViewChange:s}){const{user:n}=It(),r=R_.filter(i=>n?i.roles.includes(n.role||"user"):!i.requiresAuth&&i.roles.includes("user"));return a.jsx("aside",{className:`
      fixed lg:static inset-y-0 left-0 z-40 w-64 bg-gradient-to-b from-slate-900/95 to-slate-800/95 backdrop-blur-md border-r border-slate-700/50 text-white transform transition-transform duration-300 ease-in-out
      ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"}
    `,children:a.jsxs("div",{className:"h-full px-4 py-6 overflow-y-auto",children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"flex items-center space-x-3 px-2",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-energy-400 to-battle-500 rounded-full flex items-center justify-center font-orbitron font-bold text-sm shadow-energy animate-spin-slow",children:""}),a.jsxs("div",{children:[a.jsx("h2",{className:"font-orbitron font-bold text-sm bg-gradient-to-r from-blue-400 to-indigo-400 bg-clip-text text-transparent",children:"BEYBLADE"}),a.jsx("p",{className:"text-xs text-slate-400 font-rajdhani",children:"PORTAL"})]})]})}),a.jsx("ul",{className:"space-y-2",children:r.map(i=>a.jsx("li",{children:a.jsxs("button",{onClick:()=>s(i.id),className:`
                  w-full flex items-center p-3 rounded-lg transition-all duration-300 group font-rajdhani font-medium
                  ${e===i.id?"bg-gradient-to-r from-blue-600/80 to-indigo-600/80 text-white shadow-glow border border-blue-500/30":"text-slate-300 hover:bg-slate-800/50 hover:text-white hover:shadow-glow"}
                `,children:[a.jsx("div",{className:`${e===i.id?"text-white":"text-slate-400 group-hover:text-blue-400"} transition-colors`,children:i.icon}),a.jsx("span",{className:"ml-3 font-rajdhani",children:i.label}),e===i.id&&a.jsx("div",{className:"ml-auto w-2 h-2 bg-blue-400 rounded-full animate-pulse-glow"})]})},i.id))}),a.jsx("div",{className:"mt-8 px-2",children:a.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-slate-700/50 rounded-lg p-4 border border-slate-600/30",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-energy-400 to-energy-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-xs",children:""})}),a.jsx("h3",{className:"font-orbitron font-semibold text-sm text-white",children:"BATTLE READY"})]}),a.jsx("p",{className:"text-xs text-slate-400 font-rajdhani",children:"Tournament management system powered by advanced Beyblade analytics"})]})})]})})}function pf(){const{user:t}=It(),[e,s]=Ue.useState({totalTournaments:0,activePlayers:0,upcomingEvents:0,completedMatches:0}),[n,r]=Ue.useState([]),[i,o]=Ue.useState(!0);Ue.useEffect(()=>{(async()=>{try{const[u,d,h]=await Promise.all([K.from("tournaments").select("*"),K.from("profiles").select("*",{count:"exact",head:!0}),K.from("match_results").select("*",{count:"exact",head:!0})]),f=u.data||[],p=f.filter(m=>m.status==="upcoming").slice(0,3);r(p),s({totalTournaments:f.length,activePlayers:d.count||0,upcomingEvents:f.filter(m=>m.status==="upcoming").length,completedMatches:h.count||0})}catch(u){console.error("Error fetching dashboard data:",u)}finally{o(!1)}})()},[]);const l=[{icon:Qs,label:"Total Tournaments",value:e.totalTournaments,color:"text-blue-600"},{icon:nn,label:"Community Players",value:e.activePlayers,color:"text-green-600"},{icon:Dn,label:"Upcoming Events",value:e.upcomingEvents,color:"text-orange-600"},{icon:w0,label:"Completed Matches",value:e.completedMatches,color:"text-purple-600"}];return i?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading dashboard..."})]})}):a.jsxs("div",{className:"page-container relative",children:[a.jsxs("div",{className:"page-header",children:[a.jsxs("h1",{className:"page-title",children:["Welcome",t?` back, ${t.username}`:" to OBC Portal","!"]}),a.jsx("p",{className:"page-subtitle",children:t?"Check out upcoming tournaments and manage your Beyblade collection!":"Explore tournaments and Beyblade data. Login to access personal features like inventory and deck building."})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:l.map((c,u)=>a.jsx("div",{className:"stat-card group relative",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:`p-4 rounded-xl bg-gradient-to-br ${u===0?"from-blue-500/20 to-indigo-500/20":u===1?"from-green-500/20 to-emerald-500/20":u===2?"from-orange-500/20 to-yellow-500/20":"from-purple-500/20 to-pink-500/20"} ${c.color} group-hover:scale-110 transition-transform duration-300`,children:a.jsx(c.icon,{size:24})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-rajdhani font-medium text-slate-400",children:c.label}),a.jsx("p",{className:"text-3xl font-orbitron font-bold text-white",children:c.value})]})]})},u))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:[a.jsxs("div",{className:"beyblade-card p-6 relative",children:[a.jsxs("h2",{className:"section-title",children:[a.jsx("div",{className:"section-icon",children:a.jsx(Qs,{size:20,className:"text-white"})}),"Upcoming Tournaments"]}),a.jsx("div",{className:"space-y-4",children:n.map(c=>a.jsxs("div",{className:"bg-gradient-to-r from-slate-800/60 to-slate-700/60 rounded-xl p-6 border-l-4 border-blue-500 hover:border-indigo-400 transition-all duration-300 hover:scale-105 backdrop-blur-sm",children:[a.jsx("h3",{className:"font-orbitron font-bold text-white mb-2 text-lg",children:c.name}),a.jsxs("p",{className:"text-slate-300 font-rajdhani mb-3 text-base",children:[new Date(c.tournament_date).toLocaleDateString(),"  ",c.location]}),a.jsxs("div",{className:"flex justify-between items-center mt-2",children:[a.jsxs("span",{className:"text-slate-400 font-rajdhani font-medium",children:[c.current_participants,"/",c.max_participants," registered"]}),a.jsx("span",{className:"tournament-status-upcoming text-sm px-4 py-2 rounded-full font-rajdhani font-bold",children:c.status})]})]},c.id))})]}),a.jsxs("div",{className:"beyblade-card p-6 relative",children:[a.jsxs("h2",{className:"section-title",children:[a.jsx("div",{className:"section-icon bg-gradient-to-br from-green-500 to-emerald-600",children:a.jsx("span",{className:"text-white text-2xl",children:""})}),"System Status"]}),a.jsxs("div",{className:"text-center py-8 space-y-4",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center mx-auto shadow-glow animate-pulse-glow",children:a.jsx("span",{className:"text-white text-2xl",children:""})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-orbitron font-bold text-xl",children:"All Systems Operational"}),a.jsx("p",{className:"text-slate-300 font-rajdhani mt-3 text-lg",children:"Connected to Supabase database"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6 mt-8",children:[a.jsxs("div",{className:"bg-slate-800/60 rounded-xl p-4 backdrop-blur-sm border border-slate-600/30",children:[a.jsx("p",{className:"text-green-400 font-orbitron font-bold text-2xl",children:"99.9%"}),a.jsx("p",{className:"text-slate-300 font-rajdhani font-medium",children:"Uptime"})]}),a.jsxs("div",{className:"bg-slate-800/60 rounded-xl p-4 backdrop-blur-sm border border-slate-600/30",children:[a.jsx("p",{className:"text-blue-400 font-orbitron font-bold text-2xl",children:"<50ms"}),a.jsx("p",{className:"text-slate-300 font-rajdhani font-medium",children:"Response"})]})]})]})]})]})]})}function L_({tournament:t,onClose:e,onSubmit:s}){var W,C,D;const{user:n}=It(),[r,i]=A.useState(""),[o,l]=A.useState("free"),[c,u]=A.useState([{id:"1",bladeLine:"",parts:{}}]),[d,h]=A.useState({blades:[],ratchets:[],bits:[],lockchips:[],assistBlades:[]}),[f,p]=A.useState(!1),[m,v]=A.useState(null),[b,g]=A.useState(!1),[x,y]=A.useState([]),[w,k]=A.useState(""),[E,P]=A.useState(!1),R=async()=>{p(!0),v(null);try{const[M,q,H,ee,ce]=await Promise.all([K.from("beypart_blade").select("*"),K.from("beypart_ratchet").select("*"),K.from("beypart_bit").select("*"),K.from("beypart_lockchip").select("*"),K.from("beypart_assistblade").select("*")]);if(M.error)throw M.error;if(q.error)throw q.error;if(H.error)throw H.error;if(ee.error)throw ee.error;if(ce.error)throw ce.error;h({blades:M.data||[],ratchets:q.data||[],bits:H.data||[],lockchips:ee.data||[],assistBlades:ce.data||[]})}catch(M){console.error("Error fetching parts data:",M),v("Failed to load Beyblade parts. Please try again.")}finally{p(!1)}};Ue.useEffect(()=>{R(),n&&!n.id.startsWith("guest-")&&S()},[]);const S=async()=>{if(!(!n||n.id.startsWith("guest-")))try{const{data:M,error:q}=await K.from("deck_presets").select("*").eq("user_id",n.id).order("updated_at",{ascending:!1});if(q)throw q;y(M||[])}catch(M){console.error("Error fetching deck presets:",M)}},L=M=>{const q=x.find(H=>H.id===M);if(q){const H=q.beyblades.slice(0,t.beyblades_per_player).map((ee,ce)=>({id:(ce+1).toString(),bladeLine:ee.blade_line,parts:ee.parts}));u(H),P(!1),k("")}},_=M=>{switch(M){case"Basic":case"Unique":case"X-Over":return["Blade","Ratchet","Bit"];case"Custom":return["Lockchip","Main Blade","Assist Blade","Ratchet","Bit"];default:return[]}},I=(M,q)=>{if(!M)return[];let H=[];switch(q){case"Blade":case"Main Blade":H=d.blades.filter(ee=>M==="Custom"&&q==="Main Blade"?!0:ee.Line===M);break;case"Ratchet":H=d.ratchets;break;case"Bit":H=d.bits;break;case"Lockchip":H=d.lockchips;break;case"Assist Blade":H=d.assistBlades;break;default:H=[]}return H.sort((ee,ce)=>{const qe=Q(ee,q),St=Q(ce,q);return qe.localeCompare(St)})},Q=(M,q)=>{switch(q){case"Blade":case"Main Blade":return M.Blades;case"Ratchet":return M.Ratchet;case"Bit":return`${M.Bit} (${M.Shortcut})`;case"Lockchip":return M.Lockchip;case"Assist Blade":return`${M["Assist Blade Name"]} (${M["Assist Blade"]})`;default:return""}},se=(M,q)=>{var ce,qe,St,Bt,Nt,Ct,Ar,Or;if(!M||!_(M).every(on=>q[on]))return"";if(M==="Custom"){const on=((ce=q.Lockchip)==null?void 0:ce.Lockchip)||"",Rr=((qe=q["Main Blade"])==null?void 0:qe.Blades)||"",ue=((St=q["Assist Blade"])==null?void 0:St["Assist Blade"])||"",eo=((Bt=q.Ratchet)==null?void 0:Bt.Ratchet)||"",fl=((Nt=q.Bit)==null?void 0:Nt.Shortcut)||"";return`${on}${Rr} ${ue}${eo}${fl}`}else{const on=((Ct=q.Blade)==null?void 0:Ct.Blades)||"",Rr=((Ar=q.Ratchet)==null?void 0:Ar.Ratchet)||"",ue=((Or=q.Bit)==null?void 0:Or.Shortcut)||"";return`${on} ${Rr}${ue}`}},X=M=>{let q={attack:0,defense:0,stamina:0,dash:0,burstRes:0};return Object.values(M).forEach(H=>{H&&(q.attack+=H.Attack||0,q.defense+=H.Defense||0,q.stamina+=H.Stamina||0,q.dash+=H.Dash||0,q.burstRes+=H["Burst Res"]||0)}),q},te=()=>{c.length<t.beyblades_per_player?u([...c,{id:Date.now().toString(),bladeLine:"",parts:{}}]):alert(`Maximum ${t.beyblades_per_player} Beyblades allowed for this tournament.`)},Z=M=>{c.length>1&&u(c.filter(q=>q.id!==M))},U=(M,q,H)=>{u(c.map(ee=>ee.id===M?{...ee,[q]:H,parts:{}}:ee))},O=(M,q,H)=>{u(c.map(ee=>ee.id===M?{...ee,parts:{...ee.parts,[q]:H}}:ee))},j=()=>!r.trim()||!o?!1:c.every(M=>M.bladeLine?_(M.bladeLine).every(H=>M.parts[H]):!1),N=async()=>{if(!j()){alert("Please fill in all required fields to register for the tournament.");return}g(!0);try{const{data:M,error:q}=await K.from("tournament_registrations").insert({tournament_id:t.id,player_name:r.trim(),payment_mode:o,status:"confirmed"}).select().single();if(q)throw new Error(`Registration failed: ${q.message}`);for(const H of c){const ee=se(H.bladeLine,H.parts),{data:ce,error:qe}=await K.from("tournament_beyblades").insert({registration_id:M.id,beyblade_name:ee,blade_line:H.bladeLine}).select().single();if(qe)throw new Error(`Beyblade registration failed: ${qe.message}`);const St=Object.entries(H.parts).map(([Nt,Ct])=>({beyblade_id:ce.id,part_type:Nt,part_name:Q(Ct,Nt),part_data:Ct})),{error:Bt}=await K.from("tournament_beyblade_parts").insert(St);if(Bt)throw new Error(`Parts registration failed: ${Bt.message}`)}alert(`Successfully registered ${r} for ${t.name}! Registration ID: ${M.id}`),s(r,c)}catch(M){console.error("Registration error:",M),alert(`Failed to register for tournament: ${M instanceof Error?M.message:"Unknown error"}. Please try again.`)}finally{g(!1)}},B=M=>{switch(M){case"Basic":return"text-blue-600 bg-blue-50 border-blue-200";case"Unique":return"text-purple-600 bg-purple-50 border-purple-200";case"Custom":return"text-orange-600 bg-orange-50 border-orange-200";case"X-Over":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},T=M=>{switch(M){case"attack":return a.jsx(j0,{size:12,className:"text-red-500"});case"defense":return a.jsx(pi,{size:12,className:"text-blue-500"});case"stamina":return a.jsx(wd,{size:12,className:"text-green-500"});case"dash":return a.jsx(ka,{size:12,className:"text-yellow-500"});case"burstRes":return a.jsx(v0,{size:12,className:"text-purple-500"});default:return null}},z=M=>{switch(M){case"attack":return"bg-red-500";case"defense":return"bg-blue-500";case"stamina":return"bg-green-500";case"dash":return"bg-yellow-500";case"burstRes":return"bg-purple-500";default:return"bg-gray-500"}},V=({stats:M})=>{const q=ee=>{switch(ee){case"attack":case"defense":case"stamina":return 200;case"dash":return 50;case"burstRes":return 80;default:return 100}},H=[{key:"attack",label:"Attack",value:M.attack},{key:"defense",label:"Defense",value:M.defense},{key:"stamina",label:"Stamina",value:M.stamina},{key:"dash",label:"Dash",value:M.dash},{key:"burstRes",label:"Burst Res",value:M.burstRes}];return a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mt-4",children:[a.jsxs("h5",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center",children:[a.jsx(ka,{size:16,className:"mr-2"}),"Combined Stats"]}),a.jsx("div",{className:"space-y-2",children:H.map(({key:ee,label:ce,value:qe})=>a.jsxs("div",{className:"flex items-center",children:[a.jsxs("div",{className:"flex items-center w-20 text-xs font-medium text-gray-600",children:[T(ee),a.jsx("span",{className:"ml-1",children:ce})]}),a.jsx("div",{className:"flex-1 mx-3",children:a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${z(ee)}`,style:{width:`${Math.min(qe/q(ee)*100,100)}%`}})})}),a.jsx("div",{className:"w-8 text-xs font-bold text-gray-700 text-right",children:qe})]},ee))})]})};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(f||b)&&a.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-10 rounded-lg",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:f?"Loading Beyblade parts...":"Registering for tournament..."})]})}),a.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Tournament Registration"}),a.jsx("p",{className:"text-gray-600",children:t.name}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Configure your Beyblades for this tournament. You can register up to ",t.beyblades_per_player," Beyblades."]})]}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:a.jsx(ts,{size:24})})]}),a.jsxs("div",{className:"p-6",children:[m&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-red-600 mr-3",children:""}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-red-800 font-medium",children:"Error Loading Parts"}),a.jsx("p",{className:"text-red-700 text-sm mt-1",children:m}),a.jsx("button",{onClick:R,className:"mt-2 text-red-600 hover:text-red-800 text-sm underline",children:"Try Again"})]})]})}),a.jsxs("div",{className:"mb-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx(_0,{className:"text-blue-600 mr-2",size:20}),a.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Player Information"})]}),a.jsx("div",{className:"mb-4 p-3 bg-white rounded-lg border border-blue-200",children:a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"No account required!"})," Simply provide your blader name and Beyblade details to register for this tournament. Your registration will be saved for tournament organizers."]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"playerName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Player Name *"}),a.jsx("input",{type:"text",id:"playerName",value:r,onChange:M=>i(M.target.value),placeholder:"Enter your player name for this tournament",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This is your blader name that will appear in tournament brackets and match results."})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"paymentMode",className:"block text-sm font-medium text-gray-700 mb-2",children:"Mode of Payment *"}),a.jsxs("select",{id:"paymentMode",value:o,onChange:M=>l(M.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[a.jsx("option",{value:"free",children:"Free Entry"}),a.jsx("option",{value:"cash",children:"Cash"}),a.jsx("option",{value:"gcash",children:"GCash"}),a.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o==="free"?"This tournament has no entry fee.":o==="cash"?"Pay at the venue on tournament day.":o==="gcash"?"Payment details will be provided after registration.":"Bank details will be provided after registration."})]})]})]}),!(n!=null&&n.id.startsWith("guest-"))&&x.length>0&&a.jsxs("div",{className:"mb-8 bg-green-50 border border-green-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx(Ca,{className:"text-green-600 mr-2",size:20}),a.jsx("h3",{className:"text-lg font-semibold text-green-900",children:"Quick Setup with Deck Presets"})]}),a.jsx("div",{className:"mb-4 p-3 bg-white rounded-lg border border-green-200",children:a.jsxs("p",{className:"text-sm text-green-800",children:[a.jsx("strong",{children:"Save time!"})," Use one of your saved deck presets to quickly configure your Beyblades for this tournament."]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Deck Preset"}),a.jsxs("select",{value:w,onChange:M=>k(M.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500",children:[a.jsx("option",{value:"",children:"-- Select a preset --"}),x.map(M=>a.jsxs("option",{value:M.id,children:[M.name," (",M.beyblades.length," Beyblades)"]},M.id))]})]}),a.jsx("div",{className:"flex items-end",children:a.jsx("button",{type:"button",onClick:()=>w&&L(w),disabled:!w,className:"w-full bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Load Preset"})})]}),w&&a.jsx("div",{className:"mt-4 p-3 bg-white rounded-lg border border-green-200",children:a.jsxs("div",{className:"text-sm text-green-800",children:[a.jsx("strong",{children:"Preview:"}),(W=x.find(M=>M.id===w))==null?void 0:W.beyblades.slice(0,3).map((M,q)=>a.jsxs("div",{className:"font-mono text-xs mt-1",children:[" ",M.name||`Beyblade ${q+1}`]},q)),((C=x.find(M=>M.id===w))==null?void 0:C.beyblades.length)>3&&a.jsxs("div",{className:"text-xs mt-1 text-green-600",children:["+",((D=x.find(M=>M.id===w))==null?void 0:D.beyblades.length)-3," more..."]})]})})]}),o!=="free"&&a.jsxs("div",{className:"mb-8 bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:"w-6 h-6 bg-yellow-500 rounded-full flex items-center justify-center mr-2",children:a.jsx("span",{className:"text-white text-sm font-bold",children:""})}),a.jsx("h3",{className:"text-lg font-semibold text-yellow-900",children:"Payment Information"})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-yellow-200",children:[o==="cash"&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Cash Payment"}),a.jsx("p",{className:"text-gray-700 text-sm",children:"Please bring the exact tournament entry fee on the day of the tournament. Payment will be collected during registration at the venue."})]}),o==="gcash"&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"GCash Payment"}),a.jsx("p",{className:"text-gray-700 text-sm mb-2",children:"GCash payment details will be sent to you after registration confirmation."}),a.jsxs("div",{className:"bg-gray-50 p-3 rounded text-sm",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"GCash Number:"})," [Will be provided]"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Account Name:"})," [Will be provided]"]})]})]}),o==="bank_transfer"&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Bank Transfer"}),a.jsx("p",{className:"text-gray-700 text-sm mb-2",children:"Bank transfer details will be sent to you after registration confirmation."}),a.jsxs("div",{className:"bg-gray-50 p-3 rounded text-sm",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Bank:"})," [Will be provided]"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Account Number:"})," [Will be provided]"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Account Name:"})," [Will be provided]"]})]})]})]})]}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("label",{htmlFor:"playerName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Beyblade Registration"}),a.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Configure your Beyblades for this tournament. You can register up to ",t.beybladesPerPlayer," Beyblades."]})]}),c.map((M,q)=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Beyblade #",q+1]}),c.length>1&&a.jsx("button",{onClick:()=>Z(M.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-full transition-colors",children:a.jsx(rs,{size:16})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blade Line *"}),a.jsxs("select",{value:M.bladeLine,onChange:H=>U(M.id,"bladeLine",H.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select Blade Line"}),a.jsx("option",{value:"Basic",children:"Basic"}),a.jsx("option",{value:"Unique",children:"Unique"}),a.jsx("option",{value:"Custom",children:"Custom"}),a.jsx("option",{value:"X-Over",children:"X-Over"})]})]}),M.bladeLine&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Generated Name"}),a.jsx("div",{className:"w-full border border-gray-200 rounded-md px-3 py-2 bg-gray-50 text-gray-700 font-mono",children:se(M.bladeLine,M.parts)||"Select all parts to generate name"})]})]}),M.bladeLine&&a.jsxs("div",{className:`border rounded-lg p-4 ${B(M.bladeLine)}`,children:[a.jsxs("h4",{className:"font-semibold mb-3 flex items-center",children:[a.jsxs("span",{className:"mr-2",children:[M.bladeLine," Line Parts"]}),a.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-white bg-opacity-50",children:[_(M.bladeLine).length," parts required"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_(M.bladeLine).map(H=>a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:[H," *"]}),a.jsxs("select",{value:M.parts[H]?JSON.stringify(M.parts[H]):"",onChange:ee=>{if(ee.target.value){const ce=JSON.parse(ee.target.value);O(M.id,H,ce)}},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:f||!!m,children:[a.jsxs("option",{value:"",children:["Select ",H]}),I(M.bladeLine,H).map((ee,ce)=>a.jsx("option",{value:JSON.stringify(ee),children:Q(ee,H)},ce))]}),M.parts[H]&&a.jsx("div",{className:"mt-2",children:a.jsx("div",{className:"flex flex-wrap gap-2 text-xs",children:Object.entries(M.parts[H]).map(([ee,ce])=>typeof ce=="number"&&ce>0&&["Attack","Defense","Stamina","Dash","Burst Res"].includes(ee)?a.jsxs("div",{className:"flex items-center space-x-1 bg-white bg-opacity-50 px-2 py-1 rounded",children:[T(ee.toLowerCase().replace(" ","")),a.jsxs("span",{children:[ee,": ",ce]})]},ee):null)})})]},H))})]}),M.bladeLine&&Object.keys(M.parts).length>0&&a.jsx(V,{stats:X(M.parts)})]},M.id))]}),c.length<t.beyblades_per_player&&a.jsxs("button",{onClick:te,className:"mt-6 w-full border-2 border-dashed border-gray-300 rounded-lg p-4 text-gray-600 hover:border-blue-400 hover:text-blue-600 transition-colors flex items-center justify-center space-x-2",children:[a.jsx(wr,{size:20}),a.jsxs("span",{children:["Add Another Beyblade (",c.length,"/",t.beyblades_per_player,")"]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[a.jsx("button",{onClick:e,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:N,disabled:!j()||f||!!m||b,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[a.jsx(Bi,{size:16}),a.jsx("span",{children:"Register for Tournament"})]})]})]})]})})}function D_(){It();const[t,e]=A.useState("all"),[s,n]=A.useState(null),[r,i]=A.useState([]),[o,l]=A.useState(!0);Ue.useEffect(()=>{(async()=>{try{const{data:f,error:p}=await K.from("tournaments").select("*").order("tournament_date",{ascending:!0});if(p)throw p;i(f||[])}catch(f){console.error("Error fetching tournaments:",f),i([])}finally{l(!1)}})()},[]);const c=r.filter(h=>t==="all"||h.status===t),u=(h,f)=>{console.log("Tournament registration:",{playerName:h,beyblades:f}),alert(`Successfully registered ${h} with ${f.length} Beyblades for the tournament!`),n(null)},d=h=>{switch(h){case"upcoming":return"tournament-status-upcoming";case"active":return"tournament-status-active";case"completed":return"tournament-status-completed";default:return"tournament-status-completed"}};return a.jsxs("div",{className:"page-container",children:[a.jsxs("div",{className:"page-header",children:[a.jsx("h1",{className:"page-title",children:"Tournaments"}),a.jsx("p",{className:"page-subtitle",children:"Join the ultimate Beyblade battles!"})]}),a.jsx("div",{className:"mb-10",children:a.jsx("nav",{className:"flex space-x-2 bg-slate-800/60 rounded-2xl p-2 backdrop-blur-md border border-slate-600/30",children:["all","upcoming","active","completed"].map(h=>a.jsx("button",{onClick:()=>e(h),className:`px-6 py-3 rounded-xl font-rajdhani font-bold capitalize transition-all duration-300 ${t===h?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-glow scale-105":"text-slate-300 hover:text-white hover:bg-slate-700/50"}`,children:h},h))})}),o?a.jsxs("div",{className:"text-center py-20",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-300 font-rajdhani text-lg",children:"Loading tournaments..."})]}):c.length===0?a.jsxs("div",{className:"text-center py-20",children:[a.jsx(Qs,{size:64,className:"mx-auto text-slate-400 mb-6"}),a.jsx("p",{className:"text-slate-300 font-orbitron font-bold text-xl",children:"No tournaments found"}),a.jsx("p",{className:"text-slate-400 font-rajdhani text-lg mt-3",children:"Check back later for upcoming events"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:c.map(h=>a.jsx("div",{className:"beyblade-card hover:scale-105 transition-all duration-500",children:a.jsxs("div",{className:"p-8",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("h3",{className:"text-xl font-orbitron font-bold text-white",children:h.name}),a.jsx("span",{className:`px-3 py-2 rounded-full text-sm font-bold capitalize ${d(h.status)}`,children:h.status})]}),a.jsx("p",{className:"text-slate-300 mb-6 font-rajdhani text-lg",children:h.description}),a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsxs("div",{className:"flex items-center text-slate-300 font-rajdhani font-medium",children:[a.jsx(Dn,{size:16,className:"mr-2"}),new Date(h.tournament_date).toLocaleDateString()]}),a.jsxs("div",{className:"flex items-center text-slate-300 font-rajdhani font-medium",children:[a.jsx(k_,{size:16,className:"mr-2"}),h.location]}),a.jsxs("div",{className:"flex items-center text-slate-300 font-rajdhani font-medium",children:[a.jsx(nn,{size:16,className:"mr-2"}),h.current_participants,"/",h.max_participants," participants"]}),h.prize_pool&&a.jsxs("div",{className:"flex items-center text-slate-300 font-rajdhani font-medium",children:[a.jsx(Qs,{size:16,className:"mr-2"}),"Prize Pool: ",h.prize_pool]}),a.jsxs("div",{className:"flex items-center text-slate-300 font-rajdhani font-medium",children:[a.jsx(wd,{size:16,className:"mr-2"}),"Registration ends: ",new Date(h.registration_deadline).toLocaleDateString()]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex justify-between text-slate-300 font-rajdhani font-medium mb-2",children:[a.jsx("span",{children:"Registration Progress"}),a.jsxs("span",{children:[Math.round(h.current_participants/h.max_participants*100),"%"]})]}),a.jsx("div",{className:"w-full bg-slate-700/50 rounded-full h-3",children:a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-500 h-3 rounded-full transition-all duration-500 shadow-glow",style:{width:`${h.current_participants/h.max_participants*100}%`}})})]}),h.status==="upcoming"&&a.jsx("button",{onClick:()=>n(h.id),disabled:h.current_participants>=h.max_participants,className:"w-full beyblade-button disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 disabled:hover:translate-y-0",children:h.current_participants>=h.max_participants?"Tournament Full":"Register for Tournament"})]})},h.id))}),s&&a.jsx(L_,{tournament:c.find(h=>h.id===s),onClose:()=>n(null),onSubmit:u})]})}function mf(t,e,s=1.96){if(e===0)return 0;const n=t/e,r=1+s*s/e,i=n+s*s/(2*e),o=s*Math.sqrt((n*(1-n)+s*s/(4*e))/e);return(i-o)/r}function I_(t,e,s){console.log(` PARSER: Attempting ${e} parsing for: "${t}"`);let n=t;const r=k0(n,s.bits);if(!r)return console.log(` PARSER: ${e} parsing failed - no bit found`),null;n=n.slice(0,n.length-r.bitName.length).trim(),console.log(` PARSER: After bit removal: "${n}"`);const i=S0(n,s.ratchets);if(!i)return console.log(` PARSER: ${e} parsing failed - no ratchet found`),null;n=n.slice(0,n.length-i.ratchetName.length).trim(),console.log(` PARSER: After ratchet removal: "${n}"`),console.log(` PARSER: Looking for ${e} blade: "${n}"`);const o=N0(n,s.blades.filter(c=>c.Line===e));if(!o)return console.log(` PARSER: ${e} parsing failed - no ${e} blade found for "${n}"`),null;const l={isCustom:!1,blade:o.bladeName,ratchet:i.ratchetName,bit:r.bitName};return console.log(` PARSER: ${e} parsing successful:`,l),l}function B_(t,e){console.log(` PARSER: Attempting Custom parsing for: "${t}"`);let s=t;const n=z_(t,e.lockchips);if(!n)return console.log(" PARSER: Custom parsing failed - no lockchip found"),null;s=t.slice(n.lockchipName.length),console.log(` PARSER: After lockchip removal: "${s}"`);const r=k0(s,e.bits);if(!r)return console.log(" PARSER: Custom parsing failed - no bit found"),null;s=s.slice(0,s.length-r.bitName.length).trim(),console.log(` PARSER: After bit removal: "${s}"`);const i=S0(s,e.ratchets);if(!i)return console.log(" PARSER: Custom parsing failed - no ratchet found"),null;s=s.slice(0,s.length-i.ratchetName.length).trim(),console.log(` PARSER: After ratchet removal: "${s}"`);const o=$_(s,e.assistBlades);if(!o)return console.log(" PARSER: Custom parsing failed - no assist blade found"),null;s=s.slice(0,s.length-o.assistBladeName.length).trim(),console.log(` PARSER: After assist blade removal: "${s}"`);const l=N0(s,e.blades.filter(u=>u.Line==="Custom"));if(!l)return console.log(` PARSER: Custom parsing failed - no Custom main blade found for "${s}"`),null;const c={isCustom:!0,lockchip:n.lockchipName,mainBlade:l.bladeName,assistBlade:o.assistBladeName,ratchet:i.ratchetName,bit:r.bitName};return console.log(" PARSER: Custom parsing successful:",c),c}function k0(t,e){console.log(` PARSER: Finding bit in "${t}"`),console.log(" PARSER: Available bits:",e.map(n=>({shortcut:n.Shortcut,full:n.Bit})));const s=[...e].sort((n,r)=>{const i=n.Shortcut||n.Bit||"";return(r.Shortcut||r.Bit||"").length-i.length});for(const n of s){const r=n.Shortcut;if(r&&t.endsWith(r))return console.log(` PARSER: Found bit by shortcut: ${r}`),{bit:n,bitName:r}}for(const n of s){const r=n.Bit;if(r&&t.endsWith(r))return console.log(` PARSER: Found bit by full name: ${r}  ${n.Shortcut||r}`),{bit:n,bitName:n.Shortcut||r}}return console.log(` PARSER: No bit found in "${t}"`),null}function S0(t,e){console.log(` PARSER: Finding ratchet in "${t}"`);const s=[...e].sort((n,r)=>{const i=n.Ratchet||"";return(r.Ratchet||"").length-i.length});for(const n of s){const r=n.Ratchet;if(r&&t.endsWith(r))return console.log(` PARSER: Found ratchet: ${r}`),{ratchet:n,ratchetName:r}}return console.log(` PARSER: No ratchet found in "${t}"`),null}function N0(t,e){console.log(` PARSER: Finding blade in "${t}"`),console.log(" PARSER: Available blades:",e.map(s=>({name:s.Blades,line:s.Line})));for(const s of e){const n=s.Blades;if(n&&t===n)return console.log(` PARSER: Found blade: ${n} (${s.Line} line)`),{blade:s,bladeName:n}}return console.log(` PARSER: No blade found for "${t}" in available blades`),null}function z_(t,e){console.log(` PARSER: Finding lockchip in "${t}"`),console.log(" PARSER: Available lockchips:",e.map(n=>n.Lockchip));const s=[...e].sort((n,r)=>{const i=n.Lockchip||"";return(r.Lockchip||"").length-i.length});for(const n of s){const r=n.Lockchip;if(r&&t.startsWith(r))return console.log(` PARSER: Found lockchip: ${r}`),{lockchip:n,lockchipName:r}}return console.log(` PARSER: No lockchip found in "${t}"`),null}function $_(t,e){console.log(` PARSER: Finding assist blade in "${t}"`),console.log(" PARSER: Available assist blades:",e.map(n=>n["Assist Blade"]));const s=[...e].sort((n,r)=>{const i=n["Assist Blade"]||"";return(r["Assist Blade"]||"").length-i.length});for(const n of s){const r=n["Assist Blade"];if(r&&t.endsWith(r))return console.log(` PARSER: Found assist blade: ${r}`),{assistBlade:n,assistBladeName:r}}return console.log(` PARSER: No assist blade found in "${t}"`),null}function gf(t,e,s){if(!t||!t.trim())return console.log(" PARSER: Empty beyblade name"),{isCustom:!1};console.log(`
 PARSER: Starting to parse "${t}"`);const n=["Basic","Unique","X-Over","Custom"];for(const r of n){if(console.log(` PARSER: Trying ${r} blade line...`),r==="Custom"){const i=B_(t,s);if(i)return console.log(` PARSER: Successfully parsed as ${r} Beyblade`),i}else{const i=I_(t,r,s);if(i)return console.log(` PARSER: Successfully parsed as ${r} Beyblade`),i}console.log(` PARSER: ${r} parsing failed`)}return console.log(` PARSER: All parsing attempts failed for "${t}"`),{isCustom:!1}}function F_({onBack:t}){var B;const[e,s]=A.useState([]),[n,r]=A.useState(""),[i,o]=A.useState(!0),[l,c]=A.useState(!1),[u,d]=A.useState(null),[h,f]=A.useState({blades:[],ratchets:[],bits:[],lockchips:[],assistBlades:[]}),[p,m]=A.useState({blade:{},ratchet:{},bit:{},lockchip:{},mainBlade:{},assistBlade:{}}),[v,b]=A.useState([]),[g,x]=A.useState(""),[y,w]=A.useState(""),[k,E]=A.useState([]),[P,R]=A.useState(null),[S,L]=A.useState([]),[_,I]=A.useState({key:"wilson",direction:"desc"});A.useEffect(()=>{Q(),se()},[]),A.useEffect(()=>{n&&Object.keys(h.blades).length>0&&X()},[n,h]),A.useEffect(()=>{g&&y&&v.length>0&&te()},[g,y,v]);const Q=async()=>{try{console.log(" META ANALYSIS: Fetching tournaments...");const{data:T,error:z}=await K.from("tournaments").select("id, name, status, tournament_date").order("tournament_date",{ascending:!1});if(z)throw z;s(T||[]),console.log(` META ANALYSIS: Loaded ${(T==null?void 0:T.length)||0} tournaments`);const V=T==null?void 0:T.find(W=>W.status==="completed");V&&(r(V.id),console.log(` META ANALYSIS: Auto-selected completed tournament: ${V.name}`))}catch(T){console.error(" META ANALYSIS: Error fetching tournaments:",T),d("Failed to load tournaments")}finally{o(!1)}},se=async()=>{try{console.log(" META ANALYSIS: Fetching all parts data...");const[T,z,V,W,C]=await Promise.all([K.from("beypart_blade").select("*"),K.from("beypart_ratchet").select("*"),K.from("beypart_bit").select("*"),K.from("beypart_lockchip").select("*"),K.from("beypart_assistblade").select("*")]);if(T.error)throw T.error;if(z.error)throw z.error;if(V.error)throw V.error;if(W.error)throw W.error;if(C.error)throw C.error;const D={blades:T.data||[],ratchets:z.data||[],bits:V.data||[],lockchips:W.data||[],assistBlades:C.data||[]};f(D),console.log(" META ANALYSIS: Parts data loaded:",{blades:D.blades.length,ratchets:D.ratchets.length,bits:D.bits.length,lockchips:D.lockchips.length,assistBlades:D.assistBlades.length})}catch(T){console.error(" META ANALYSIS: Error fetching parts data:",T),d("Failed to load parts data")}},X=async()=>{if(n){c(!0),d(null);try{console.log(` META ANALYSIS: Processing data for tournament ${n}`);const{data:T,error:z}=await K.from("match_results").select("player1_name, player2_name, player1_beyblade, player2_beyblade, player1_blade_line, player2_blade_line, winner_name, outcome, points_awarded").eq("tournament_id",n);if(z)throw z;if(!T||T.length===0){console.log(" META ANALYSIS: No matches found for this tournament"),m({blade:{},ratchet:{},bit:{},lockchip:{},mainBlade:{},assistBlade:{}}),b([]),c(!1);return}console.log(` META ANALYSIS: Processing ${T.length} matches`);const V=[],W={blade:{},ratchet:{},bit:{},lockchip:{},mainBlade:{},assistBlade:{}},C=(D,M)=>{W[D][M]||(W[D][M]={name:M,usage:0,wins:0,losses:0,winRate:0,wilson:0})};T.forEach(D=>{if(!D.winner_name||!D.player1_name||!D.player2_name)return;const M=gf(D.player1_beyblade,D.player1_blade_line,h),q=gf(D.player2_beyblade,D.player2_blade_line,h),H={player:D.player1_name,opponent:D.player2_name,beyblade:D.player1_beyblade,opponentBeyblade:D.player2_beyblade,isWin:D.winner_name===D.player1_name,outcome:D.outcome||"Unknown",parsedParts:M},ee={player:D.player2_name,opponent:D.player1_name,beyblade:D.player2_beyblade,opponentBeyblade:D.player1_beyblade,isWin:D.winner_name===D.player2_name,outcome:D.outcome||"Unknown",parsedParts:q};V.push(H,ee);const ce=(qe,St)=>{Object.entries(qe).forEach(([Bt,Nt])=>{if(Bt==="isCustom"||!Nt)return;C(Bt,Nt);const Ct=W[Bt][Nt];Ct.usage++,St?Ct.wins++:Ct.losses++})};ce(M,H.isWin),ce(q,ee.isWin)}),Object.keys(W).forEach(D=>{Object.values(W[D]).forEach(M=>{const q=M.wins+M.losses;M.winRate=q>0?M.wins/q*100:0,M.wilson=mf(M.wins,q)})}),m(W),b(V),console.log(" META ANALYSIS: Data processing complete"),console.log(" META ANALYSIS: Stats summary:",{totalProcessedMatches:V.length,uniqueBlades:Object.keys(W.blade).length,uniqueRatchets:Object.keys(W.ratchet).length,uniqueBits:Object.keys(W.bit).length})}catch(T){console.error(" META ANALYSIS: Error processing tournament data:",T),d("Failed to process tournament data")}finally{c(!1)}}},te=()=>{console.log(` META ANALYSIS: Generating builds data for ${g}: ${y}`);const T={};v.forEach(V=>{if(V.parsedParts[g]!==y)return;const C=`${V.beyblade}_${V.player}`;T[C]||(T[C]={build:V.beyblade,player:V.player,wins:0,losses:0,winRate:0,wilson:0}),V.isWin?T[C].wins++:T[C].losses++});const z=Object.values(T).map(V=>{const W=V.wins+V.losses;return V.winRate=W>0?V.wins/W*100:0,V.wilson=mf(V.wins,W),V}).sort((V,W)=>W.wilson-V.wilson);E(z),console.log(` META ANALYSIS: Generated ${z.length} builds for ${y}`)},Z=(T,z)=>{R({build:T,player:z});const V=v.filter(W=>W.beyblade===T&&W.player===z);L(V),console.log(` META ANALYSIS: Showing ${V.length} matches for ${T} by ${z}`)},U=T=>{let z="asc";_.key===T&&_.direction==="asc"&&(z="desc"),I({key:T,direction:z})},O=T=>{const z=Object.values(p[T]||{}).filter(V=>V.usage>0);return _.key?[...z].sort((V,W)=>{const C=V[_.key],D=W[_.key];if(typeof C=="number"&&typeof D=="number")return _.direction==="asc"?C-D:D-C;const M=String(C),q=String(D);return _.direction==="asc"?M.localeCompare(q):q.localeCompare(M)}):z.sort((V,W)=>W.wilson-V.wilson)},j=T=>{switch(T){case"blade":return"Blades";case"ratchet":return"Ratchets";case"bit":return"Bits";case"lockchip":return"Lockchips";case"mainBlade":return"Main Blades";case"assistBlade":return"Assist Blades";default:return T}},N=({children:T,sortKey:z})=>a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>U(z),children:a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("span",{children:T}),_.key===z&&(_.direction==="asc"?a.jsx(x_,{size:12}):a.jsx(g_,{size:12}))]})});return i?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading tournaments..."})]})}):u?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-red-500 text-4xl mb-4",children:""}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error"}),a.jsx("p",{className:"text-red-600 mb-4",children:u}),a.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Reload Page"})]})}):a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex items-center space-x-4 mb-2",children:[a.jsx("button",{onClick:t,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors",title:"Go Back",children:a.jsx(Sa,{size:24})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Meta Analysis"})]}),a.jsx("p",{className:"text-gray-600",children:"Analyze Beyblade part usage and performance statistics"})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Tournament Selection"}),a.jsxs("div",{className:"max-w-md",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Tournament"}),a.jsxs("select",{value:n,onChange:T=>r(T.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"-- Select Tournament --"}),e.map(T=>a.jsxs("option",{value:T.id,children:[T.name," (",T.status,")"]},T.id))]})]})]}),n&&a.jsxs(a.Fragment,{children:[l&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mr-3"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-blue-800 font-medium",children:"Processing Tournament Data"}),a.jsx("p",{className:"text-blue-700 text-sm mt-1",children:"Parsing Beyblade names and calculating statistics..."})]})]})}),!l&&v.length===0&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-8",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-yellow-600 mr-3",children:""}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-yellow-800 font-medium",children:"No Match Data Available"}),a.jsxs("p",{className:"text-yellow-700 text-sm mt-1",children:["This tournament has no completed matches yet. Meta analysis requires match results to generate statistics.",((B=e.find(T=>T.id===n))==null?void 0:B.status)==="upcoming"&&" Try selecting a completed tournament instead."]})]})]})}),!l&&v.length>0&&a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[a.jsx(b0,{className:"mr-2",size:24}),"Builds by Part"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Part Type"}),a.jsxs("select",{value:g,onChange:T=>{x(T.target.value),w(""),E([]),R(null),L([])},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select Part Type"}),a.jsx("option",{value:"blade",children:"Blade"}),a.jsx("option",{value:"ratchet",children:"Ratchet"}),a.jsx("option",{value:"bit",children:"Bit"}),a.jsx("option",{value:"lockchip",children:"Lockchip"}),a.jsx("option",{value:"mainBlade",children:"Main Blade"}),a.jsx("option",{value:"assistBlade",children:"Assist Blade"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Part Name"}),a.jsxs("select",{value:y,onChange:T=>w(T.target.value),disabled:!g,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100",children:[a.jsx("option",{value:"",children:"Select Part Name"}),g&&Object.values(p[g]||{}).filter(T=>T.usage>0).sort((T,z)=>z.wilson-T.wilson).map(T=>a.jsx("option",{value:T.name,children:T.name},T.name))]})]})]}),k.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Builds using ",y," (",j(g),")"]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Build"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Wins"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Losses"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Win Rate"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Wilson Score"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map((T,z)=>a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>Z(T.build,T.player),children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600 hover:text-blue-800",children:T.build}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.player}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.wins}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.losses}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[T.winRate.toFixed(1),"%"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.wilson.toFixed(3)})]},z))})]})})]}),P&&S.length>0&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[a.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Matches for ",a.jsx("strong",{children:P.build})," by ",a.jsx("strong",{children:P.player})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-100",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Result"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opponent"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opponent's Bey"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Finish Type"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map((T,z)=>a.jsxs("tr",{className:T.isWin?"bg-green-50":"bg-red-50",children:[a.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-medium ${T.isWin?"text-green-800":"text-red-800"}`,children:T.isWin?"Win":"Loss"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.opponent}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.opponentBeyblade}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.outcome})]},z))})]})})]})]}),!l&&v.length>0&&a.jsx("div",{className:"space-y-8",children:["blade","ratchet","bit","lockchip","mainBlade","assistBlade"].map(T=>a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 capitalize flex items-center",children:[a.jsx(Na,{className:"mr-2",size:24}),j(T)]}),Object.keys(p[T]||{}).length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Na,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsxs("p",{className:"text-gray-500",children:["No ",j(T).toLowerCase()," data available"]}),a.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["No matches used ",j(T).toLowerCase()," from this category"]})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx(N,{sortKey:"name",children:"Name"}),a.jsx(N,{sortKey:"usage",children:"Usage"}),a.jsx(N,{sortKey:"wins",children:"Wins"}),a.jsx(N,{sortKey:"losses",children:"Losses"}),a.jsx(N,{sortKey:"winRate",children:"Win Rate"}),a.jsx(N,{sortKey:"wilson",children:"Wilson Score"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:O(T).map((z,V)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:z.name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z.usage}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z.wins}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z.losses}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[z.winRate.toFixed(1),"%"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z.wilson.toFixed(3)})]},V))})]})})]},T))})]})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ji(t){return t+.5|0}const Ds=(t,e,s)=>Math.max(Math.min(t,s),e);function Zr(t){return Ds(Ji(t*2.55),0,255)}function Ks(t){return Ds(Ji(t*255),0,255)}function ps(t){return Ds(Ji(t/2.55)/100,0,1)}function xf(t){return Ds(Ji(t*100),0,100)}const Et={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},uu=[..."0123456789ABCDEF"],U_=t=>uu[t&15],W_=t=>uu[(t&240)>>4]+uu[t&15],_o=t=>(t&240)>>4===(t&15),H_=t=>_o(t.r)&&_o(t.g)&&_o(t.b)&&_o(t.a);function V_(t){var e=t.length,s;return t[0]==="#"&&(e===4||e===5?s={r:255&Et[t[1]]*17,g:255&Et[t[2]]*17,b:255&Et[t[3]]*17,a:e===5?Et[t[4]]*17:255}:(e===7||e===9)&&(s={r:Et[t[1]]<<4|Et[t[2]],g:Et[t[3]]<<4|Et[t[4]],b:Et[t[5]]<<4|Et[t[6]],a:e===9?Et[t[7]]<<4|Et[t[8]]:255})),s}const q_=(t,e)=>t<255?e(t):"";function K_(t){var e=H_(t)?U_:W_;return t?"#"+e(t.r)+e(t.g)+e(t.b)+q_(t.a,e):void 0}const Y_=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function C0(t,e,s){const n=e*Math.min(s,1-s),r=(i,o=(i+t/30)%12)=>s-n*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function G_(t,e,s){const n=(r,i=(r+t/60)%6)=>s-s*e*Math.max(Math.min(i,4-i,1),0);return[n(5),n(3),n(1)]}function Q_(t,e,s){const n=C0(t,1,.5);let r;for(e+s>1&&(r=1/(e+s),e*=r,s*=r),r=0;r<3;r++)n[r]*=1-e-s,n[r]+=e;return n}function J_(t,e,s,n,r){return t===r?(e-s)/n+(e<s?6:0):e===r?(s-t)/n+2:(t-e)/n+4}function jd(t){const s=t.r/255,n=t.g/255,r=t.b/255,i=Math.max(s,n,r),o=Math.min(s,n,r),l=(i+o)/2;let c,u,d;return i!==o&&(d=i-o,u=l>.5?d/(2-i-o):d/(i+o),c=J_(s,n,r,d,i),c=c*60+.5),[c|0,u||0,l]}function kd(t,e,s,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,s,n)).map(Ks)}function Sd(t,e,s){return kd(C0,t,e,s)}function X_(t,e,s){return kd(Q_,t,e,s)}function Z_(t,e,s){return kd(G_,t,e,s)}function P0(t){return(t%360+360)%360}function e1(t){const e=Y_.exec(t);let s=255,n;if(!e)return;e[5]!==n&&(s=e[6]?Zr(+e[5]):Ks(+e[5]));const r=P0(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?n=X_(r,i,o):e[1]==="hsv"?n=Z_(r,i,o):n=Sd(r,i,o),{r:n[0],g:n[1],b:n[2],a:s}}function t1(t,e){var s=jd(t);s[0]=P0(s[0]+e),s=Sd(s),t.r=s[0],t.g=s[1],t.b=s[2]}function s1(t){if(!t)return;const e=jd(t),s=e[0],n=xf(e[1]),r=xf(e[2]);return t.a<255?`hsla(${s}, ${n}%, ${r}%, ${ps(t.a)})`:`hsl(${s}, ${n}%, ${r}%)`}const yf={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},vf={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function n1(){const t={},e=Object.keys(vf),s=Object.keys(yf);let n,r,i,o,l;for(n=0;n<e.length;n++){for(o=l=e[n],r=0;r<s.length;r++)i=s[r],l=l.replace(i,yf[i]);i=parseInt(vf[o],16),t[l]=[i>>16&255,i>>8&255,i&255]}return t}let jo;function r1(t){jo||(jo=n1(),jo.transparent=[0,0,0,0]);const e=jo[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const i1=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function o1(t){const e=i1.exec(t);let s=255,n,r,i;if(e){if(e[7]!==n){const o=+e[7];s=e[8]?Zr(o):Ds(o*255,0,255)}return n=+e[1],r=+e[3],i=+e[5],n=255&(e[2]?Zr(n):Ds(n,0,255)),r=255&(e[4]?Zr(r):Ds(r,0,255)),i=255&(e[6]?Zr(i):Ds(i,0,255)),{r:n,g:r,b:i,a:s}}}function a1(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${ps(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Kl=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Wn=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function l1(t,e,s){const n=Wn(ps(t.r)),r=Wn(ps(t.g)),i=Wn(ps(t.b));return{r:Ks(Kl(n+s*(Wn(ps(e.r))-n))),g:Ks(Kl(r+s*(Wn(ps(e.g))-r))),b:Ks(Kl(i+s*(Wn(ps(e.b))-i))),a:t.a+s*(e.a-t.a)}}function ko(t,e,s){if(t){let n=jd(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*s,e===0?360:1)),n=Sd(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function E0(t,e){return t&&Object.assign(e||{},t)}function bf(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ks(t[3]))):(e=E0(t,{r:0,g:0,b:0,a:1}),e.a=Ks(e.a)),e}function c1(t){return t.charAt(0)==="r"?o1(t):e1(t)}class zi{constructor(e){if(e instanceof zi)return e;const s=typeof e;let n;s==="object"?n=bf(e):s==="string"&&(n=V_(e)||r1(e)||c1(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=E0(this._rgb);return e&&(e.a=ps(e.a)),e}set rgb(e){this._rgb=bf(e)}rgbString(){return this._valid?a1(this._rgb):void 0}hexString(){return this._valid?K_(this._rgb):void 0}hslString(){return this._valid?s1(this._rgb):void 0}mix(e,s){if(e){const n=this.rgb,r=e.rgb;let i;const o=s===i?.5:s,l=2*o-1,c=n.a-r.a,u=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-u,n.r=255&u*n.r+i*r.r+.5,n.g=255&u*n.g+i*r.g+.5,n.b=255&u*n.b+i*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(e,s){return e&&(this._rgb=l1(this._rgb,e._rgb,s)),this}clone(){return new zi(this.rgb)}alpha(e){return this._rgb.a=Ks(e),this}clearer(e){const s=this._rgb;return s.a*=1-e,this}greyscale(){const e=this._rgb,s=Ji(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=s,this}opaquer(e){const s=this._rgb;return s.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return ko(this._rgb,2,e),this}darken(e){return ko(this._rgb,2,-e),this}saturate(e){return ko(this._rgb,1,e),this}desaturate(e){return ko(this._rgb,1,-e),this}rotate(e){return t1(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function os(){}const u1=(()=>{let t=0;return()=>t++})();function _e(t){return t==null}function Ee(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function he(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Xe(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Qt(t,e){return Xe(t)?t:e}function de(t,e){return typeof t>"u"?e:t}const d1=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ye(t,e,s){if(t&&typeof t.call=="function")return t.apply(s,e)}function pe(t,e,s,n){let r,i,o;if(Ee(t))for(i=t.length,r=0;r<i;r++)e.call(s,t[r],r);else if(he(t))for(o=Object.keys(t),i=o.length,r=0;r<i;r++)e.call(s,t[o[r]],o[r])}function Pa(t,e){let s,n,r,i;if(!t||!e||t.length!==e.length)return!1;for(s=0,n=t.length;s<n;++s)if(r=t[s],i=e[s],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Ea(t){if(Ee(t))return t.map(Ea);if(he(t)){const e=Object.create(null),s=Object.keys(t),n=s.length;let r=0;for(;r<n;++r)e[s[r]]=Ea(t[s[r]]);return e}return t}function T0(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function h1(t,e,s,n){if(!T0(t))return;const r=e[t],i=s[t];he(r)&&he(i)?$i(r,i,n):e[t]=Ea(i)}function $i(t,e,s){const n=Ee(e)?e:[e],r=n.length;if(!he(t))return t;s=s||{};const i=s.merger||h1;let o;for(let l=0;l<r;++l){if(o=n[l],!he(o))continue;const c=Object.keys(o);for(let u=0,d=c.length;u<d;++u)i(c[u],t,o,s)}return t}function mi(t,e){return $i(t,e,{merger:f1})}function f1(t,e,s){if(!T0(t))return;const n=e[t],r=s[t];he(n)&&he(r)?mi(n,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Ea(r))}const wf={"":t=>t,x:t=>t.x,y:t=>t.y};function p1(t){const e=t.split("."),s=[];let n="";for(const r of e)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}function m1(t){const e=p1(t);return s=>{for(const n of e){if(n==="")break;s=s&&s[n]}return s}}function Fi(t,e){return(wf[e]||(wf[e]=m1(e)))(t)}function Nd(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Ta=t=>typeof t<"u",Js=t=>typeof t=="function",_f=(t,e)=>{if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0};function g1(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const $e=Math.PI,wt=2*$e,x1=wt+$e,Aa=Number.POSITIVE_INFINITY,y1=$e/180,vt=$e/2,un=$e/4,jf=$e*2/3,du=Math.log10,_r=Math.sign;function gi(t,e,s){return Math.abs(t-e)<s}function kf(t){const e=Math.round(t);t=gi(t,e,t/1e3)?e:t;const s=Math.pow(10,Math.floor(du(t))),n=t/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function v1(t){const e=[],s=Math.sqrt(t);let n;for(n=1;n<s;n++)t%n===0&&(e.push(n),e.push(t/n));return s===(s|0)&&e.push(s),e.sort((r,i)=>r-i).pop(),e}function b1(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Oa(t){return!b1(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function w1(t,e){const s=Math.round(t);return s-e<=t&&s+e>=t}function _1(t,e,s){let n,r,i;for(n=0,r=t.length;n<r;n++)i=t[n][s],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function _n(t){return t*($e/180)}function Cd(t){return t*(180/$e)}function Sf(t){if(!Xe(t))return;let e=1,s=0;for(;Math.round(t*e)/e!==t;)e*=10,s++;return s}function j1(t,e){const s=e.x-t.x,n=e.y-t.y,r=Math.sqrt(s*s+n*n);let i=Math.atan2(n,s);return i<-.5*$e&&(i+=wt),{angle:i,distance:r}}function hu(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function k1(t,e){return(t-e+x1)%wt-$e}function xt(t){return(t%wt+wt)%wt}function A0(t,e,s,n){const r=xt(t),i=xt(e),o=xt(s),l=xt(i-r),c=xt(o-r),u=xt(r-i),d=xt(r-o);return r===i||r===o||n&&i===o||l>c&&u<d}function xs(t,e,s){return Math.max(e,Math.min(s,t))}function S1(t){return xs(t,-32768,32767)}function rr(t,e,s,n=1e-6){return t>=Math.min(e,s)-n&&t<=Math.max(e,s)+n}function Pd(t,e,s){s=s||(o=>t[o]<e);let n=t.length-1,r=0,i;for(;n-r>1;)i=r+n>>1,s(i)?r=i:n=i;return{lo:r,hi:n}}const fu=(t,e,s,n)=>Pd(t,s,n?r=>{const i=t[r][e];return i<s||i===s&&t[r+1][e]===s}:r=>t[r][e]<s),N1=(t,e,s)=>Pd(t,s,n=>t[n][e]>=s);function C1(t,e,s){let n=0,r=t.length;for(;n<r&&t[n]<e;)n++;for(;r>n&&t[r-1]>s;)r--;return n>0||r<t.length?t.slice(n,r):t}const O0=["push","pop","shift","splice","unshift"];function P1(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),O0.forEach(s=>{const n="_onData"+Nd(s),r=t[s];Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return t._chartjs.listeners.forEach(l=>{typeof l[n]=="function"&&l[n](...i)}),o}})})}function Nf(t,e){const s=t._chartjs;if(!s)return;const n=s.listeners,r=n.indexOf(e);r!==-1&&n.splice(r,1),!(n.length>0)&&(O0.forEach(i=>{delete t[i]}),delete t._chartjs)}function E1(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const R0=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function M0(t,e){let s=[],n=!1;return function(...r){s=r,n||(n=!0,R0.call(window,()=>{n=!1,t.apply(e,s)}))}}function T1(t,e){let s;return function(...n){return e?(clearTimeout(s),s=setTimeout(t,e,n)):t.apply(this,n),e}}const L0=t=>t==="start"?"left":t==="end"?"right":"center",mt=(t,e,s)=>t==="start"?e:t==="end"?s:(e+s)/2,A1=(t,e,s,n)=>t===(n?"left":"right")?s:t==="center"?(e+s)/2:e,So=t=>t===0||t===1,Cf=(t,e,s)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*wt/s)),Pf=(t,e,s)=>Math.pow(2,-10*t)*Math.sin((t-e)*wt/s)+1,xi={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*vt)+1,easeOutSine:t=>Math.sin(t*vt),easeInOutSine:t=>-.5*(Math.cos($e*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>So(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>So(t)?t:Cf(t,.075,.3),easeOutElastic:t=>So(t)?t:Pf(t,.075,.3),easeInOutElastic(t){return So(t)?t:t<.5?.5*Cf(t*2,.1125,.45):.5+.5*Pf(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-xi.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?xi.easeInBounce(t*2)*.5:xi.easeOutBounce(t*2-1)*.5+.5};function Ed(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Ef(t){return Ed(t)?t:new zi(t)}function Yl(t){return Ed(t)?t:new zi(t).saturate(.5).darken(.1).hexString()}const O1=["x","y","borderWidth","radius","tension"],R1=["color","borderColor","backgroundColor"];function M1(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:R1},numbers:{type:"number",properties:O1}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function L1(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Tf=new Map;function D1(t,e){e=e||{};const s=t+JSON.stringify(e);let n=Tf.get(s);return n||(n=new Intl.NumberFormat(t,e),Tf.set(s,n)),n}function D0(t,e,s){return D1(e,s).format(t)}const I0={values(t){return Ee(t)?t:""+t},numeric(t,e,s){if(t===0)return"0";const n=this.chart.options.locale;let r,i=t;if(s.length>1){const u=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(u<1e-4||u>1e15)&&(r="scientific"),i=I1(t,s)}const o=du(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),D0(t,n,c)},logarithmic(t,e,s){if(t===0)return"0";const n=s[e].significand||t/Math.pow(10,Math.floor(du(t)));return[1,2,3,5,10,15].includes(n)||e>.8*s.length?I0.numeric.call(this,t,e,s):""}};function I1(t,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&t!==Math.floor(t)&&(s=t-Math.floor(t)),s}var B0={formatters:I0};function B1(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:B0.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const On=Object.create(null),pu=Object.create(null);function yi(t,e){if(!e)return t;const s=e.split(".");for(let n=0,r=s.length;n<r;++n){const i=s[n];t=t[i]||(t[i]=Object.create(null))}return t}function Gl(t,e,s){return typeof e=="string"?$i(yi(t,e),s):$i(yi(t,""),e)}class z1{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,r)=>Yl(r.backgroundColor),this.hoverBorderColor=(n,r)=>Yl(r.borderColor),this.hoverColor=(n,r)=>Yl(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return Gl(this,e,s)}get(e){return yi(this,e)}describe(e,s){return Gl(pu,e,s)}override(e,s){return Gl(On,e,s)}route(e,s,n,r){const i=yi(this,e),o=yi(this,n),l="_"+s;Object.defineProperties(i,{[l]:{value:i[s],writable:!0},[s]:{enumerable:!0,get(){const c=this[l],u=o[r];return he(c)?Object.assign({},u,c):de(c,u)},set(c){this[l]=c}}})}apply(e){e.forEach(s=>s(this))}}var Te=new z1({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[M1,L1,B1]);function $1(t){return!t||_e(t.size)||_e(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Ra(t,e,s,n,r){let i=e[r];return i||(i=e[r]=t.measureText(r).width,s.push(r)),i>n&&(n=i),n}function F1(t,e,s,n){n=n||{};let r=n.data=n.data||{},i=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(r=n.data={},i=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let o=0;const l=s.length;let c,u,d,h,f;for(c=0;c<l;c++)if(h=s[c],h!=null&&!Ee(h))o=Ra(t,r,i,o,h);else if(Ee(h))for(u=0,d=h.length;u<d;u++)f=h[u],f!=null&&!Ee(f)&&(o=Ra(t,r,i,o,f));t.restore();const p=i.length/2;if(p>s.length){for(c=0;c<p;c++)delete r[i[c]];i.splice(0,p)}return o}function dn(t,e,s){const n=t.currentDevicePixelRatio,r=s!==0?Math.max(s/2,.5):0;return Math.round((e-r)*n)/n+r}function Af(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function mu(t,e,s,n){z0(t,e,s,n,null)}function z0(t,e,s,n,r){let i,o,l,c,u,d,h,f;const p=e.pointStyle,m=e.rotation,v=e.radius;let b=(m||0)*y1;if(p&&typeof p=="object"&&(i=p.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(s,n),t.rotate(b),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),p){default:r?t.ellipse(s,n,r/2,v,0,0,wt):t.arc(s,n,v,0,wt),t.closePath();break;case"triangle":d=r?r/2:v,t.moveTo(s+Math.sin(b)*d,n-Math.cos(b)*v),b+=jf,t.lineTo(s+Math.sin(b)*d,n-Math.cos(b)*v),b+=jf,t.lineTo(s+Math.sin(b)*d,n-Math.cos(b)*v),t.closePath();break;case"rectRounded":u=v*.516,c=v-u,o=Math.cos(b+un)*c,h=Math.cos(b+un)*(r?r/2-u:c),l=Math.sin(b+un)*c,f=Math.sin(b+un)*(r?r/2-u:c),t.arc(s-h,n-l,u,b-$e,b-vt),t.arc(s+f,n-o,u,b-vt,b),t.arc(s+h,n+l,u,b,b+vt),t.arc(s-f,n+o,u,b+vt,b+$e),t.closePath();break;case"rect":if(!m){c=Math.SQRT1_2*v,d=r?r/2:c,t.rect(s-d,n-c,2*d,2*c);break}b+=un;case"rectRot":h=Math.cos(b)*(r?r/2:v),o=Math.cos(b)*v,l=Math.sin(b)*v,f=Math.sin(b)*(r?r/2:v),t.moveTo(s-h,n-l),t.lineTo(s+f,n-o),t.lineTo(s+h,n+l),t.lineTo(s-f,n+o),t.closePath();break;case"crossRot":b+=un;case"cross":h=Math.cos(b)*(r?r/2:v),o=Math.cos(b)*v,l=Math.sin(b)*v,f=Math.sin(b)*(r?r/2:v),t.moveTo(s-h,n-l),t.lineTo(s+h,n+l),t.moveTo(s+f,n-o),t.lineTo(s-f,n+o);break;case"star":h=Math.cos(b)*(r?r/2:v),o=Math.cos(b)*v,l=Math.sin(b)*v,f=Math.sin(b)*(r?r/2:v),t.moveTo(s-h,n-l),t.lineTo(s+h,n+l),t.moveTo(s+f,n-o),t.lineTo(s-f,n+o),b+=un,h=Math.cos(b)*(r?r/2:v),o=Math.cos(b)*v,l=Math.sin(b)*v,f=Math.sin(b)*(r?r/2:v),t.moveTo(s-h,n-l),t.lineTo(s+h,n+l),t.moveTo(s+f,n-o),t.lineTo(s-f,n+o);break;case"line":o=r?r/2:Math.cos(b)*v,l=Math.sin(b)*v,t.moveTo(s-o,n-l),t.lineTo(s+o,n+l);break;case"dash":t.moveTo(s,n),t.lineTo(s+Math.cos(b)*(r?r/2:v),n+Math.sin(b)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function ys(t,e,s){return s=s||.5,!e||t&&t.x>e.left-s&&t.x<e.right+s&&t.y>e.top-s&&t.y<e.bottom+s}function al(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ll(t){t.restore()}function U1(t,e,s,n,r){if(!e)return t.lineTo(s.x,s.y);if(r==="middle"){const i=(e.x+s.x)/2;t.lineTo(i,e.y),t.lineTo(i,s.y)}else r==="after"!=!!n?t.lineTo(e.x,s.y):t.lineTo(s.x,e.y);t.lineTo(s.x,s.y)}function W1(t,e,s,n){if(!e)return t.lineTo(s.x,s.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?s.cp2x:s.cp1x,n?s.cp2y:s.cp1y,s.x,s.y)}function H1(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),_e(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function V1(t,e,s,n,r){if(r.strikethrough||r.underline){const i=t.measureText(n),o=e-i.actualBoundingBoxLeft,l=e+i.actualBoundingBoxRight,c=s-i.actualBoundingBoxAscent,u=s+i.actualBoundingBoxDescent,d=r.strikethrough?(c+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,d),t.lineTo(l,d),t.stroke()}}function q1(t,e){const s=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=s}function jr(t,e,s,n,r,i={}){const o=Ee(e)?e:[e],l=i.strokeWidth>0&&i.strokeColor!=="";let c,u;for(t.save(),t.font=r.string,H1(t,i),c=0;c<o.length;++c)u=o[c],i.backdrop&&q1(t,i.backdrop),l&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),_e(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(u,s,n,i.maxWidth)),t.fillText(u,s,n,i.maxWidth),V1(t,s,n,u,i),n+=Number(r.lineHeight);t.restore()}function Ma(t,e){const{x:s,y:n,w:r,h:i,radius:o}=e;t.arc(s+o.topLeft,n+o.topLeft,o.topLeft,1.5*$e,$e,!0),t.lineTo(s,n+i-o.bottomLeft),t.arc(s+o.bottomLeft,n+i-o.bottomLeft,o.bottomLeft,$e,vt,!0),t.lineTo(s+r-o.bottomRight,n+i),t.arc(s+r-o.bottomRight,n+i-o.bottomRight,o.bottomRight,vt,0,!0),t.lineTo(s+r,n+o.topRight),t.arc(s+r-o.topRight,n+o.topRight,o.topRight,0,-vt,!0),t.lineTo(s+o.topLeft,n)}const K1=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Y1=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function G1(t,e){const s=(""+t).match(K1);if(!s||s[1]==="normal")return e*1.2;switch(t=+s[2],s[3]){case"px":return t;case"%":t/=100;break}return e*t}const Q1=t=>+t||0;function $0(t,e){const s={},n=he(e),r=n?Object.keys(e):e,i=he(t)?n?o=>de(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)s[o]=Q1(i(o));return s}function J1(t){return $0(t,{top:"y",right:"x",bottom:"y",left:"x"})}function dr(t){return $0(t,["topLeft","topRight","bottomLeft","bottomRight"])}function nt(t){const e=J1(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function We(t,e){t=t||{},e=e||Te.font;let s=de(t.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let n=de(t.style,e.style);n&&!(""+n).match(Y1)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const r={family:de(t.family,e.family),lineHeight:G1(de(t.lineHeight,e.lineHeight),s),size:s,style:n,weight:de(t.weight,e.weight),string:""};return r.string=$1(r),r}function No(t,e,s,n){let r,i,o;for(r=0,i=t.length;r<i;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function X1(t,e,s){const{min:n,max:r}=t,i=d1(e,(r-n)/2),o=(l,c)=>s&&l===0?0:l+c;return{min:o(n,-Math.abs(i)),max:o(r,i)}}function rn(t,e){return Object.assign(Object.create(t),e)}function Td(t,e=[""],s,n,r=()=>t[0]){const i=s||t;typeof n>"u"&&(n=H0("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:r,override:l=>Td([l,...t],e,i,n)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete t[0][c],!0},get(l,c){return U0(l,c,()=>oj(c,e,t,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,c){return Rf(l).includes(c)},ownKeys(l){return Rf(l)},set(l,c,u){const d=l._storage||(l._storage=r());return l[c]=d[c]=u,delete l._keys,!0}})}function kr(t,e,s,n){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:s,_stack:new Set,_descriptors:F0(t,n),setContext:i=>kr(t,i,s,n),override:i=>kr(t.override(i),e,s,n)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,l){return U0(i,o,()=>ej(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,l){return t[o]=l,delete i[o],!0}})}function F0(t,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:n=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:s,indexable:n,isScriptable:Js(s)?s:()=>s,isIndexable:Js(n)?n:()=>n}}const Z1=(t,e)=>t?t+Nd(e):e,Ad=(t,e)=>he(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function U0(t,e,s){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=s();return t[e]=n,n}function ej(t,e,s){const{_proxy:n,_context:r,_subProxy:i,_descriptors:o}=t;let l=n[e];return Js(l)&&o.isScriptable(e)&&(l=tj(e,l,t,s)),Ee(l)&&l.length&&(l=sj(e,l,t,o.isIndexable)),Ad(e,l)&&(l=kr(l,r,i&&i[e],o)),l}function tj(t,e,s,n){const{_proxy:r,_context:i,_subProxy:o,_stack:l}=s;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let c=e(i,o||n);return l.delete(t),Ad(t,c)&&(c=Od(r._scopes,r,t,c)),c}function sj(t,e,s,n){const{_proxy:r,_context:i,_subProxy:o,_descriptors:l}=s;if(typeof i.index<"u"&&n(t))return e[i.index%e.length];if(he(e[0])){const c=e,u=r._scopes.filter(d=>d!==c);e=[];for(const d of c){const h=Od(u,r,t,d);e.push(kr(h,i,o&&o[t],l))}}return e}function W0(t,e,s){return Js(t)?t(e,s):t}const nj=(t,e)=>t===!0?e:typeof t=="string"?Fi(e,t):void 0;function rj(t,e,s,n,r){for(const i of e){const o=nj(s,i);if(o){t.add(o);const l=W0(o._fallback,s,r);if(typeof l<"u"&&l!==s&&l!==n)return l}else if(o===!1&&typeof n<"u"&&s!==n)return null}return!1}function Od(t,e,s,n){const r=e._rootScopes,i=W0(e._fallback,s,n),o=[...t,...r],l=new Set;l.add(n);let c=Of(l,o,s,i||s,n);return c===null||typeof i<"u"&&i!==s&&(c=Of(l,o,i,c,n),c===null)?!1:Td(Array.from(l),[""],r,i,()=>ij(e,s,n))}function Of(t,e,s,n,r){for(;s;)s=rj(t,e,s,n,r);return s}function ij(t,e,s){const n=t._getTarget();e in n||(n[e]={});const r=n[e];return Ee(r)&&he(s)?s:r||{}}function oj(t,e,s,n){let r;for(const i of e)if(r=H0(Z1(i,t),s),typeof r<"u")return Ad(t,r)?Od(s,n,t,r):r}function H0(t,e){for(const s of e){if(!s)continue;const n=s[t];if(typeof n<"u")return n}}function Rf(t){let e=t._keys;return e||(e=t._keys=aj(t._scopes)),e}function aj(t){const e=new Set;for(const s of t)for(const n of Object.keys(s).filter(r=>!r.startsWith("_")))e.add(n);return Array.from(e)}function lj(t,e,s,n){const{iScale:r}=t,{key:i="r"}=this._parsing,o=new Array(n);let l,c,u,d;for(l=0,c=n;l<c;++l)u=l+s,d=e[u],o[l]={r:r.parse(Fi(d,i),u)};return o}const cj=Number.EPSILON||1e-14,Sr=(t,e)=>e<t.length&&!t[e].skip&&t[e],V0=t=>t==="x"?"y":"x";function uj(t,e,s,n){const r=t.skip?e:t,i=e,o=s.skip?e:s,l=hu(i,r),c=hu(o,i);let u=l/(l+c),d=c/(l+c);u=isNaN(u)?0:u,d=isNaN(d)?0:d;const h=n*u,f=n*d;return{previous:{x:i.x-h*(o.x-r.x),y:i.y-h*(o.y-r.y)},next:{x:i.x+f*(o.x-r.x),y:i.y+f*(o.y-r.y)}}}function dj(t,e,s){const n=t.length;let r,i,o,l,c,u=Sr(t,0);for(let d=0;d<n-1;++d)if(c=u,u=Sr(t,d+1),!(!c||!u)){if(gi(e[d],0,cj)){s[d]=s[d+1]=0;continue}r=s[d]/e[d],i=s[d+1]/e[d],l=Math.pow(r,2)+Math.pow(i,2),!(l<=9)&&(o=3/Math.sqrt(l),s[d]=r*o*e[d],s[d+1]=i*o*e[d])}}function hj(t,e,s="x"){const n=V0(s),r=t.length;let i,o,l,c=Sr(t,0);for(let u=0;u<r;++u){if(o=l,l=c,c=Sr(t,u+1),!l)continue;const d=l[s],h=l[n];o&&(i=(d-o[s])/3,l[`cp1${s}`]=d-i,l[`cp1${n}`]=h-i*e[u]),c&&(i=(c[s]-d)/3,l[`cp2${s}`]=d+i,l[`cp2${n}`]=h+i*e[u])}}function fj(t,e="x"){const s=V0(e),n=t.length,r=Array(n).fill(0),i=Array(n);let o,l,c,u=Sr(t,0);for(o=0;o<n;++o)if(l=c,c=u,u=Sr(t,o+1),!!c){if(u){const d=u[e]-c[e];r[o]=d!==0?(u[s]-c[s])/d:0}i[o]=l?u?_r(r[o-1])!==_r(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}dj(t,r,i),hj(t,i,e)}function Co(t,e,s){return Math.max(Math.min(t,s),e)}function pj(t,e){let s,n,r,i,o,l=ys(t[0],e);for(s=0,n=t.length;s<n;++s)o=i,i=l,l=s<n-1&&ys(t[s+1],e),i&&(r=t[s],o&&(r.cp1x=Co(r.cp1x,e.left,e.right),r.cp1y=Co(r.cp1y,e.top,e.bottom)),l&&(r.cp2x=Co(r.cp2x,e.left,e.right),r.cp2y=Co(r.cp2y,e.top,e.bottom)))}function mj(t,e,s,n,r){let i,o,l,c;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")fj(t,r);else{let u=n?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)l=t[i],c=uj(u,l,t[Math.min(i+1,o-(n?0:1))%o],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,u=l}e.capBezierPoints&&pj(t,s)}function Rd(){return typeof window<"u"&&typeof document<"u"}function Md(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function La(t,e,s){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[s])):n=t,n}const cl=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function gj(t,e){return cl(t).getPropertyValue(e)}const xj=["top","right","bottom","left"];function Sn(t,e,s){const n={};s=s?"-"+s:"";for(let r=0;r<4;r++){const i=xj[r];n[i]=parseFloat(t[e+"-"+i+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const yj=(t,e,s)=>(t>0||e>0)&&(!s||!s.shadowRoot);function vj(t,e){const s=t.touches,n=s&&s.length?s[0]:t,{offsetX:r,offsetY:i}=n;let o=!1,l,c;if(yj(r,i,t.target))l=r,c=i;else{const u=e.getBoundingClientRect();l=n.clientX-u.left,c=n.clientY-u.top,o=!0}return{x:l,y:c,box:o}}function gn(t,e){if("native"in t)return t;const{canvas:s,currentDevicePixelRatio:n}=e,r=cl(s),i=r.boxSizing==="border-box",o=Sn(r,"padding"),l=Sn(r,"border","width"),{x:c,y:u,box:d}=vj(t,s),h=o.left+(d&&l.left),f=o.top+(d&&l.top);let{width:p,height:m}=e;return i&&(p-=o.width+l.width,m-=o.height+l.height),{x:Math.round((c-h)/p*s.width/n),y:Math.round((u-f)/m*s.height/n)}}function bj(t,e,s){let n,r;if(e===void 0||s===void 0){const i=t&&Md(t);if(!i)e=t.clientWidth,s=t.clientHeight;else{const o=i.getBoundingClientRect(),l=cl(i),c=Sn(l,"border","width"),u=Sn(l,"padding");e=o.width-u.width-c.width,s=o.height-u.height-c.height,n=La(l.maxWidth,i,"clientWidth"),r=La(l.maxHeight,i,"clientHeight")}}return{width:e,height:s,maxWidth:n||Aa,maxHeight:r||Aa}}const Po=t=>Math.round(t*10)/10;function wj(t,e,s,n){const r=cl(t),i=Sn(r,"margin"),o=La(r.maxWidth,t,"clientWidth")||Aa,l=La(r.maxHeight,t,"clientHeight")||Aa,c=bj(t,e,s);let{width:u,height:d}=c;if(r.boxSizing==="content-box"){const f=Sn(r,"border","width"),p=Sn(r,"padding");u-=p.width+f.width,d-=p.height+f.height}return u=Math.max(0,u-i.width),d=Math.max(0,n?u/n:d-i.height),u=Po(Math.min(u,o,c.maxWidth)),d=Po(Math.min(d,l,c.maxHeight)),u&&!d&&(d=Po(u/2)),(e!==void 0||s!==void 0)&&n&&c.height&&d>c.height&&(d=c.height,u=Po(Math.floor(d*n))),{width:u,height:d}}function Mf(t,e,s){const n=e||1,r=Math.floor(t.height*n),i=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(s||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||o.height!==r||o.width!==i?(t.currentDevicePixelRatio=n,o.height=r,o.width=i,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const _j=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Rd()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Lf(t,e){const s=gj(t,e),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function xn(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:t.y+s*(e.y-t.y)}}function jj(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:n==="middle"?s<.5?t.y:e.y:n==="after"?s<1?t.y:e.y:s>0?e.y:t.y}}function kj(t,e,s,n){const r={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=xn(t,r,s),l=xn(r,i,s),c=xn(i,e,s),u=xn(o,l,s),d=xn(l,c,s);return xn(u,d,s)}const Sj=function(t,e){return{x(s){return t+t+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,n){return s-n},leftForLtr(s,n){return s-n}}},Nj=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function hr(t,e,s){return t?Sj(e,s):Nj()}function q0(t,e){let s,n;(e==="ltr"||e==="rtl")&&(s=t.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),t.prevTextDirection=n)}function K0(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Y0(t){return t==="angle"?{between:A0,compare:k1,normalize:xt}:{between:rr,compare:(e,s)=>e-s,normalize:e=>e}}function Df({start:t,end:e,count:s,loop:n,style:r}){return{start:t%s,end:e%s,loop:n&&(e-t+1)%s===0,style:r}}function Cj(t,e,s){const{property:n,start:r,end:i}=s,{between:o,normalize:l}=Y0(n),c=e.length;let{start:u,end:d,loop:h}=t,f,p;if(h){for(u+=c,d+=c,f=0,p=c;f<p&&o(l(e[u%c][n]),r,i);++f)u--,d--;u%=c,d%=c}return d<u&&(d+=c),{start:u,end:d,loop:h,style:t.style}}function G0(t,e,s){if(!s)return[t];const{property:n,start:r,end:i}=s,o=e.length,{compare:l,between:c,normalize:u}=Y0(n),{start:d,end:h,loop:f,style:p}=Cj(t,e,s),m=[];let v=!1,b=null,g,x,y;const w=()=>c(r,y,g)&&l(r,y)!==0,k=()=>l(i,g)===0||c(i,y,g),E=()=>v||w(),P=()=>!v||k();for(let R=d,S=d;R<=h;++R)x=e[R%o],!x.skip&&(g=u(x[n]),g!==y&&(v=c(g,r,i),b===null&&E()&&(b=l(g,r)===0?R:S),b!==null&&P()&&(m.push(Df({start:b,end:R,loop:f,count:o,style:p})),b=null),S=R,y=g));return b!==null&&m.push(Df({start:b,end:h,loop:f,count:o,style:p})),m}function Q0(t,e){const s=[],n=t.segments;for(let r=0;r<n.length;r++){const i=G0(n[r],t.points,e);i.length&&s.push(...i)}return s}function Pj(t,e,s,n){let r=0,i=e-1;if(s&&!n)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,s&&(i+=r);i>r&&t[i%e].skip;)i--;return i%=e,{start:r,end:i}}function Ej(t,e,s,n){const r=t.length,i=[];let o=e,l=t[e],c;for(c=e+1;c<=s;++c){const u=t[c%r];u.skip||u.stop?l.skip||(n=!1,i.push({start:e%r,end:(c-1)%r,loop:n}),e=o=u.stop?c:null):(o=c,l.skip&&(e=c)),l=u}return o!==null&&i.push({start:e%r,end:o%r,loop:n}),i}function Tj(t,e){const s=t.points,n=t.options.spanGaps,r=s.length;if(!r)return[];const i=!!t._loop,{start:o,end:l}=Pj(s,r,i,n);if(n===!0)return If(t,[{start:o,end:l,loop:i}],s,e);const c=l<o?l+r:l,u=!!t._fullLoop&&o===0&&l===r-1;return If(t,Ej(s,o,c,u),s,e)}function If(t,e,s,n){return!n||!n.setContext||!s?e:Aj(t,e,s,n)}function Aj(t,e,s,n){const r=t._chart.getContext(),i=Bf(t.options),{_datasetIndex:o,options:{spanGaps:l}}=t,c=s.length,u=[];let d=i,h=e[0].start,f=h;function p(m,v,b,g){const x=l?-1:1;if(m!==v){for(m+=c;s[m%c].skip;)m-=x;for(;s[v%c].skip;)v+=x;m%c!==v%c&&(u.push({start:m%c,end:v%c,loop:b,style:g}),d=g,h=v%c)}}for(const m of e){h=l?h:m.start;let v=s[h%c],b;for(f=h+1;f<=m.end;f++){const g=s[f%c];b=Bf(n.setContext(rn(r,{type:"segment",p0:v,p1:g,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:o}))),Oj(b,d)&&p(h,f-1,m.loop,d),v=g,d=b}h<f-1&&p(h,f-1,m.loop,d)}return u}function Bf(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Oj(t,e){if(!e)return!1;const s=[],n=function(r,i){return Ed(i)?(s.includes(i)||s.push(i),s.indexOf(i)):i};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function Eo(t,e,s){return t.options.clip?t[s]:e[s]}function Rj(t,e){const{xScale:s,yScale:n}=t;return s&&n?{left:Eo(s,e,"left"),right:Eo(s,e,"right"),top:Eo(n,e,"top"),bottom:Eo(n,e,"bottom")}:e}function J0(t,e){const s=e._clip;if(s.disabled)return!1;const n=Rj(e,t.chartArea);return{left:s.left===!1?0:n.left-(s.left===!0?0:s.left),right:s.right===!1?t.width:n.right+(s.right===!0?0:s.right),top:s.top===!1?0:n.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?t.height:n.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Mj{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,n,r){const i=s.listeners[r],o=s.duration;i.forEach(l=>l({chart:e,initial:s.initial,numSteps:o,currentStep:Math.min(n-s.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=R0.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>n.duration&&(n.duration=c._total),c.tick(e),l=!0):(i[o]=i[i.length-1],i.pop());l&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),s+=i.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let n=s.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,n)),n}listen(e,s,n){this._getAnims(e).listeners[s].push(n)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const n=s.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ls=new Mj;const zf="transparent",Lj={boolean(t,e,s){return s>.5?e:t},color(t,e,s){const n=Ef(t||zf),r=n.valid&&Ef(e||zf);return r&&r.valid?r.mix(n,s).hexString():e},number(t,e,s){return t+(e-t)*s}};class Dj{constructor(e,s,n,r){const i=s[n];r=No([e.to,r,i,e.from]);const o=No([e.from,i,r]);this._active=!0,this._fn=e.fn||Lj[e.type||typeof o],this._easing=xi[e.easing]||xi.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,s,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,o=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=No([e.to,s,r,e.from]),this._from=No([e.from,r,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,n=this._duration,r=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||s<n),!this._active){this._target[r]=l,this._notify(!0);return}if(s<0){this._target[r]=i;return}c=s/n%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(i,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,n)=>{e.push({res:s,rej:n})})}_notify(e){const s=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][s]()}}class X0{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!he(e))return;const s=Object.keys(Te.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!he(i))return;const o={};for(const l of s)o[l]=i[l];(Ee(i.properties)&&i.properties||[r]).forEach(l=>{(l===r||!n.has(l))&&n.set(l,o)})})}_animateOptions(e,s){const n=s.options,r=Bj(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&Ij(e.options.$animations,n).then(()=>{e.options=n},()=>{}),i}_createAnimations(e,s){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),o=Object.keys(s),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const u=o[c];if(u.charAt(0)==="$")continue;if(u==="options"){r.push(...this._animateOptions(e,s));continue}const d=s[u];let h=i[u];const f=n.get(u);if(h)if(f&&h.active()){h.update(f,d,l);continue}else h.cancel();if(!f||!f.duration){e[u]=d;continue}i[u]=h=new Dj(f,e,u,d),r.push(h)}return r}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const n=this._createAnimations(e,s);if(n.length)return ls.add(this._chart,n),!0}}function Ij(t,e){const s=[],n=Object.keys(e);for(let r=0;r<n.length;r++){const i=t[n[r]];i&&i.active()&&s.push(i.wait())}return Promise.all(s)}function Bj(t,e){if(!e)return;let s=t.options;if(!s){t.options=e;return}return s.$shared&&(t.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function $f(t,e){const s=t&&t.options||{},n=s.reverse,r=s.min===void 0?e:0,i=s.max===void 0?e:0;return{start:n?i:r,end:n?r:i}}function zj(t,e,s){if(s===!1)return!1;const n=$f(t,s),r=$f(e,s);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}function $j(t){let e,s,n,r;return he(t)?(e=t.top,s=t.right,n=t.bottom,r=t.left):e=s=n=r=t,{top:e,right:s,bottom:n,left:r,disabled:t===!1}}function Z0(t,e){const s=[],n=t._getSortedDatasetMetas(e);let r,i;for(r=0,i=n.length;r<i;++r)s.push(n[r].index);return s}function Ff(t,e,s,n={}){const r=t.keys,i=n.mode==="single";let o,l,c,u;if(e===null)return;let d=!1;for(o=0,l=r.length;o<l;++o){if(c=+r[o],c===s){if(d=!0,n.all)continue;break}u=t.values[c],Xe(u)&&(i||e===0||_r(e)===_r(u))&&(e+=u)}return!d&&!n.all?0:e}function Fj(t,e){const{iScale:s,vScale:n}=e,r=s.axis==="x"?"x":"y",i=n.axis==="x"?"x":"y",o=Object.keys(t),l=new Array(o.length);let c,u,d;for(c=0,u=o.length;c<u;++c)d=o[c],l[c]={[r]:d,[i]:t[d]};return l}function Ql(t,e){const s=t&&t.options.stacked;return s||s===void 0&&e.stack!==void 0}function Uj(t,e,s){return`${t.id}.${e.id}.${s.stack||s.type}`}function Wj(t){const{min:e,max:s,minDefined:n,maxDefined:r}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:r?s:Number.POSITIVE_INFINITY}}function Hj(t,e,s){const n=t[e]||(t[e]={});return n[s]||(n[s]={})}function Uf(t,e,s,n){for(const r of e.getMatchingVisibleMetas(n).reverse()){const i=t[r.index];if(s&&i>0||!s&&i<0)return r.index}return null}function Wf(t,e){const{chart:s,_cachedMeta:n}=t,r=s._stacks||(s._stacks={}),{iScale:i,vScale:o,index:l}=n,c=i.axis,u=o.axis,d=Uj(i,o,n),h=e.length;let f;for(let p=0;p<h;++p){const m=e[p],{[c]:v,[u]:b}=m,g=m._stacks||(m._stacks={});f=g[u]=Hj(r,d,v),f[l]=b,f._top=Uf(f,o,!0,n.type),f._bottom=Uf(f,o,!1,n.type);const x=f._visualValues||(f._visualValues={});x[l]=b}}function Jl(t,e){const s=t.scales;return Object.keys(s).filter(n=>s[n].axis===e).shift()}function Vj(t,e){return rn(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function qj(t,e,s){return rn(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function Wr(t,e){const s=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const r of e){const i=r._stacks;if(!i||i[n]===void 0||i[n][s]===void 0)return;delete i[n][s],i[n]._visualValues!==void 0&&i[n]._visualValues[s]!==void 0&&delete i[n]._visualValues[s]}}}const Xl=t=>t==="reset"||t==="none",Hf=(t,e)=>e?t:Object.assign({},t),Kj=(t,e,s)=>t&&!e.hidden&&e._stacked&&{keys:Z0(s,!0),values:null};class vi{constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Ql(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Wr(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,n=this.getDataset(),r=(h,f,p,m)=>h==="x"?f:h==="r"?m:p,i=s.xAxisID=de(n.xAxisID,Jl(e,"x")),o=s.yAxisID=de(n.yAxisID,Jl(e,"y")),l=s.rAxisID=de(n.rAxisID,Jl(e,"r")),c=s.indexAxis,u=s.iAxisID=r(c,i,o,l),d=s.vAxisID=r(c,o,i,l);s.xScale=this.getScaleForId(i),s.yScale=this.getScaleForId(o),s.rScale=this.getScaleForId(l),s.iScale=this.getScaleForId(u),s.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Nf(this._data,this),e._stacked&&Wr(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),n=this._data;if(he(s)){const r=this._cachedMeta;this._data=Fj(s,r)}else if(n!==s){if(n){Nf(n,this);const r=this._cachedMeta;Wr(r),r._parsed=[]}s&&Object.isExtensible(s)&&P1(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=s._stacked;s._stacked=Ql(s.vScale,s),s.stack!==n.stack&&(r=!0,Wr(s),s.stack=n.stack),this._resyncElements(e),(r||i!==s._stacked)&&(Wf(this,s._parsed),s._stacked=Ql(s.vScale,s))}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:o}=n,l=i.axis;let c=e===0&&s===r.length?!0:n._sorted,u=e>0&&n._parsed[e-1],d,h,f;if(this._parsing===!1)n._parsed=r,n._sorted=!0,f=r;else{Ee(r[e])?f=this.parseArrayData(n,r,e,s):he(r[e])?f=this.parseObjectData(n,r,e,s):f=this.parsePrimitiveData(n,r,e,s);const p=()=>h[l]===null||u&&h[l]<u[l];for(d=0;d<s;++d)n._parsed[d+e]=h=f[d],c&&(p()&&(c=!1),u=h);n._sorted=c}o&&Wf(this,f)}parsePrimitiveData(e,s,n,r){const{iScale:i,vScale:o}=e,l=i.axis,c=o.axis,u=i.getLabels(),d=i===o,h=new Array(r);let f,p,m;for(f=0,p=r;f<p;++f)m=f+n,h[f]={[l]:d||i.parse(u[m],m),[c]:o.parse(s[m],m)};return h}parseArrayData(e,s,n,r){const{xScale:i,yScale:o}=e,l=new Array(r);let c,u,d,h;for(c=0,u=r;c<u;++c)d=c+n,h=s[d],l[c]={x:i.parse(h[0],d),y:o.parse(h[1],d)};return l}parseObjectData(e,s,n,r){const{xScale:i,yScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(r);let d,h,f,p;for(d=0,h=r;d<h;++d)f=d+n,p=s[f],u[d]={x:i.parse(Fi(p,l),f),y:o.parse(Fi(p,c),f)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,n){const r=this.chart,i=this._cachedMeta,o=s[e.axis],l={keys:Z0(r,!0),values:s._stacks[e.axis]._visualValues};return Ff(l,o,i.index,{mode:n})}updateRangeFromParsed(e,s,n,r){const i=n[s.axis];let o=i===null?NaN:i;const l=r&&n._stacks[s.axis];r&&l&&(r.values=l,o=Ff(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,s){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,o=r.length,l=this._getOtherScale(e),c=Kj(s,n,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=Wj(l);let f,p;function m(){p=r[f];const v=p[l.axis];return!Xe(p[e.axis])||d>v||h<v}for(f=0;f<o&&!(!m()&&(this.updateRangeFromParsed(u,e,p,c),i));++f);if(i){for(f=o-1;f>=0;--f)if(!m()){this.updateRangeFromParsed(u,e,p,c);break}}return u}getAllParsedValues(e){const s=this._cachedMeta._parsed,n=[];let r,i,o;for(r=0,i=s.length;r<i;++r)o=s[r][e.axis],Xe(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,n=s.iScale,r=s.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=$j(de(this.options.clip,zj(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,n=this._cachedMeta,r=n.data||[],i=s.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||r.length-l,u=this.options.drawActiveElementsOnTop;let d;for(n.dataset&&n.dataset.draw(e,i,l,c),d=l;d<l+c;++d){const h=r[d];h.hidden||(h.active&&u?o.push(h):h.draw(e,i))}for(d=0;d<o.length;++d)o[d].draw(e,i)}getStyle(e,s){const n=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,s,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=qj(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=Vj(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!s,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",n){const r=s==="active",i=this._cachedDataOpts,o=e+"-"+s,l=i[o],c=this.enableOptionSharing&&Ta(n);if(l)return Hf(l,c);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],f=u.getOptionScopes(this.getDataset(),d),p=Object.keys(Te.elements[e]),m=()=>this.getContext(n,r,s),v=u.resolveNamedOptions(f,p,m,h);return v.$shared&&(v.$shared=c,i[o]=Object.freeze(Hf(v,c))),v}_resolveAnimations(e,s,n){const r=this.chart,i=this._cachedDataOpts,o=`animation-${s}`,l=i[o];if(l)return l;let c;if(r.options.animation!==!1){const d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,s),f=d.getOptionScopes(this.getDataset(),h);c=d.createResolver(f,this.getContext(e,n,s))}const u=new X0(r,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||Xl(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const n=this.resolveDataElementOptions(e,s),r=this._sharedOptions,i=this.getSharedOptions(n),o=this.includeOptions(s,i)||i!==r;return this.updateSharedOptions(i,s,n),{sharedOptions:i,includeOptions:o}}updateElement(e,s,n,r){Xl(r)?Object.assign(e,n):this._resolveAnimations(s,r).update(e,n)}updateSharedOptions(e,s,n){e&&!Xl(s)&&this._resolveAnimations(void 0,s).update(e,n)}_setStyle(e,s,n,r){e.active=r;const i=this.getStyle(s,r);this._resolveAnimations(s,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,s,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,s,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,n=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const r=n.length,i=s.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,s,n=!0){const r=this._cachedMeta,i=r.data,o=e+s;let l;const c=u=>{for(u.length+=s,l=u.length-1;l>=o;l--)u[l]=u[l-s]};for(c(i),l=e;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(e,s),n&&this.updateElements(i,e,s,"reset")}updateElements(e,s,n,r){}_removeElements(e,s){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,s);n._stacked&&Wr(n,r)}n.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,n,r]=e;this[s](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ie(vi,"defaults",{}),ie(vi,"datasetElementType",null),ie(vi,"dataElementType",null);class Yo extends vi{getLabelAndValue(e){const s=this._cachedMeta.vScale,n=this.getParsed(e);return{label:s.getLabels()[e],value:""+s.getLabelForValue(n[s.axis])}}parseObjectData(e,s,n,r){return lj.bind(this)(e,s,n,r)}update(e){const s=this._cachedMeta,n=s.dataset,r=s.data||[],i=s.iScale.getLabels();if(n.points=r,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const l={_loop:!0,_fullLoop:i.length===r.length,options:o};this.updateElement(n,void 0,l,e)}this.updateElements(r,0,r.length,e)}updateElements(e,s,n,r){const i=this._cachedMeta.rScale,o=r==="reset";for(let l=s;l<s+n;l++){const c=e[l],u=this.resolveDataElementOptions(l,c.active?"active":r),d=i.getPointPositionForValue(l,this.getParsed(l).r),h=o?i.xCenter:d.x,f=o?i.yCenter:d.y,p={x:h,y:f,angle:d.angle,skip:isNaN(h)||isNaN(f),options:u};this.updateElement(c,l,p,r)}}}ie(Yo,"id","radar"),ie(Yo,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),ie(Yo,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});function hn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ld{constructor(e){ie(this,"options");this.options=e||{}}static override(e){Object.assign(Ld.prototype,e)}init(){}formats(){return hn()}parse(){return hn()}format(){return hn()}add(){return hn()}diff(){return hn()}startOf(){return hn()}endOf(){return hn()}}var Yj={_date:Ld};function Gj(t,e,s,n){const{controller:r,data:i,_sorted:o}=t,l=r._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&i.length){const u=l._reversePixels?N1:fu;if(n){if(r._sharedOptions){const d=i[0],h=typeof d.getRange=="function"&&d.getRange(e);if(h){const f=u(i,e,s-h),p=u(i,e,s+h);return{lo:f.lo,hi:p.hi}}}}else{const d=u(i,e,s);if(c){const{vScale:h}=r._cachedMeta,{_parsed:f}=t,p=f.slice(0,d.lo+1).reverse().findIndex(v=>!_e(v[h.axis]));d.lo-=Math.max(0,p);const m=f.slice(d.hi).findIndex(v=>!_e(v[h.axis]));d.hi+=Math.max(0,m)}return d}}return{lo:0,hi:i.length-1}}function Xi(t,e,s,n,r){const i=t.getSortedVisibleDatasetMetas(),o=s[e];for(let l=0,c=i.length;l<c;++l){const{index:u,data:d}=i[l],{lo:h,hi:f}=Gj(i[l],e,o,r);for(let p=h;p<=f;++p){const m=d[p];m.skip||n(m,u,p)}}}function Qj(t){const e=t.indexOf("x")!==-1,s=t.indexOf("y")!==-1;return function(n,r){const i=e?Math.abs(n.x-r.x):0,o=s?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Zl(t,e,s,n,r){const i=[];return!r&&!t.isPointInArea(e)||Xi(t,s,e,function(l,c,u){!r&&!ys(l,t.chartArea,0)||l.inRange(e.x,e.y,n)&&i.push({element:l,datasetIndex:c,index:u})},!0),i}function Jj(t,e,s,n){let r=[];function i(o,l,c){const{startAngle:u,endAngle:d}=o.getProps(["startAngle","endAngle"],n),{angle:h}=j1(o,{x:e.x,y:e.y});A0(h,u,d)&&r.push({element:o,datasetIndex:l,index:c})}return Xi(t,s,e,i),r}function Xj(t,e,s,n,r,i){let o=[];const l=Qj(s);let c=Number.POSITIVE_INFINITY;function u(d,h,f){const p=d.inRange(e.x,e.y,r);if(n&&!p)return;const m=d.getCenterPoint(r);if(!(!!i||t.isPointInArea(m))&&!p)return;const b=l(e,m);b<c?(o=[{element:d,datasetIndex:h,index:f}],c=b):b===c&&o.push({element:d,datasetIndex:h,index:f})}return Xi(t,s,e,u),o}function ec(t,e,s,n,r,i){return!i&&!t.isPointInArea(e)?[]:s==="r"&&!n?Jj(t,e,s,r):Xj(t,e,s,n,r,i)}function Vf(t,e,s,n,r){const i=[],o=s==="x"?"inXRange":"inYRange";let l=!1;return Xi(t,s,e,(c,u,d)=>{c[o]&&c[o](e[s],r)&&(i.push({element:c,datasetIndex:u,index:d}),l=l||c.inRange(e.x,e.y,r))}),n&&!l?[]:i}var Zj={evaluateInteractionItems:Xi,modes:{index(t,e,s,n){const r=gn(e,t),i=s.axis||"x",o=s.includeInvisible||!1,l=s.intersect?Zl(t,r,i,n,o):ec(t,r,i,!1,n,o),c=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const d=l[0].index,h=u.data[d];h&&!h.skip&&c.push({element:h,datasetIndex:u.index,index:d})}),c):[]},dataset(t,e,s,n){const r=gn(e,t),i=s.axis||"xy",o=s.includeInvisible||!1;let l=s.intersect?Zl(t,r,i,n,o):ec(t,r,i,!1,n,o);if(l.length>0){const c=l[0].datasetIndex,u=t.getDatasetMeta(c).data;l=[];for(let d=0;d<u.length;++d)l.push({element:u[d],datasetIndex:c,index:d})}return l},point(t,e,s,n){const r=gn(e,t),i=s.axis||"xy",o=s.includeInvisible||!1;return Zl(t,r,i,n,o)},nearest(t,e,s,n){const r=gn(e,t),i=s.axis||"xy",o=s.includeInvisible||!1;return ec(t,r,i,s.intersect,n,o)},x(t,e,s,n){const r=gn(e,t);return Vf(t,r,"x",s.intersect,n)},y(t,e,s,n){const r=gn(e,t);return Vf(t,r,"y",s.intersect,n)}}};const ex=["left","top","right","bottom"];function Hr(t,e){return t.filter(s=>s.pos===e)}function qf(t,e){return t.filter(s=>ex.indexOf(s.pos)===-1&&s.box.axis===e)}function Vr(t,e){return t.sort((s,n)=>{const r=e?n:s,i=e?s:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function ek(t){const e=[];let s,n,r,i,o,l;for(s=0,n=(t||[]).length;s<n;++s)r=t[s],{position:i,options:{stack:o,stackWeight:l=1}}=r,e.push({index:s,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:l});return e}function tk(t){const e={};for(const s of t){const{stack:n,pos:r,stackWeight:i}=s;if(!n||!ex.includes(r))continue;const o=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function sk(t,e){const s=tk(t),{vBoxMaxWidth:n,hBoxMaxHeight:r}=e;let i,o,l;for(i=0,o=t.length;i<o;++i){l=t[i];const{fullSize:c}=l.box,u=s[l.stack],d=u&&l.stackWeight/u.weight;l.horizontal?(l.width=d?d*n:c&&e.availableWidth,l.height=r):(l.width=n,l.height=d?d*r:c&&e.availableHeight)}return s}function nk(t){const e=ek(t),s=Vr(e.filter(u=>u.box.fullSize),!0),n=Vr(Hr(e,"left"),!0),r=Vr(Hr(e,"right")),i=Vr(Hr(e,"top"),!0),o=Vr(Hr(e,"bottom")),l=qf(e,"x"),c=qf(e,"y");return{fullSize:s,leftAndTop:n.concat(i),rightAndBottom:r.concat(c).concat(o).concat(l),chartArea:Hr(e,"chartArea"),vertical:n.concat(r).concat(c),horizontal:i.concat(o).concat(l)}}function Kf(t,e,s,n){return Math.max(t[s],e[s])+Math.max(t[n],e[n])}function tx(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function rk(t,e,s,n){const{pos:r,box:i}=s,o=t.maxPadding;if(!he(r)){s.size&&(t[r]-=s.size);const h=n[s.stack]||{size:0,count:1};h.size=Math.max(h.size,s.horizontal?i.height:i.width),s.size=h.size/h.count,t[r]+=s.size}i.getPadding&&tx(o,i.getPadding());const l=Math.max(0,e.outerWidth-Kf(o,t,"left","right")),c=Math.max(0,e.outerHeight-Kf(o,t,"top","bottom")),u=l!==t.w,d=c!==t.h;return t.w=l,t.h=c,s.horizontal?{same:u,other:d}:{same:d,other:u}}function ik(t){const e=t.maxPadding;function s(n){const r=Math.max(e[n]-t[n],0);return t[n]+=r,r}t.y+=s("top"),t.x+=s("left"),s("right"),s("bottom")}function ok(t,e){const s=e.maxPadding;function n(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(e[o],s[o])}),i}return n(t?["left","right"]:["top","bottom"])}function ei(t,e,s,n){const r=[];let i,o,l,c,u,d;for(i=0,o=t.length,u=0;i<o;++i){l=t[i],c=l.box,c.update(l.width||e.w,l.height||e.h,ok(l.horizontal,e));const{same:h,other:f}=rk(e,s,l,n);u|=h&&r.length,d=d||f,c.fullSize||r.push(l)}return u&&ei(r,e,s,n)||d}function To(t,e,s,n,r){t.top=s,t.left=e,t.right=e+n,t.bottom=s+r,t.width=n,t.height=r}function Yf(t,e,s,n){const r=s.padding;let{x:i,y:o}=e;for(const l of t){const c=l.box,u=n[l.stack]||{count:1,placed:0,weight:1},d=l.stackWeight/u.weight||1;if(l.horizontal){const h=e.w*d,f=u.size||c.height;Ta(u.start)&&(o=u.start),c.fullSize?To(c,r.left,o,s.outerWidth-r.right-r.left,f):To(c,e.left+u.placed,o,h,f),u.start=o,u.placed+=h,o=c.bottom}else{const h=e.h*d,f=u.size||c.width;Ta(u.start)&&(i=u.start),c.fullSize?To(c,i,r.top,f,s.outerHeight-r.bottom-r.top):To(c,i,e.top+u.placed,f,h),u.start=i,u.placed+=h,i=c.right}}e.x=i,e.y=o}var Is={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},t.boxes.push(e)},removeBox(t,e){const s=t.boxes?t.boxes.indexOf(e):-1;s!==-1&&t.boxes.splice(s,1)},configure(t,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(t,e,s,n){if(!t)return;const r=nt(t.options.layout.padding),i=Math.max(e-r.width,0),o=Math.max(s-r.height,0),l=nk(t.boxes),c=l.vertical,u=l.horizontal;pe(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const d=c.reduce((v,b)=>b.box.options&&b.box.options.display===!1?v:v+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:s,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/d,hBoxMaxHeight:o/2}),f=Object.assign({},r);tx(f,nt(n));const p=Object.assign({maxPadding:f,w:i,h:o,x:r.left,y:r.top},r),m=sk(c.concat(u),h);ei(l.fullSize,p,h,m),ei(c,p,h,m),ei(u,p,h,m)&&ei(c,p,h,m),ik(p),Yf(l.leftAndTop,p,h,m),p.x+=p.w,p.y+=p.h,Yf(l.rightAndBottom,p,h,m),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},pe(l.chartArea,v=>{const b=v.box;Object.assign(b,t.chartArea),b.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class sx{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,n){}removeEventListener(e,s,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,n,r){return s=Math.max(0,s||e.width),n=n||e.height,{width:s,height:Math.max(0,r?Math.floor(s/r):n)}}isAttached(e){return!0}updateConfig(e){}}class ak extends sx{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Go="$chartjs",lk={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Gf=t=>t===null||t==="";function ck(t,e){const s=t.style,n=t.getAttribute("height"),r=t.getAttribute("width");if(t[Go]={initial:{height:n,width:r,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",Gf(r)){const i=Lf(t,"width");i!==void 0&&(t.width=i)}if(Gf(n))if(t.style.height==="")t.height=t.width/(e||2);else{const i=Lf(t,"height");i!==void 0&&(t.height=i)}return t}const nx=_j?{passive:!0}:!1;function uk(t,e,s){t&&t.addEventListener(e,s,nx)}function dk(t,e,s){t&&t.canvas&&t.canvas.removeEventListener(e,s,nx)}function hk(t,e){const s=lk[t.type]||t.type,{x:n,y:r}=gn(t,e);return{type:s,chart:e,native:t,x:n!==void 0?n:null,y:r!==void 0?r:null}}function Da(t,e){for(const s of t)if(s===e||s.contains(e))return!0}function fk(t,e,s){const n=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||Da(l.addedNodes,n),o=o&&!Da(l.removedNodes,n);o&&s()});return r.observe(document,{childList:!0,subtree:!0}),r}function pk(t,e,s){const n=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||Da(l.removedNodes,n),o=o&&!Da(l.addedNodes,n);o&&s()});return r.observe(document,{childList:!0,subtree:!0}),r}const Ui=new Map;let Qf=0;function rx(){const t=window.devicePixelRatio;t!==Qf&&(Qf=t,Ui.forEach((e,s)=>{s.currentDevicePixelRatio!==t&&e()}))}function mk(t,e){Ui.size||window.addEventListener("resize",rx),Ui.set(t,e)}function gk(t){Ui.delete(t),Ui.size||window.removeEventListener("resize",rx)}function xk(t,e,s){const n=t.canvas,r=n&&Md(n);if(!r)return;const i=M0((l,c)=>{const u=r.clientWidth;s(l,c),u<r.clientWidth&&s()},window),o=new ResizeObserver(l=>{const c=l[0],u=c.contentRect.width,d=c.contentRect.height;u===0&&d===0||i(u,d)});return o.observe(r),mk(t,i),o}function tc(t,e,s){s&&s.disconnect(),e==="resize"&&gk(t)}function yk(t,e,s){const n=t.canvas,r=M0(i=>{t.ctx!==null&&s(hk(i,t))},t);return uk(n,e,r),r}class vk extends sx{acquireContext(e,s){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(ck(e,s),n):null}releaseContext(e){const s=e.canvas;if(!s[Go])return!1;const n=s[Go].initial;["height","width"].forEach(i=>{const o=n[i];_e(o)?s.removeAttribute(i):s.setAttribute(i,o)});const r=n.style||{};return Object.keys(r).forEach(i=>{s.style[i]=r[i]}),s.width=s.width,delete s[Go],!0}addEventListener(e,s,n){this.removeEventListener(e,s);const r=e.$proxies||(e.$proxies={}),o={attach:fk,detach:pk,resize:xk}[s]||yk;r[s]=o(e,s,n)}removeEventListener(e,s){const n=e.$proxies||(e.$proxies={}),r=n[s];if(!r)return;({attach:tc,detach:tc,resize:tc}[s]||dk)(e,s,r),n[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,n,r){return wj(e,s,n,r)}isAttached(e){const s=e&&Md(e);return!!(s&&s.isConnected)}}function bk(t){return!Rd()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?ak:vk}class Xs{constructor(){ie(this,"x");ie(this,"y");ie(this,"active",!1);ie(this,"options");ie(this,"$animations")}tooltipPosition(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}hasValue(){return Oa(this.x)&&Oa(this.y)}getProps(e,s){const n=this.$animations;if(!s||!n)return this;const r={};return e.forEach(i=>{r[i]=n[i]&&n[i].active()?n[i]._to:this[i]}),r}}ie(Xs,"defaults",{}),ie(Xs,"defaultRoutes");function wk(t,e){const s=t.options.ticks,n=_k(t),r=Math.min(s.maxTicksLimit||n,n),i=s.major.enabled?kk(e):[],o=i.length,l=i[0],c=i[o-1],u=[];if(o>r)return Sk(e,u,i,o/r),u;const d=jk(i,e,r);if(o>0){let h,f;const p=o>1?Math.round((c-l)/(o-1)):null;for(Ao(e,u,d,_e(p)?0:l-p,l),h=0,f=o-1;h<f;h++)Ao(e,u,d,i[h],i[h+1]);return Ao(e,u,d,c,_e(p)?e.length:c+p),u}return Ao(e,u,d),u}function _k(t){const e=t.options.offset,s=t._tickSize(),n=t._length/s+(e?0:1),r=t._maxLength/s;return Math.floor(Math.min(n,r))}function jk(t,e,s){const n=Nk(t),r=e.length/s;if(!n)return Math.max(r,1);const i=v1(n);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>r)return c}return Math.max(r,1)}function kk(t){const e=[];let s,n;for(s=0,n=t.length;s<n;s++)t[s].major&&e.push(s);return e}function Sk(t,e,s,n){let r=0,i=s[0],o;for(n=Math.ceil(n),o=0;o<t.length;o++)o===i&&(e.push(t[o]),r++,i=s[r*n])}function Ao(t,e,s,n,r){const i=de(n,0),o=Math.min(de(r,t.length),t.length);let l=0,c,u,d;for(s=Math.ceil(s),r&&(c=r-n,s=c/Math.floor(c/s)),d=i;d<0;)l++,d=Math.round(i+l*s);for(u=Math.max(i,0);u<o;u++)u===d&&(e.push(t[u]),l++,d=Math.round(i+l*s))}function Nk(t){const e=t.length;let s,n;if(e<2)return!1;for(n=t[0],s=1;s<e;++s)if(t[s]-t[s-1]!==n)return!1;return n}const Ck=t=>t==="left"?"right":t==="right"?"left":t,Jf=(t,e,s)=>e==="top"||e==="left"?t[e]+s:t[e]-s,Xf=(t,e)=>Math.min(e||t,t);function Zf(t,e){const s=[],n=t.length/e,r=t.length;let i=0;for(;i<r;i+=n)s.push(t[Math.floor(i)]);return s}function Pk(t,e,s){const n=t.ticks.length,r=Math.min(e,n-1),i=t._startPixel,o=t._endPixel,l=1e-6;let c=t.getPixelForTick(r),u;if(!(s&&(n===1?u=Math.max(c-i,o-c):e===0?u=(t.getPixelForTick(1)-c)/2:u=(c-t.getPixelForTick(r-1))/2,c+=r<e?u:-u,c<i-l||c>o+l)))return c}function Ek(t,e){pe(t,s=>{const n=s.gc,r=n.length/2;let i;if(r>e){for(i=0;i<r;++i)delete s.data[n[i]];n.splice(0,r)}})}function qr(t){return t.drawTicks?t.tickLength:0}function ep(t,e){if(!t.display)return 0;const s=We(t.font,e),n=nt(t.padding);return(Ee(t.text)?t.text.length:1)*s.lineHeight+n.height}function Tk(t,e){return rn(t,{scale:e,type:"scale"})}function Ak(t,e,s){return rn(t,{tick:s,index:e,type:"tick"})}function Ok(t,e,s){let n=L0(t);return(s&&e!=="right"||!s&&e==="right")&&(n=Ck(n)),n}function Rk(t,e,s,n){const{top:r,left:i,bottom:o,right:l,chart:c}=t,{chartArea:u,scales:d}=c;let h=0,f,p,m;const v=o-r,b=l-i;if(t.isHorizontal()){if(p=mt(n,i,l),he(s)){const g=Object.keys(s)[0],x=s[g];m=d[g].getPixelForValue(x)+v-e}else s==="center"?m=(u.bottom+u.top)/2+v-e:m=Jf(t,s,e);f=l-i}else{if(he(s)){const g=Object.keys(s)[0],x=s[g];p=d[g].getPixelForValue(x)-b+e}else s==="center"?p=(u.left+u.right)/2-b+e:p=Jf(t,s,e);m=mt(n,o,r),h=s==="left"?-vt:vt}return{titleX:p,titleY:m,maxWidth:f,rotation:h}}class Zi extends Xs{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:n,_suggestedMax:r}=this;return e=Qt(e,Number.POSITIVE_INFINITY),s=Qt(s,Number.NEGATIVE_INFINITY),n=Qt(n,Number.POSITIVE_INFINITY),r=Qt(r,Number.NEGATIVE_INFINITY),{min:Qt(e,n),max:Qt(s,r),minDefined:Xe(e),maxDefined:Xe(s)}}getMinMax(e){let{min:s,max:n,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:s,max:n};const l=this.getMatchingVisibleMetas();for(let c=0,u=l.length;c<u;++c)o=l[c].controller.getMinMax(this,e),r||(s=Math.min(s,o.min)),i||(n=Math.max(n,o.max));return s=i&&s>n?n:s,n=r&&s>n?s:n,{min:Qt(s,Qt(n,s)),max:Qt(n,Qt(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ye(this.options.beforeUpdate,[this])}update(e,s,n){const{beginAtZero:r,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=X1(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?Zf(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=wk(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,n;this.isHorizontal()?(s=this.left,n=this.right):(s=this.top,n=this.bottom,e=!e),this._startPixel=s,this._endPixel=n,this._reversePixels=e,this._length=n-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ye(this.options.afterUpdate,[this])}beforeSetDimensions(){ye(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ye(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ye(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ye(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=ye(s.callback,[i.value,n,e],this)}afterTickToLabelConversion(){ye(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ye(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,n=Xf(this.ticks.length,e.ticks.maxTicksLimit),r=s.minRotation||0,i=s.maxRotation;let o=r,l,c,u;if(!this._isVisible()||!s.display||r>=i||n<=1||!this.isHorizontal()){this.labelRotation=r;return}const d=this._getLabelSizes(),h=d.widest.width,f=d.highest.height,p=xs(this.chart.width-h,0,this.maxWidth);l=e.offset?this.maxWidth/n:p/(n-1),h+6>l&&(l=p/(n-(e.offset?.5:1)),c=this.maxHeight-qr(e.grid)-s.padding-ep(e.title,this.chart.options.font),u=Math.sqrt(h*h+f*f),o=Cd(Math.min(Math.asin(xs((d.highest.height+6)/l,-1,1)),Math.asin(xs(c/u,-1,1))-Math.asin(xs(f/u,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){ye(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ye(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:n,title:r,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=ep(r,s.options.font);if(l?(e.width=this.maxWidth,e.height=qr(i)+c):(e.height=this.maxHeight,e.width=qr(i)+c),n.display&&this.ticks.length){const{first:u,last:d,widest:h,highest:f}=this._getLabelSizes(),p=n.padding*2,m=_n(this.labelRotation),v=Math.cos(m),b=Math.sin(m);if(l){const g=n.mirror?0:b*h.width+v*f.height;e.height=Math.min(this.maxHeight,e.height+g+p)}else{const g=n.mirror?0:v*h.width+b*f.height;e.width=Math.min(this.maxWidth,e.width+g+p)}this._calculatePadding(u,d,b,v)}}this._handleMargins(),l?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,n,r){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;c?u?(f=r*e.width,p=n*s.height):(f=n*e.height,p=r*s.width):i==="start"?p=s.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,p=s.width/2),this.paddingLeft=Math.max((f-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((p-h+o)*this.width/(this.width-h),0)}else{let d=s.height/2,h=e.height/2;i==="start"?(d=0,h=e.height):i==="end"&&(d=s.height,h=0),this.paddingTop=d+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ye(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,n;for(s=0,n=e.length;s<n;s++)_e(e[s].label)&&(e.splice(s,1),n--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let n=this.ticks;s<n.length&&(n=Zf(n,s)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,n){const{ctx:r,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(s/Xf(s,n));let u=0,d=0,h,f,p,m,v,b,g,x,y,w,k;for(h=0;h<s;h+=c){if(m=e[h].label,v=this._resolveTickFontOptions(h),r.font=b=v.string,g=i[b]=i[b]||{data:{},gc:[]},x=v.lineHeight,y=w=0,!_e(m)&&!Ee(m))y=Ra(r,g.data,g.gc,y,m),w=x;else if(Ee(m))for(f=0,p=m.length;f<p;++f)k=m[f],!_e(k)&&!Ee(k)&&(y=Ra(r,g.data,g.gc,y,k),w+=x);o.push(y),l.push(w),u=Math.max(y,u),d=Math.max(w,d)}Ek(i,s);const E=o.indexOf(u),P=l.indexOf(d),R=S=>({width:o[S]||0,height:l[S]||0});return{first:R(0),last:R(s-1),widest:R(E),highest:R(P),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return S1(this._alignToPixels?dn(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const n=s[e];return n.$context||(n.$context=Ak(this.getContext(),e,n))}return this.$context||(this.$context=Tk(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=_n(this.labelRotation),n=Math.abs(Math.cos(s)),r=Math.abs(Math.sin(s)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*n>l*r?l/n:c/r:c*r<l*n?c/n:l/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,n=this.chart,r=this.options,{grid:i,position:o,border:l}=r,c=i.offset,u=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=qr(i),p=[],m=l.setContext(this.getContext()),v=m.display?m.width:0,b=v/2,g=function(te){return dn(n,te,v)};let x,y,w,k,E,P,R,S,L,_,I,Q;if(o==="top")x=g(this.bottom),P=this.bottom-f,S=x-b,_=g(e.top)+b,Q=e.bottom;else if(o==="bottom")x=g(this.top),_=e.top,Q=g(e.bottom)-b,P=x+b,S=this.top+f;else if(o==="left")x=g(this.right),E=this.right-f,R=x-b,L=g(e.left)+b,I=e.right;else if(o==="right")x=g(this.left),L=e.left,I=g(e.right)-b,E=x+b,R=this.left+f;else if(s==="x"){if(o==="center")x=g((e.top+e.bottom)/2+.5);else if(he(o)){const te=Object.keys(o)[0],Z=o[te];x=g(this.chart.scales[te].getPixelForValue(Z))}_=e.top,Q=e.bottom,P=x+b,S=P+f}else if(s==="y"){if(o==="center")x=g((e.left+e.right)/2);else if(he(o)){const te=Object.keys(o)[0],Z=o[te];x=g(this.chart.scales[te].getPixelForValue(Z))}E=x-b,R=E-f,L=e.left,I=e.right}const se=de(r.ticks.maxTicksLimit,h),X=Math.max(1,Math.ceil(h/se));for(y=0;y<h;y+=X){const te=this.getContext(y),Z=i.setContext(te),U=l.setContext(te),O=Z.lineWidth,j=Z.color,N=U.dash||[],B=U.dashOffset,T=Z.tickWidth,z=Z.tickColor,V=Z.tickBorderDash||[],W=Z.tickBorderDashOffset;w=Pk(this,y,c),w!==void 0&&(k=dn(n,w,O),u?E=R=L=I=k:P=S=_=Q=k,p.push({tx1:E,ty1:P,tx2:R,ty2:S,x1:L,y1:_,x2:I,y2:Q,width:O,color:j,borderDash:N,borderDashOffset:B,tickWidth:T,tickColor:z,tickBorderDash:V,tickBorderDashOffset:W}))}return this._ticksLength=h,this._borderValue=x,p}_computeLabelItems(e){const s=this.axis,n=this.options,{position:r,ticks:i}=n,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:u,padding:d,mirror:h}=i,f=qr(n.grid),p=f+d,m=h?-d:p,v=-_n(this.labelRotation),b=[];let g,x,y,w,k,E,P,R,S,L,_,I,Q="middle";if(r==="top")E=this.bottom-m,P=this._getXAxisLabelAlignment();else if(r==="bottom")E=this.top+m,P=this._getXAxisLabelAlignment();else if(r==="left"){const X=this._getYAxisLabelAlignment(f);P=X.textAlign,k=X.x}else if(r==="right"){const X=this._getYAxisLabelAlignment(f);P=X.textAlign,k=X.x}else if(s==="x"){if(r==="center")E=(e.top+e.bottom)/2+p;else if(he(r)){const X=Object.keys(r)[0],te=r[X];E=this.chart.scales[X].getPixelForValue(te)+p}P=this._getXAxisLabelAlignment()}else if(s==="y"){if(r==="center")k=(e.left+e.right)/2-p;else if(he(r)){const X=Object.keys(r)[0],te=r[X];k=this.chart.scales[X].getPixelForValue(te)}P=this._getYAxisLabelAlignment(f).textAlign}s==="y"&&(c==="start"?Q="top":c==="end"&&(Q="bottom"));const se=this._getLabelSizes();for(g=0,x=l.length;g<x;++g){y=l[g],w=y.label;const X=i.setContext(this.getContext(g));R=this.getPixelForTick(g)+i.labelOffset,S=this._resolveTickFontOptions(g),L=S.lineHeight,_=Ee(w)?w.length:1;const te=_/2,Z=X.color,U=X.textStrokeColor,O=X.textStrokeWidth;let j=P;o?(k=R,P==="inner"&&(g===x-1?j=this.options.reverse?"left":"right":g===0?j=this.options.reverse?"right":"left":j="center"),r==="top"?u==="near"||v!==0?I=-_*L+L/2:u==="center"?I=-se.highest.height/2-te*L+L:I=-se.highest.height+L/2:u==="near"||v!==0?I=L/2:u==="center"?I=se.highest.height/2-te*L:I=se.highest.height-_*L,h&&(I*=-1),v!==0&&!X.showLabelBackdrop&&(k+=L/2*Math.sin(v))):(E=R,I=(1-_)*L/2);let N;if(X.showLabelBackdrop){const B=nt(X.backdropPadding),T=se.heights[g],z=se.widths[g];let V=I-B.top,W=0-B.left;switch(Q){case"middle":V-=T/2;break;case"bottom":V-=T;break}switch(P){case"center":W-=z/2;break;case"right":W-=z;break;case"inner":g===x-1?W-=z:g>0&&(W-=z/2);break}N={left:W,top:V,width:z+B.width,height:T+B.height,color:X.backdropColor}}b.push({label:w,font:S,textOffset:I,options:{rotation:v,color:Z,strokeColor:U,strokeWidth:O,textAlign:j,textBaseline:Q,translation:[k,E],backdrop:N}})}return b}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-_n(this.labelRotation))return e==="top"?"left":"right";let r="center";return s.align==="start"?r="left":s.align==="end"?r="right":s.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),l=e+i,c=o.widest.width;let u,d;return s==="left"?r?(d=this.right+i,n==="near"?u="left":n==="center"?(u="center",d+=c/2):(u="right",d+=c)):(d=this.right-l,n==="near"?u="right":n==="center"?(u="center",d-=c/2):(u="left",d=this.left)):s==="right"?r?(d=this.left+i,n==="near"?u="right":n==="center"?(u="center",d-=c/2):(u="left",d-=c)):(d=this.left+l,n==="near"?u="left":n==="center"?(u="center",d+=c/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:n,top:r,width:i,height:o}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(n,r,i,o),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const r=this.ticks.findIndex(i=>i.value===e);return r>=0?s.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const s=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const l=(c,u,d)=>{!d.width||!d.color||(n.save(),n.lineWidth=d.width,n.strokeStyle=d.color,n.setLineDash(d.borderDash||[]),n.lineDashOffset=d.borderDashOffset,n.beginPath(),n.moveTo(c.x,c.y),n.lineTo(u.x,u.y),n.stroke(),n.restore())};if(s.display)for(i=0,o=r.length;i<o;++i){const c=r[i];s.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),s.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),o=n.display?i.width:0;if(!o)return;const l=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,d,h,f;this.isHorizontal()?(u=dn(e,this.left,o)-o/2,d=dn(e,this.right,l)+l/2,h=f=c):(h=dn(e,this.top,o)-o/2,f=dn(e,this.bottom,l)+l/2,u=d=c),s.save(),s.lineWidth=i.width,s.strokeStyle=i.color,s.beginPath(),s.moveTo(u,h),s.lineTo(d,f),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,r=this._computeLabelArea();r&&al(n,r);const i=this.getLabelItems(e);for(const o of i){const l=o.options,c=o.font,u=o.label,d=o.textOffset;jr(n,u,0,d,c,l)}r&&ll(n)}drawTitle(){const{ctx:e,options:{position:s,title:n,reverse:r}}=this;if(!n.display)return;const i=We(n.font),o=nt(n.padding),l=n.align;let c=i.lineHeight/2;s==="bottom"||s==="center"||he(s)?(c+=o.bottom,Ee(n.text)&&(c+=i.lineHeight*(n.text.length-1))):c+=o.top;const{titleX:u,titleY:d,maxWidth:h,rotation:f}=Rk(this,c,s,l);jr(e,n.text,0,0,i,{color:n.color,maxWidth:h,rotation:f,textAlign:Ok(l,s,r),textBaseline:"middle",translation:[u,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,n=de(e.grid&&e.grid.z,-1),r=de(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Zi.prototype.draw?[{z:s,draw:i=>{this.draw(i)}}]:[{z:n,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:s,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,o;for(i=0,o=s.length;i<o;++i){const l=s[i];l[n]===this.id&&(!e||l.type===e)&&r.push(l)}return r}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return We(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Oo{constructor(e,s,n){this.type=e,this.scope=s,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let n;Dk(s)&&(n=this.register(s));const r=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,Mk(e,o,n),this.override&&Te.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const s=this.items,n=e.id,r=this.scope;n in s&&delete s[n],r&&n in Te[r]&&(delete Te[r][n],this.override&&delete On[n])}}function Mk(t,e,s){const n=$i(Object.create(null),[s?Te.get(s):{},Te.get(e),t.defaults]);Te.set(e,n),t.defaultRoutes&&Lk(e,t.defaultRoutes),t.descriptors&&Te.describe(e,t.descriptors)}function Lk(t,e){Object.keys(e).forEach(s=>{const n=s.split("."),r=n.pop(),i=[t].concat(n).join("."),o=e[s].split("."),l=o.pop(),c=o.join(".");Te.route(i,r,c,l)})}function Dk(t){return"id"in t&&"defaults"in t}class Ik{constructor(){this.controllers=new Oo(vi,"datasets",!0),this.elements=new Oo(Xs,"elements"),this.plugins=new Oo(Object,"plugins"),this.scales=new Oo(Zi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,n){[...s].forEach(r=>{const i=n||this._getRegistryForType(r);n||i.isForType(r)||i===this.plugins&&r.id?this._exec(e,i,r):pe(r,o=>{const l=n||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,s,n){const r=Nd(e);ye(n["before"+r],[],n),s[e](n),ye(n["after"+r],[],n)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const n=this._typedRegistries[s];if(n.isForType(e))return n}return this.plugins}_get(e,s,n){const r=s.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var Zt=new Ik;class Bk{constructor(){this._init=[]}notify(e,s,n,r){s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(i,e,s,n);return s==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,s,n,r){r=r||{};for(const i of e){const o=i.plugin,l=o[n],c=[s,r,i.options];if(ye(l,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){_e(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const n=e&&e.config,r=de(n.options&&n.options.plugins,{}),i=zk(n);return r===!1&&!s?[]:Fk(e,i,r,s)}_notifyStateChanges(e){const s=this._oldCache||[],n=this._cache,r=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(r(s,n),e,"stop"),this._notify(r(n,s),e,"start")}}function zk(t){const e={},s=[],n=Object.keys(Zt.plugins.items);for(let i=0;i<n.length;i++)s.push(Zt.getPlugin(n[i]));const r=t.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];s.indexOf(o)===-1&&(s.push(o),e[o.id]=!0)}return{plugins:s,localIds:e}}function $k(t,e){return!e&&t===!1?null:t===!0?{}:t}function Fk(t,{plugins:e,localIds:s},n,r){const i=[],o=t.getContext();for(const l of e){const c=l.id,u=$k(n[c],r);u!==null&&i.push({plugin:l,options:Uk(t.config,{plugin:l,local:s[c]},u,o)})}return i}function Uk(t,{plugin:e,local:s},n,r){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(n,i);return s&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function gu(t,e){const s=Te.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function Wk(t,e){let s=t;return t==="_index_"?s=e:t==="_value_"&&(s=e==="x"?"y":"x"),s}function Hk(t,e){return t===e?"_index_":"_value_"}function tp(t){if(t==="x"||t==="y"||t==="r")return t}function Vk(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function xu(t,...e){if(tp(t))return t;for(const s of e){const n=s.axis||Vk(s.position)||t.length>1&&tp(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function sp(t,e,s){if(s[e+"AxisID"]===t)return{axis:e}}function qk(t,e){if(e.data&&e.data.datasets){const s=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(s.length)return sp(t,"x",s[0])||sp(t,"y",s[0])}return{}}function Kk(t,e){const s=On[t.type]||{scales:{}},n=e.scales||{},r=gu(t.type,e),i=Object.create(null);return Object.keys(n).forEach(o=>{const l=n[o];if(!he(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=xu(o,l,qk(o,t),Te.scales[l.type]),u=Hk(c,r),d=s.scales||{};i[o]=mi(Object.create(null),[{axis:c},l,d[c],d[u]])}),t.data.datasets.forEach(o=>{const l=o.type||t.type,c=o.indexAxis||gu(l,e),d=(On[l]||{}).scales||{};Object.keys(d).forEach(h=>{const f=Wk(h,c),p=o[f+"AxisID"]||f;i[p]=i[p]||Object.create(null),mi(i[p],[{axis:f},n[p],d[h]])})}),Object.keys(i).forEach(o=>{const l=i[o];mi(l,[Te.scales[l.type],Te.scale])}),i}function ix(t){const e=t.options||(t.options={});e.plugins=de(e.plugins,{}),e.scales=Kk(t,e)}function ox(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Yk(t){return t=t||{},t.data=ox(t.data),ix(t),t}const np=new Map,ax=new Set;function Ro(t,e){let s=np.get(t);return s||(s=e(),np.set(t,s),ax.add(s)),s}const Kr=(t,e,s)=>{const n=Fi(e,s);n!==void 0&&t.add(n)};class Gk{constructor(e){this._config=Yk(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=ox(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),ix(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Ro(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,s){return Ro(`${e}.transition.${s}`,()=>[[`datasets.${e}.transitions.${s}`,`transitions.${s}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,s){return Ro(`${e}-${s}`,()=>[[`datasets.${e}.elements.${s}`,`datasets.${e}`,`elements.${s}`,""]])}pluginScopeKeys(e){const s=e.id,n=this.type;return Ro(`${n}-plugin-${s}`,()=>[[`plugins.${s}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const n=this._scopeCache;let r=n.get(e);return(!r||s)&&(r=new Map,n.set(e,r)),r}getOptionScopes(e,s,n){const{options:r,type:i}=this,o=this._cachedScopes(e,n),l=o.get(s);if(l)return l;const c=new Set;s.forEach(d=>{e&&(c.add(e),d.forEach(h=>Kr(c,e,h))),d.forEach(h=>Kr(c,r,h)),d.forEach(h=>Kr(c,On[i]||{},h)),d.forEach(h=>Kr(c,Te,h)),d.forEach(h=>Kr(c,pu,h))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),ax.has(s)&&o.set(s,u),u}chartOptionScopes(){const{options:e,type:s}=this;return[e,On[s]||{},Te.datasets[s]||{},{type:s},Te,pu]}resolveNamedOptions(e,s,n,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=rp(this._resolverCache,e,r);let c=o;if(Jk(o,s)){i.$shared=!1,n=Js(n)?n():n;const u=this.createResolver(e,n,l);c=kr(o,n,u)}for(const u of s)i[u]=c[u];return i}createResolver(e,s,n=[""],r){const{resolver:i}=rp(this._resolverCache,e,n);return he(s)?kr(i,s,void 0,r):i}}function rp(t,e,s){let n=t.get(e);n||(n=new Map,t.set(e,n));const r=s.join();let i=n.get(r);return i||(i={resolver:Td(e,s),subPrefixes:s.filter(l=>!l.toLowerCase().includes("hover"))},n.set(r,i)),i}const Qk=t=>he(t)&&Object.getOwnPropertyNames(t).some(e=>Js(t[e]));function Jk(t,e){const{isScriptable:s,isIndexable:n}=F0(t);for(const r of e){const i=s(r),o=n(r),l=(o||i)&&t[r];if(i&&(Js(l)||Qk(l))||o&&Ee(l))return!0}return!1}var Xk="4.5.0";const Zk=["top","bottom","left","right","chartArea"];function ip(t,e){return t==="top"||t==="bottom"||Zk.indexOf(t)===-1&&e==="x"}function op(t,e){return function(s,n){return s[t]===n[t]?s[e]-n[e]:s[t]-n[t]}}function ap(t){const e=t.chart,s=e.options.animation;e.notifyPlugins("afterRender"),ye(s&&s.onComplete,[t],e)}function e2(t){const e=t.chart,s=e.options.animation;ye(s&&s.onProgress,[t],e)}function lx(t){return Rd()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Qo={},lp=t=>{const e=lx(t);return Object.values(Qo).filter(s=>s.canvas===e).pop()};function t2(t,e,s){const n=Object.keys(t);for(const r of n){const i=+r;if(i>=e){const o=t[r];delete t[r],(s>0||i>e)&&(t[i+s]=o)}}}function s2(t,e,s,n){return!s||t.type==="mouseout"?null:n?e:t}var Cs;let ul=(Cs=class{static register(...e){Zt.add(...e),cp()}static unregister(...e){Zt.remove(...e),cp()}constructor(e,s){const n=this.config=new Gk(s),r=lx(e),i=lp(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||bk(r)),this.platform.updateConfig(n);const l=this.platform.acquireContext(r,o.aspectRatio),c=l&&l.canvas,u=c&&c.height,d=c&&c.width;if(this.id=u1(),this.ctx=l,this.canvas=c,this.width=d,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Bk,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=T1(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Qo[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}ls.listen(this,"complete",ap),ls.listen(this,"progress",e2),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:n,height:r,_aspectRatio:i}=this;return _e(e)?s&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Zt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Mf(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Af(this.canvas,this.ctx),this}stop(){return ls.stop(this),this}resize(e,s){ls.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,s,i),l=n.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Mf(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),ye(n.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};pe(s,(n,r)=>{n.id=r})}buildOrUpdateScales(){const e=this.options,s=e.scales,n=this.scales,r=Object.keys(n).reduce((o,l)=>(o[l]=!1,o),{});let i=[];s&&(i=i.concat(Object.keys(s).map(o=>{const l=s[o],c=xu(o,l),u=c==="r",d=c==="x";return{options:l,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),pe(i,o=>{const l=o.options,c=l.id,u=xu(c,l),d=de(l.type,o.dtype);(l.position===void 0||ip(l.position,u)!==ip(o.dposition))&&(l.position=o.dposition),r[c]=!0;let h=null;if(c in n&&n[c].type===d)h=n[c];else{const f=Zt.getScale(d);h=new f({id:c,type:d,ctx:this.ctx,chart:this}),n[h.id]=h}h.init(l,e)}),pe(r,(o,l)=>{o||delete n[l]}),pe(n,o=>{Is.configure(this,o,o.options),Is.addBox(this,o)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,n=e.length;if(e.sort((r,i)=>r.index-i.index),n>s){for(let r=s;r<n;++r)this._destroyDatasetMeta(r);e.splice(s,n-s)}this._sortedMetasets=e.slice(0).sort(op("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((n,r)=>{s.filter(i=>i===n._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=s.length;n<r;n++){const i=s[n];let o=this.getDatasetMeta(n);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=l,o.indexAxis=i.indexAxis||gu(l,this.options),o.order=i.order||0,o.index=n,o.label=""+i.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const c=Zt.getController(l),{datasetElementType:u,dataElementType:d}=Te.datasets[l];Object.assign(c,{dataElementType:Zt.getElement(d),datasetElementType:u&&Zt.getElement(u)}),o.controller=new c(this,n),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){pe(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:h}=this.getDatasetMeta(u),f=!r&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),r||pe(i,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(op("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){pe(this.scales,e=>{Is.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!_f(s,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of s){const o=n==="_removeElements"?-i:i;t2(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,n=i=>new Set(e.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),r=n(0);for(let i=1;i<s;i++)if(!_f(r,n(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Is.update(this,this.width,this.height,e);const s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],pe(this.boxes,r=>{n&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,Js(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(n.controller._update(s),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ls.has(this)?this.attached&&!ls.running(this)&&ls.start(this):(this.draw(),ap({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,n=[];let r,i;for(r=0,i=s.length;r<i;++r){const o=s[r];(!e||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=J0(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(r&&al(s,r),e.controller.draw(),r&&ll(s),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return ys(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,n,r){const i=Zj.modes[s];return typeof i=="function"?i(this,e,n,r):[]}getDatasetMeta(e){const s=this.data.datasets[e],n=this._metasets;let r=n.filter(i=>i&&i._dataset===s).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=rn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(e,s){const n=this.getDatasetMeta(e);n.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,r);Ta(s)?(i.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),o.update(i,{visible:n}),this.update(l=>l.datasetIndex===e?r:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),ls.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Af(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete Qo[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,n=(i,o)=>{s.addEventListener(this,i,o),e[i]=o},r=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};pe(this.options.events,i=>n(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,n=(c,u)=>{s.addEventListener(this,c,u),e[c]=u},r=(c,u)=>{e[c]&&(s.removeEventListener(this,c,u),delete e[c])},i=(c,u)=>{this.canvas&&this.resize(c,u)};let o;const l=()=>{r("attach",l),this.attached=!0,this.resize(),n("resize",i),n("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",l)},s.isAttached(this.canvas)?l():o()}unbindEvents(){pe(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},pe(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,n){const r=n?"set":"remove";let i,o,l,c;for(s==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){o=e[l];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],n=e.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!Pa(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(e,s,n){return this._plugins.notify(this,e,s,n)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,n){const r=this.options.hover,i=(c,u)=>c.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),o=i(s,e),l=n?e:i(e,s);o.length&&this.updateHoverStyle(o,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(e,s){const n={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,r)===!1)return;const i=this._handleEvent(e,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,s,n){const{_active:r=[],options:i}=this,o=s,l=this._getActiveElements(e,r,n,o),c=g1(e),u=s2(e,this._lastEvent,n,c);n&&(this._lastEvent=null,ye(i.onHover,[e,l,this],this),c&&ye(i.onClick,[e,l,this],this));const d=!Pa(l,r);return(d||s)&&(this._active=l,this._updateHoverStyles(l,r,s)),this._lastEvent=u,d}_getActiveElements(e,s,n,r){if(e.type==="mouseout")return[];if(!n)return s;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}},ie(Cs,"defaults",Te),ie(Cs,"instances",Qo),ie(Cs,"overrides",On),ie(Cs,"registry",Zt),ie(Cs,"version",Xk),ie(Cs,"getChart",lp),Cs);function cp(){return pe(ul.instances,t=>t._plugins.invalidate())}function cx(t,e,s=e){t.lineCap=de(s.borderCapStyle,e.borderCapStyle),t.setLineDash(de(s.borderDash,e.borderDash)),t.lineDashOffset=de(s.borderDashOffset,e.borderDashOffset),t.lineJoin=de(s.borderJoinStyle,e.borderJoinStyle),t.lineWidth=de(s.borderWidth,e.borderWidth),t.strokeStyle=de(s.borderColor,e.borderColor)}function n2(t,e,s){t.lineTo(s.x,s.y)}function r2(t){return t.stepped?U1:t.tension||t.cubicInterpolationMode==="monotone"?W1:n2}function ux(t,e,s={}){const n=t.length,{start:r=0,end:i=n-1}=s,{start:o,end:l}=e,c=Math.max(r,o),u=Math.min(i,l),d=r<o&&i<o||r>l&&i>l;return{count:n,start:c,loop:e.loop,ilen:u<c&&!d?n+u-c:u-c}}function i2(t,e,s,n){const{points:r,options:i}=e,{count:o,start:l,loop:c,ilen:u}=ux(r,s,n),d=r2(i);let{move:h=!0,reverse:f}=n||{},p,m,v;for(p=0;p<=u;++p)m=r[(l+(f?u-p:p))%o],!m.skip&&(h?(t.moveTo(m.x,m.y),h=!1):d(t,v,m,f,i.stepped),v=m);return c&&(m=r[(l+(f?u:0))%o],d(t,v,m,f,i.stepped)),!!c}function o2(t,e,s,n){const r=e.points,{count:i,start:o,ilen:l}=ux(r,s,n),{move:c=!0,reverse:u}=n||{};let d=0,h=0,f,p,m,v,b,g;const x=w=>(o+(u?l-w:w))%i,y=()=>{v!==b&&(t.lineTo(d,b),t.lineTo(d,v),t.lineTo(d,g))};for(c&&(p=r[x(0)],t.moveTo(p.x,p.y)),f=0;f<=l;++f){if(p=r[x(f)],p.skip)continue;const w=p.x,k=p.y,E=w|0;E===m?(k<v?v=k:k>b&&(b=k),d=(h*d+w)/++h):(y(),t.lineTo(w,k),m=E,h=0,v=b=k),g=k}y()}function yu(t){const e=t.options,s=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!s?o2:i2}function a2(t){return t.stepped?jj:t.tension||t.cubicInterpolationMode==="monotone"?kj:xn}function l2(t,e,s,n){let r=e._path;r||(r=e._path=new Path2D,e.path(r,s,n)&&r.closePath()),cx(t,e.options),t.stroke(r)}function c2(t,e,s,n){const{segments:r,options:i}=e,o=yu(e);for(const l of r)cx(t,i,l.style),t.beginPath(),o(t,e,l,{start:s,end:s+n-1})&&t.closePath(),t.stroke()}const u2=typeof Path2D=="function";function d2(t,e,s,n){u2&&!e.options.segment?l2(t,e,s,n):c2(t,e,s,n)}class Bs extends Xs{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,s){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;mj(this._points,n,e,r,s),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Tj(this,this.options.segment))}first(){const e=this.segments,s=this.points;return e.length&&s[e[0].start]}last(){const e=this.segments,s=this.points,n=e.length;return n&&s[e[n-1].end]}interpolate(e,s){const n=this.options,r=e[s],i=this.points,o=Q0(this,{property:s,start:r,end:r});if(!o.length)return;const l=[],c=a2(n);let u,d;for(u=0,d=o.length;u<d;++u){const{start:h,end:f}=o[u],p=i[h],m=i[f];if(p===m){l.push(p);continue}const v=Math.abs((r-p[s])/(m[s]-p[s])),b=c(p,m,v,n.stepped);b[s]=e[s],l.push(b)}return l.length===1?l[0]:l}pathSegment(e,s,n){return yu(this)(e,this,s,n)}path(e,s,n){const r=this.segments,i=yu(this);let o=this._loop;s=s||0,n=n||this.points.length-s;for(const l of r)o&=i(e,this,l,{start:s,end:s+n-1});return!!o}draw(e,s,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),d2(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ie(Bs,"id","line"),ie(Bs,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ie(Bs,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ie(Bs,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function up(t,e,s,n){const r=t.options,{[s]:i}=t.getProps([s],n);return Math.abs(e-i)<r.radius+r.hitRadius}class Jo extends Xs{constructor(s){super();ie(this,"parsed");ie(this,"skip");ie(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,s&&Object.assign(this,s)}inRange(s,n,r){const i=this.options,{x:o,y:l}=this.getProps(["x","y"],r);return Math.pow(s-o,2)+Math.pow(n-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(s,n){return up(this,s,"x",n)}inYRange(s,n){return up(this,s,"y",n)}getCenterPoint(s){const{x:n,y:r}=this.getProps(["x","y"],s);return{x:n,y:r}}size(s){s=s||this.options||{};let n=s.radius||0;n=Math.max(n,n&&s.hoverRadius||0);const r=n&&s.borderWidth||0;return(n+r)*2}draw(s,n){const r=this.options;this.skip||r.radius<.1||!ys(this,n,this.size(r)/2)||(s.strokeStyle=r.borderColor,s.lineWidth=r.borderWidth,s.fillStyle=r.backgroundColor,mu(s,r,this.x,this.y))}getRange(){const s=this.options||{};return s.radius+s.hitRadius}}ie(Jo,"id","point"),ie(Jo,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ie(Jo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function h2(t,e,s){const n=t.segments,r=t.points,i=e.points,o=[];for(const l of n){let{start:c,end:u}=l;u=dl(c,u,r);const d=vu(s,r[c],r[u],l.loop);if(!e.segments){o.push({source:l,target:d,start:r[c],end:r[u]});continue}const h=Q0(e,d);for(const f of h){const p=vu(s,i[f.start],i[f.end],f.loop),m=G0(l,r,p);for(const v of m)o.push({source:v,target:f,start:{[s]:dp(d,p,"start",Math.max)},end:{[s]:dp(d,p,"end",Math.min)}})}}return o}function vu(t,e,s,n){if(n)return;let r=e[t],i=s[t];return t==="angle"&&(r=xt(r),i=xt(i)),{property:t,start:r,end:i}}function f2(t,e){const{x:s=null,y:n=null}=t||{},r=e.points,i=[];return e.segments.forEach(({start:o,end:l})=>{l=dl(o,l,r);const c=r[o],u=r[l];n!==null?(i.push({x:c.x,y:n}),i.push({x:u.x,y:n})):s!==null&&(i.push({x:s,y:c.y}),i.push({x:s,y:u.y}))}),i}function dl(t,e,s){for(;e>t;e--){const n=s[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function dp(t,e,s,n){return t&&e?n(t[s],e[s]):t?t[s]:e?e[s]:0}function dx(t,e){let s=[],n=!1;return Ee(t)?(n=!0,s=t):s=f2(t,e),s.length?new Bs({points:s,options:{tension:0},_loop:n,_fullLoop:n}):null}function hp(t){return t&&t.fill!==!1}function p2(t,e,s){let r=t[e].fill;const i=[e];let o;if(!s)return r;for(;r!==!1&&i.indexOf(r)===-1;){if(!Xe(r))return r;if(o=t[r],!o)return!1;if(o.visible)return r;i.push(r),r=o.fill}return!1}function m2(t,e,s){const n=v2(t);if(he(n))return isNaN(n.value)?!1:n;let r=parseFloat(n);return Xe(r)&&Math.floor(r)===r?g2(n[0],e,r,s):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function g2(t,e,s,n){return(t==="-"||t==="+")&&(s=e+s),s===e||s<0||s>=n?!1:s}function x2(t,e){let s=null;return t==="start"?s=e.bottom:t==="end"?s=e.top:he(t)?s=e.getPixelForValue(t.value):e.getBasePixel&&(s=e.getBasePixel()),s}function y2(t,e,s){let n;return t==="start"?n=s:t==="end"?n=e.options.reverse?e.min:e.max:he(t)?n=t.value:n=e.getBaseValue(),n}function v2(t){const e=t.options,s=e.fill;let n=de(s&&s.target,s);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function b2(t){const{scale:e,index:s,line:n}=t,r=[],i=n.segments,o=n.points,l=w2(e,s);l.push(dx({x:null,y:e.bottom},n));for(let c=0;c<i.length;c++){const u=i[c];for(let d=u.start;d<=u.end;d++)_2(r,o[d],l)}return new Bs({points:r,options:{}})}function w2(t,e){const s=[],n=t.getMatchingVisibleMetas("line");for(let r=0;r<n.length;r++){const i=n[r];if(i.index===e)break;i.hidden||s.unshift(i.dataset)}return s}function _2(t,e,s){const n=[];for(let r=0;r<s.length;r++){const i=s[r],{first:o,last:l,point:c}=j2(i,e,"x");if(!(!c||o&&l)){if(o)n.unshift(c);else if(t.push(c),!l)break}}t.push(...n)}function j2(t,e,s){const n=t.interpolate(e,s);if(!n)return{};const r=n[s],i=t.segments,o=t.points;let l=!1,c=!1;for(let u=0;u<i.length;u++){const d=i[u],h=o[d.start][s],f=o[d.end][s];if(rr(r,h,f)){l=r===h,c=r===f;break}}return{first:l,last:c,point:n}}class hx{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,s,n){const{x:r,y:i,radius:o}=this;return s=s||{start:0,end:wt},e.arc(r,i,o,s.end,s.start,!0),!n.bounds}interpolate(e){const{x:s,y:n,radius:r}=this,i=e.angle;return{x:s+Math.cos(i)*r,y:n+Math.sin(i)*r,angle:i}}}function k2(t){const{chart:e,fill:s,line:n}=t;if(Xe(s))return S2(e,s);if(s==="stack")return b2(t);if(s==="shape")return!0;const r=N2(t);return r instanceof hx?r:dx(r,n)}function S2(t,e){const s=t.getDatasetMeta(e);return s&&t.isDatasetVisible(e)?s.dataset:null}function N2(t){return(t.scale||{}).getPointPositionForValue?P2(t):C2(t)}function C2(t){const{scale:e={},fill:s}=t,n=x2(s,e);if(Xe(n)){const r=e.isHorizontal();return{x:r?n:null,y:r?null:n}}return null}function P2(t){const{scale:e,fill:s}=t,n=e.options,r=e.getLabels().length,i=n.reverse?e.max:e.min,o=y2(s,e,i),l=[];if(n.grid.circular){const c=e.getPointPositionForValue(0,i);return new hx({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<r;++c)l.push(e.getPointPositionForValue(c,o));return l}function sc(t,e,s){const n=k2(e),{chart:r,index:i,line:o,scale:l,axis:c}=e,u=o.options,d=u.fill,h=u.backgroundColor,{above:f=h,below:p=h}=d||{},m=r.getDatasetMeta(i),v=J0(r,m);n&&o.points.length&&(al(t,s),E2(t,{line:o,target:n,above:f,below:p,area:s,scale:l,axis:c,clip:v}),ll(t))}function E2(t,e){const{line:s,target:n,above:r,below:i,area:o,scale:l,clip:c}=e,u=s._loop?"angle":e.axis;t.save();let d=i;i!==r&&(u==="x"?(fp(t,n,o.top),nc(t,{line:s,target:n,color:r,scale:l,property:u,clip:c}),t.restore(),t.save(),fp(t,n,o.bottom)):u==="y"&&(pp(t,n,o.left),nc(t,{line:s,target:n,color:i,scale:l,property:u,clip:c}),t.restore(),t.save(),pp(t,n,o.right),d=r)),nc(t,{line:s,target:n,color:d,scale:l,property:u,clip:c}),t.restore()}function fp(t,e,s){const{segments:n,points:r}=e;let i=!0,o=!1;t.beginPath();for(const l of n){const{start:c,end:u}=l,d=r[c],h=r[dl(c,u,r)];i?(t.moveTo(d.x,d.y),i=!1):(t.lineTo(d.x,s),t.lineTo(d.x,d.y)),o=!!e.pathSegment(t,l,{move:o}),o?t.closePath():t.lineTo(h.x,s)}t.lineTo(e.first().x,s),t.closePath(),t.clip()}function pp(t,e,s){const{segments:n,points:r}=e;let i=!0,o=!1;t.beginPath();for(const l of n){const{start:c,end:u}=l,d=r[c],h=r[dl(c,u,r)];i?(t.moveTo(d.x,d.y),i=!1):(t.lineTo(s,d.y),t.lineTo(d.x,d.y)),o=!!e.pathSegment(t,l,{move:o}),o?t.closePath():t.lineTo(s,h.y)}t.lineTo(s,e.first().y),t.closePath(),t.clip()}function nc(t,e){const{line:s,target:n,property:r,color:i,scale:o,clip:l}=e,c=h2(s,n,r);for(const{source:u,target:d,start:h,end:f}of c){const{style:{backgroundColor:p=i}={}}=u,m=n!==!0;t.save(),t.fillStyle=p,T2(t,o,l,m&&vu(r,h,f)),t.beginPath();const v=!!s.pathSegment(t,u);let b;if(m){v?t.closePath():mp(t,n,f,r);const g=!!n.pathSegment(t,d,{move:v,reverse:!0});b=v&&g,b||mp(t,n,h,r)}t.closePath(),t.fill(b?"evenodd":"nonzero"),t.restore()}}function T2(t,e,s,n){const r=e.chart.chartArea,{property:i,start:o,end:l}=n||{};if(i==="x"||i==="y"){let c,u,d,h;i==="x"?(c=o,u=r.top,d=l,h=r.bottom):(c=r.left,u=o,d=r.right,h=l),t.beginPath(),s&&(c=Math.max(c,s.left),d=Math.min(d,s.right),u=Math.max(u,s.top),h=Math.min(h,s.bottom)),t.rect(c,u,d-c,h-u),t.clip()}}function mp(t,e,s,n){const r=e.interpolate(s,n);r&&t.lineTo(r.x,r.y)}var A2={id:"filler",afterDatasetsUpdate(t,e,s){const n=(t.data.datasets||[]).length,r=[];let i,o,l,c;for(o=0;o<n;++o)i=t.getDatasetMeta(o),l=i.dataset,c=null,l&&l.options&&l instanceof Bs&&(c={visible:t.isDatasetVisible(o),index:o,fill:m2(l,o,n),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:l}),i.$filler=c,r.push(c);for(o=0;o<n;++o)c=r[o],!(!c||c.fill===!1)&&(c.fill=p2(r,o,s.propagate))},beforeDraw(t,e,s){const n=s.drawTime==="beforeDraw",r=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=r.length-1;o>=0;--o){const l=r[o].$filler;l&&(l.line.updateControlPoints(i,l.axis),n&&l.fill&&sc(t.ctx,l,i))}},beforeDatasetsDraw(t,e,s){if(s.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r){const i=n[r].$filler;hp(i)&&sc(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,s){const n=e.meta.$filler;!hp(n)||s.drawTime!=="beforeDatasetDraw"||sc(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const gp=(t,e)=>{let{boxHeight:s=e,boxWidth:n=e}=t;return t.usePointStyle&&(s=Math.min(s,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(e,s)}},O2=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class xp extends Xs{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,n){this.maxWidth=e,this.maxHeight=s,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=ye(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(n=>e.filter(n,this.chart.data))),e.sort&&(s=s.sort((n,r)=>e.sort(n,r,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,r=We(n.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=gp(n,i);let u,d;s.font=r.string,this.isHorizontal()?(u=this.maxWidth,d=this._fitRows(o,i,l,c)+10):(d=this.maxHeight,u=this._fitCols(o,r,l,c)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,s,n,r){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],d=r+l;let h=e;i.textAlign="left",i.textBaseline="middle";let f=-1,p=-d;return this.legendItems.forEach((m,v)=>{const b=n+s/2+i.measureText(m.text).width;(v===0||u[u.length-1]+b+2*l>o)&&(h+=d,u[u.length-(v>0?0:1)]=0,p+=d,f++),c[v]={left:0,top:p,row:f,width:b,height:r},u[u.length-1]+=b+l}),h}_fitCols(e,s,n,r){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],d=o-e;let h=l,f=0,p=0,m=0,v=0;return this.legendItems.forEach((b,g)=>{const{itemWidth:x,itemHeight:y}=R2(n,s,i,b,r);g>0&&p+y+2*l>d&&(h+=f+l,u.push({width:f,height:p}),m+=f+l,v++,f=p=0),c[g]={left:m,top:p,col:v,width:x,height:y},f=Math.max(f,x),p+=y+l}),h+=f,u.push({width:f,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:n,labels:{padding:r},rtl:i}}=this,o=hr(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=mt(n,this.left+r,this.right-this.lineWidths[l]);for(const u of s)l!==u.row&&(l=u.row,c=mt(n,this.left+r,this.right-this.lineWidths[l])),u.top+=this.top+e+r,u.left=o.leftForLtr(o.x(c),u.width),c+=u.width+r}else{let l=0,c=mt(n,this.top+e+r,this.bottom-this.columnSizes[l].height);for(const u of s)u.col!==l&&(l=u.col,c=mt(n,this.top+e+r,this.bottom-this.columnSizes[l].height)),u.top=c,u.left+=this.left+r,u.left=o.leftForLtr(o.x(u.left),u.width),c+=u.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;al(e,this),this._draw(),ll(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:n,ctx:r}=this,{align:i,labels:o}=e,l=Te.color,c=hr(e.rtl,this.left,this.width),u=We(o.font),{padding:d}=o,h=u.size,f=h/2;let p;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=u.string;const{boxWidth:m,boxHeight:v,itemHeight:b}=gp(o,h),g=function(E,P,R){if(isNaN(m)||m<=0||isNaN(v)||v<0)return;r.save();const S=de(R.lineWidth,1);if(r.fillStyle=de(R.fillStyle,l),r.lineCap=de(R.lineCap,"butt"),r.lineDashOffset=de(R.lineDashOffset,0),r.lineJoin=de(R.lineJoin,"miter"),r.lineWidth=S,r.strokeStyle=de(R.strokeStyle,l),r.setLineDash(de(R.lineDash,[])),o.usePointStyle){const L={radius:v*Math.SQRT2/2,pointStyle:R.pointStyle,rotation:R.rotation,borderWidth:S},_=c.xPlus(E,m/2),I=P+f;z0(r,L,_,I,o.pointStyleWidth&&m)}else{const L=P+Math.max((h-v)/2,0),_=c.leftForLtr(E,m),I=dr(R.borderRadius);r.beginPath(),Object.values(I).some(Q=>Q!==0)?Ma(r,{x:_,y:L,w:m,h:v,radius:I}):r.rect(_,L,m,v),r.fill(),S!==0&&r.stroke()}r.restore()},x=function(E,P,R){jr(r,R.text,E,P+b/2,u,{strikethrough:R.hidden,textAlign:c.textAlign(R.textAlign)})},y=this.isHorizontal(),w=this._computeTitleHeight();y?p={x:mt(i,this.left+d,this.right-n[0]),y:this.top+d+w,line:0}:p={x:this.left+d,y:mt(i,this.top+w+d,this.bottom-s[0].height),line:0},q0(this.ctx,e.textDirection);const k=b+d;this.legendItems.forEach((E,P)=>{r.strokeStyle=E.fontColor,r.fillStyle=E.fontColor;const R=r.measureText(E.text).width,S=c.textAlign(E.textAlign||(E.textAlign=o.textAlign)),L=m+f+R;let _=p.x,I=p.y;c.setWidth(this.width),y?P>0&&_+L+d>this.right&&(I=p.y+=k,p.line++,_=p.x=mt(i,this.left+d,this.right-n[p.line])):P>0&&I+k>this.bottom&&(_=p.x=_+s[p.line].width+d,p.line++,I=p.y=mt(i,this.top+w+d,this.bottom-s[p.line].height));const Q=c.x(_);if(g(Q,I,E),_=A1(S,_+m+f,y?_+L:this.right,e.rtl),x(c.x(_),I,E),y)p.x+=L+d;else if(typeof E.text!="string"){const se=u.lineHeight;p.y+=fx(E,se)+d}else p.y+=k}),K0(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,n=We(s.font),r=nt(s.padding);if(!s.display)return;const i=hr(e.rtl,this.left,this.width),o=this.ctx,l=s.position,c=n.size/2,u=r.top+c;let d,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),d=this.top+u,h=mt(e.align,h,this.right-f);else{const m=this.columnSizes.reduce((v,b)=>Math.max(v,b.height),0);d=u+mt(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const p=mt(l,h,h+f);o.textAlign=i.textAlign(L0(l)),o.textBaseline="middle",o.strokeStyle=s.color,o.fillStyle=s.color,o.font=n.string,jr(o,s.text,p,d,n)}_computeTitleHeight(){const e=this.options.title,s=We(e.font),n=nt(e.padding);return e.display?s.lineHeight+n.height:0}_getLegendItemAt(e,s){let n,r,i;if(rr(e,this.left,this.right)&&rr(s,this.top,this.bottom)){for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],rr(e,r.left,r.left+r.width)&&rr(s,r.top,r.top+r.height))return this.legendItems[n]}return null}handleEvent(e){const s=this.options;if(!D2(e.type,s))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,i=O2(r,n);r&&!i&&ye(s.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!i&&ye(s.onHover,[e,n,this],this)}else n&&ye(s.onClick,[e,n,this],this)}}function R2(t,e,s,n,r){const i=M2(n,t,e,s),o=L2(r,n,e.lineHeight);return{itemWidth:i,itemHeight:o}}function M2(t,e,s,n){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),e+s.size/2+n.measureText(r).width}function L2(t,e,s){let n=t;return typeof e.text!="string"&&(n=fx(e,s)),n}function fx(t,e){const s=t.text?t.text.length:0;return e*s}function D2(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var I2={id:"legend",_element:xp,start(t,e,s){const n=t.legend=new xp({ctx:t.ctx,options:s,chart:t});Is.configure(t,n,s),Is.addBox(t,n)},stop(t){Is.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,s){const n=t.legend;Is.configure(t,n,s),n.options=s},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,s){const n=e.datasetIndex,r=s.chart;r.isDatasetVisible(n)?(r.hide(n),e.hidden=!0):(r.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:r,color:i,useBorderRadius:o,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const u=c.controller.getStyle(s?0:void 0),d=nt(u.borderWidth);return{text:e[c.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:u.borderColor,pointStyle:n||u.pointStyle,rotation:u.rotation,textAlign:r||u.textAlign,borderRadius:o&&(l||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const ti={average(t){if(!t.length)return!1;let e,s,n=new Set,r=0,i=0;for(e=0,s=t.length;e<s;++e){const l=t[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();n.add(c.x),r+=c.y,++i}}return i===0||n.size===0?!1:{x:[...n].reduce((l,c)=>l+c)/n.size,y:r/i}},nearest(t,e){if(!t.length)return!1;let s=e.x,n=e.y,r=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=t.length;i<o;++i){const c=t[i].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),d=hu(e,u);d<r&&(r=d,l=c)}}if(l){const c=l.tooltipPosition();s=c.x,n=c.y}return{x:s,y:n}}};function Jt(t,e){return e&&(Ee(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function cs(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function B2(t,e){const{element:s,datasetIndex:n,index:r}=e,i=t.getDatasetMeta(n).controller,{label:o,value:l}=i.getLabelAndValue(r);return{chart:t,label:o,parsed:i.getParsed(r),raw:t.data.datasets[n].data[r],formattedValue:l,dataset:i.getDataset(),dataIndex:r,datasetIndex:n,element:s}}function yp(t,e){const s=t.chart.ctx,{body:n,footer:r,title:i}=t,{boxWidth:o,boxHeight:l}=e,c=We(e.bodyFont),u=We(e.titleFont),d=We(e.footerFont),h=i.length,f=r.length,p=n.length,m=nt(e.padding);let v=m.height,b=0,g=n.reduce((w,k)=>w+k.before.length+k.lines.length+k.after.length,0);if(g+=t.beforeBody.length+t.afterBody.length,h&&(v+=h*u.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),g){const w=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;v+=p*w+(g-p)*c.lineHeight+(g-1)*e.bodySpacing}f&&(v+=e.footerMarginTop+f*d.lineHeight+(f-1)*e.footerSpacing);let x=0;const y=function(w){b=Math.max(b,s.measureText(w).width+x)};return s.save(),s.font=u.string,pe(t.title,y),s.font=c.string,pe(t.beforeBody.concat(t.afterBody),y),x=e.displayColors?o+2+e.boxPadding:0,pe(n,w=>{pe(w.before,y),pe(w.lines,y),pe(w.after,y)}),x=0,s.font=d.string,pe(t.footer,y),s.restore(),b+=m.width,{width:b,height:v}}function z2(t,e){const{y:s,height:n}=e;return s<n/2?"top":s>t.height-n/2?"bottom":"center"}function $2(t,e,s,n){const{x:r,width:i}=n,o=s.caretSize+s.caretPadding;if(t==="left"&&r+i+o>e.width||t==="right"&&r-i-o<0)return!0}function F2(t,e,s,n){const{x:r,width:i}=s,{width:o,chartArea:{left:l,right:c}}=t;let u="center";return n==="center"?u=r<=(l+c)/2?"left":"right":r<=i/2?u="left":r>=o-i/2&&(u="right"),$2(u,t,e,s)&&(u="center"),u}function vp(t,e,s){const n=s.yAlign||e.yAlign||z2(t,s);return{xAlign:s.xAlign||e.xAlign||F2(t,e,s,n),yAlign:n}}function U2(t,e){let{x:s,width:n}=t;return e==="right"?s-=n:e==="center"&&(s-=n/2),s}function W2(t,e,s){let{y:n,height:r}=t;return e==="top"?n+=s:e==="bottom"?n-=r+s:n-=r/2,n}function bp(t,e,s,n){const{caretSize:r,caretPadding:i,cornerRadius:o}=t,{xAlign:l,yAlign:c}=s,u=r+i,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:p}=dr(o);let m=U2(e,l);const v=W2(e,c,u);return c==="center"?l==="left"?m+=u:l==="right"&&(m-=u):l==="left"?m-=Math.max(d,f)+r:l==="right"&&(m+=Math.max(h,p)+r),{x:xs(m,0,n.width-e.width),y:xs(v,0,n.height-e.height)}}function Mo(t,e,s){const n=nt(s.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function wp(t){return Jt([],cs(t))}function H2(t,e,s){return rn(t,{tooltip:e,tooltipItems:s,type:"tooltip"})}function _p(t,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?t.override(s):t}const px={beforeTitle:os,title(t){if(t.length>0){const e=t[0],s=e.chart.data.labels,n=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return s[e.dataIndex]}return""},afterTitle:os,beforeBody:os,beforeLabel:os,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const s=t.formattedValue;return _e(s)||(e+=s),e},labelColor(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:os,afterBody:os,beforeFooter:os,footer:os,afterFooter:os};function at(t,e,s,n){const r=t[e].call(s,n);return typeof r>"u"?px[e].call(s,n):r}class bu extends Xs{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&s.options.animation&&n.animations,i=new X0(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=H2(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:n}=s,r=at(n,"beforeTitle",this,e),i=at(n,"title",this,e),o=at(n,"afterTitle",this,e);let l=[];return l=Jt(l,cs(r)),l=Jt(l,cs(i)),l=Jt(l,cs(o)),l}getBeforeBody(e,s){return wp(at(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:n}=s,r=[];return pe(e,i=>{const o={before:[],lines:[],after:[]},l=_p(n,i);Jt(o.before,cs(at(l,"beforeLabel",this,i))),Jt(o.lines,at(l,"label",this,i)),Jt(o.after,cs(at(l,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(e,s){return wp(at(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:n}=s,r=at(n,"beforeFooter",this,e),i=at(n,"footer",this,e),o=at(n,"afterFooter",this,e);let l=[];return l=Jt(l,cs(r)),l=Jt(l,cs(i)),l=Jt(l,cs(o)),l}_createItems(e){const s=this._active,n=this.chart.data,r=[],i=[],o=[];let l=[],c,u;for(c=0,u=s.length;c<u;++c)l.push(B2(this.chart,s[c]));return e.filter&&(l=l.filter((d,h,f)=>e.filter(d,h,f,n))),e.itemSort&&(l=l.sort((d,h)=>e.itemSort(d,h,n))),pe(l,d=>{const h=_p(e.callbacks,d);r.push(at(h,"labelColor",this,d)),i.push(at(h,"labelPointStyle",this,d)),o.push(at(h,"labelTextColor",this,d))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(e,s){const n=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const l=ti[n.position].call(this,r,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const c=this._size=yp(this,n),u=Object.assign({},l,c),d=vp(this.chart,n,u),h=bp(n,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,n,r){const i=this.getCaretPosition(e,n,r);s.lineTo(i.x1,i.y1),s.lineTo(i.x2,i.y2),s.lineTo(i.x3,i.y3)}getCaretPosition(e,s,n){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:l}=n,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:h}=dr(l),{x:f,y:p}=e,{width:m,height:v}=s;let b,g,x,y,w,k;return i==="center"?(w=p+v/2,r==="left"?(b=f,g=b-o,y=w+o,k=w-o):(b=f+m,g=b+o,y=w-o,k=w+o),x=b):(r==="left"?g=f+Math.max(c,d)+o:r==="right"?g=f+m-Math.max(u,h)-o:g=this.caretX,i==="top"?(y=p,w=y-o,b=g-o,x=g+o):(y=p+v,w=y+o,b=g+o,x=g-o),k=y),{x1:b,x2:g,x3:x,y1:y,y2:w,y3:k}}drawTitle(e,s,n){const r=this.title,i=r.length;let o,l,c;if(i){const u=hr(n.rtl,this.x,this.width);for(e.x=Mo(this,n.titleAlign,n),s.textAlign=u.textAlign(n.titleAlign),s.textBaseline="middle",o=We(n.titleFont),l=n.titleSpacing,s.fillStyle=n.titleColor,s.font=o.string,c=0;c<i;++c)s.fillText(r[c],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,c+1===i&&(e.y+=n.titleMarginBottom-l)}}_drawColorBox(e,s,n,r,i){const o=this.labelColors[n],l=this.labelPointStyles[n],{boxHeight:c,boxWidth:u}=i,d=We(i.bodyFont),h=Mo(this,"left",i),f=r.x(h),p=c<d.lineHeight?(d.lineHeight-c)/2:0,m=s.y+p;if(i.usePointStyle){const v={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},b=r.leftForLtr(f,u)+u/2,g=m+c/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,mu(e,v,b,g),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,mu(e,v,b,g)}else{e.lineWidth=he(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const v=r.leftForLtr(f,u),b=r.leftForLtr(r.xPlus(f,1),u-2),g=dr(o.borderRadius);Object.values(g).some(x=>x!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Ma(e,{x:v,y:m,w:u,h:c,radius:g}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Ma(e,{x:b,y:m+1,w:u-2,h:c-2,radius:g}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(v,m,u,c),e.strokeRect(v,m,u,c),e.fillStyle=o.backgroundColor,e.fillRect(b,m+1,u-2,c-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,s,n){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:d}=n,h=We(n.bodyFont);let f=h.lineHeight,p=0;const m=hr(n.rtl,this.x,this.width),v=function(R){s.fillText(R,m.x(e.x+p),e.y+f/2),e.y+=f+i},b=m.textAlign(o);let g,x,y,w,k,E,P;for(s.textAlign=o,s.textBaseline="middle",s.font=h.string,e.x=Mo(this,b,n),s.fillStyle=n.bodyColor,pe(this.beforeBody,v),p=l&&b!=="right"?o==="center"?u/2+d:u+2+d:0,w=0,E=r.length;w<E;++w){for(g=r[w],x=this.labelTextColors[w],s.fillStyle=x,pe(g.before,v),y=g.lines,l&&y.length&&(this._drawColorBox(s,e,w,m,n),f=Math.max(h.lineHeight,c)),k=0,P=y.length;k<P;++k)v(y[k]),f=h.lineHeight;pe(g.after,v)}p=0,f=h.lineHeight,pe(this.afterBody,v),e.y-=i}drawFooter(e,s,n){const r=this.footer,i=r.length;let o,l;if(i){const c=hr(n.rtl,this.x,this.width);for(e.x=Mo(this,n.footerAlign,n),e.y+=n.footerMarginTop,s.textAlign=c.textAlign(n.footerAlign),s.textBaseline="middle",o=We(n.footerFont),s.fillStyle=n.footerColor,s.font=o.string,l=0;l<i;++l)s.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+n.footerSpacing}}drawBackground(e,s,n,r){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=e,{width:u,height:d}=n,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:m}=dr(r.cornerRadius);s.fillStyle=r.backgroundColor,s.strokeStyle=r.borderColor,s.lineWidth=r.borderWidth,s.beginPath(),s.moveTo(l+h,c),o==="top"&&this.drawCaret(e,s,n,r),s.lineTo(l+u-f,c),s.quadraticCurveTo(l+u,c,l+u,c+f),o==="center"&&i==="right"&&this.drawCaret(e,s,n,r),s.lineTo(l+u,c+d-m),s.quadraticCurveTo(l+u,c+d,l+u-m,c+d),o==="bottom"&&this.drawCaret(e,s,n,r),s.lineTo(l+p,c+d),s.quadraticCurveTo(l,c+d,l,c+d-p),o==="center"&&i==="left"&&this.drawCaret(e,s,n,r),s.lineTo(l,c+h),s.quadraticCurveTo(l,c,l+h,c),s.closePath(),s.fill(),r.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const o=ti[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=yp(this,e),c=Object.assign({},o,this._size),u=vp(s,e,c),d=bp(e,c,u,s);(r._to!==d.x||i._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(s);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=nt(s.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&l&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,s),q0(e,s.textDirection),i.y+=o.top,this.drawTitle(i,e,s),this.drawBody(i,e,s),this.drawFooter(i,e,s),K0(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const n=this._active,r=e.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),i=!Pa(n,r),o=this._positionChanged(r,s);(i||o)&&(this._active=r,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(e,i,s,n),l=this._positionChanged(o,e),c=s||!Pa(o,i)||l;return c&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),c}_getActiveElements(e,s,n,r){const i=this.options;if(e.type==="mouseout")return[];if(!r)return s.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&o.reverse(),o}_positionChanged(e,s){const{caretX:n,caretY:r,options:i}=this,o=ti[i.position].call(this,e,s);return o!==!1&&(n!==o.x||r!==o.y)}}ie(bu,"positioners",ti);var V2={id:"tooltip",_element:bu,positioners:ti,afterInit(t,e,s){s&&(t.tooltip=new bu({chart:t,options:s}))},beforeUpdate(t,e,s){t.tooltip&&t.tooltip.initialize(s)},reset(t,e,s){t.tooltip&&t.tooltip.initialize(s)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",s)}},afterEvent(t,e){if(t.tooltip){const s=e.replay;t.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:px},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function q2(t,e){const s=[],{bounds:r,step:i,min:o,max:l,precision:c,count:u,maxTicks:d,maxDigits:h,includeBounds:f}=t,p=i||1,m=d-1,{min:v,max:b}=e,g=!_e(o),x=!_e(l),y=!_e(u),w=(b-v)/(h+1);let k=kf((b-v)/m/p)*p,E,P,R,S;if(k<1e-14&&!g&&!x)return[{value:v},{value:b}];S=Math.ceil(b/k)-Math.floor(v/k),S>m&&(k=kf(S*k/m/p)*p),_e(c)||(E=Math.pow(10,c),k=Math.ceil(k*E)/E),r==="ticks"?(P=Math.floor(v/k)*k,R=Math.ceil(b/k)*k):(P=v,R=b),g&&x&&i&&w1((l-o)/i,k/1e3)?(S=Math.round(Math.min((l-o)/k,d)),k=(l-o)/S,P=o,R=l):y?(P=g?o:P,R=x?l:R,S=u-1,k=(R-P)/S):(S=(R-P)/k,gi(S,Math.round(S),k/1e3)?S=Math.round(S):S=Math.ceil(S));const L=Math.max(Sf(k),Sf(P));E=Math.pow(10,_e(c)?L:c),P=Math.round(P*E)/E,R=Math.round(R*E)/E;let _=0;for(g&&(f&&P!==o?(s.push({value:o}),P<o&&_++,gi(Math.round((P+_*k)*E)/E,o,jp(o,w,t))&&_++):P<o&&_++);_<S;++_){const I=Math.round((P+_*k)*E)/E;if(x&&I>l)break;s.push({value:I})}return x&&f&&R!==l?s.length&&gi(s[s.length-1].value,l,jp(l,w,t))?s[s.length-1].value=l:s.push({value:l}):(!x||R===l)&&s.push({value:R}),s}function jp(t,e,{horizontal:s,minRotation:n}){const r=_n(n),i=(s?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class kp extends Zi{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return _e(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const o=c=>r=s?r:c,l=c=>i=n?i:c;if(e){const c=_r(r),u=_r(i);c<0&&u<0?l(0):c>0&&u>0&&o(0)}if(r===i){let c=i===0?1:Math.abs(i*.05);l(i+c),e||o(r-c)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:n}=e,r;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),s=s||11),s&&(r=Math.min(s,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},i=this._range||this,o=q2(r,i);return e.bounds==="ticks"&&_1(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let s=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-s)/Math.max(e.length-1,1)/2;s-=r,n+=r}this._startValue=s,this._endValue=n,this._valueRange=n-s}getLabelForValue(e){return D0(e,this.chart.options.locale,this.options.ticks.format)}}function wu(t){const e=t.ticks;if(e.display&&t.display){const s=nt(e.backdropPadding);return de(e.font&&e.font.size,Te.font.size)+s.height}return 0}function K2(t,e,s){return s=Ee(s)?s:[s],{w:F1(t,e.string,s),h:s.length*e.lineHeight}}function Sp(t,e,s,n,r){return t===n||t===r?{start:e-s/2,end:e+s/2}:t<n||t>r?{start:e-s,end:e}:{start:e,end:e+s}}function Y2(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},s=Object.assign({},e),n=[],r=[],i=t._pointLabels.length,o=t.options.pointLabels,l=o.centerPointLabels?$e/i:0;for(let c=0;c<i;c++){const u=o.setContext(t.getPointLabelContext(c));r[c]=u.padding;const d=t.getPointPosition(c,t.drawingArea+r[c],l),h=We(u.font),f=K2(t.ctx,h,t._pointLabels[c]);n[c]=f;const p=xt(t.getIndexAngle(c)+l),m=Math.round(Cd(p)),v=Sp(m,d.x,f.w,0,180),b=Sp(m,d.y,f.h,90,270);G2(s,e,p,v,b)}t.setCenterPoint(e.l-s.l,s.r-e.r,e.t-s.t,s.b-e.b),t._pointLabelItems=X2(t,n,r)}function G2(t,e,s,n,r){const i=Math.abs(Math.sin(s)),o=Math.abs(Math.cos(s));let l=0,c=0;n.start<e.l?(l=(e.l-n.start)/i,t.l=Math.min(t.l,e.l-l)):n.end>e.r&&(l=(n.end-e.r)/i,t.r=Math.max(t.r,e.r+l)),r.start<e.t?(c=(e.t-r.start)/o,t.t=Math.min(t.t,e.t-c)):r.end>e.b&&(c=(r.end-e.b)/o,t.b=Math.max(t.b,e.b+c))}function Q2(t,e,s){const n=t.drawingArea,{extra:r,additionalAngle:i,padding:o,size:l}=s,c=t.getPointPosition(e,n+r+o,i),u=Math.round(Cd(xt(c.angle+vt))),d=tS(c.y,l.h,u),h=Z2(u),f=eS(c.x,l.w,h);return{visible:!0,x:c.x,y:d,textAlign:h,left:f,top:d,right:f+l.w,bottom:d+l.h}}function J2(t,e){if(!e)return!0;const{left:s,top:n,right:r,bottom:i}=t;return!(ys({x:s,y:n},e)||ys({x:s,y:i},e)||ys({x:r,y:n},e)||ys({x:r,y:i},e))}function X2(t,e,s){const n=[],r=t._pointLabels.length,i=t.options,{centerPointLabels:o,display:l}=i.pointLabels,c={extra:wu(i)/2,additionalAngle:o?$e/r:0};let u;for(let d=0;d<r;d++){c.padding=s[d],c.size=e[d];const h=Q2(t,d,c);n.push(h),l==="auto"&&(h.visible=J2(h,u),h.visible&&(u=h))}return n}function Z2(t){return t===0||t===180?"center":t<180?"left":"right"}function eS(t,e,s){return s==="right"?t-=e:s==="center"&&(t-=e/2),t}function tS(t,e,s){return s===90||s===270?t-=e/2:(s>270||s<90)&&(t-=e),t}function sS(t,e,s){const{left:n,top:r,right:i,bottom:o}=s,{backdropColor:l}=e;if(!_e(l)){const c=dr(e.borderRadius),u=nt(e.backdropPadding);t.fillStyle=l;const d=n-u.left,h=r-u.top,f=i-n+u.width,p=o-r+u.height;Object.values(c).some(m=>m!==0)?(t.beginPath(),Ma(t,{x:d,y:h,w:f,h:p,radius:c}),t.fill()):t.fillRect(d,h,f,p)}}function nS(t,e){const{ctx:s,options:{pointLabels:n}}=t;for(let r=e-1;r>=0;r--){const i=t._pointLabelItems[r];if(!i.visible)continue;const o=n.setContext(t.getPointLabelContext(r));sS(s,o,i);const l=We(o.font),{x:c,y:u,textAlign:d}=i;jr(s,t._pointLabels[r],c,u+l.lineHeight/2,l,{color:o.color,textAlign:d,textBaseline:"middle"})}}function mx(t,e,s,n){const{ctx:r}=t;if(s)r.arc(t.xCenter,t.yCenter,e,0,wt);else{let i=t.getPointPosition(0,e);r.moveTo(i.x,i.y);for(let o=1;o<n;o++)i=t.getPointPosition(o,e),r.lineTo(i.x,i.y)}}function rS(t,e,s,n,r){const i=t.ctx,o=e.circular,{color:l,lineWidth:c}=e;!o&&!n||!l||!c||s<0||(i.save(),i.strokeStyle=l,i.lineWidth=c,i.setLineDash(r.dash||[]),i.lineDashOffset=r.dashOffset,i.beginPath(),mx(t,s,o,n),i.closePath(),i.stroke(),i.restore())}function iS(t,e,s){return rn(t,{label:s,index:e,type:"pointLabel"})}class si extends kp{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=nt(wu(this.options)/2),s=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+s/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(s,n)/2)}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!1);this.min=Xe(e)&&!isNaN(e)?e:0,this.max=Xe(s)&&!isNaN(s)?s:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/wu(this.options))}generateTickLabels(e){kp.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((s,n)=>{const r=ye(this.options.pointLabels.callback,[s,n],this);return r||r===0?r:""}).filter((s,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?Y2(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,s,n,r){this.xCenter+=Math.floor((e-s)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,s,n,r))}getIndexAngle(e){const s=wt/(this._pointLabels.length||1),n=this.options.startAngle||0;return xt(e*s+_n(n))}getDistanceFromCenterForValue(e){if(_e(e))return NaN;const s=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*s:(e-this.min)*s}getValueForDistanceFromCenter(e){if(_e(e))return NaN;const s=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-s:this.min+s}getPointLabelContext(e){const s=this._pointLabels||[];if(e>=0&&e<s.length){const n=s[e];return iS(this.getContext(),e,n)}}getPointPosition(e,s,n=0){const r=this.getIndexAngle(e)-vt+n;return{x:Math.cos(r)*s+this.xCenter,y:Math.sin(r)*s+this.yCenter,angle:r}}getPointPositionForValue(e,s){return this.getPointPosition(e,this.getDistanceFromCenterForValue(s))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:s,top:n,right:r,bottom:i}=this._pointLabelItems[e];return{left:s,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:s}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),mx(this,this.getDistanceFromCenterForValue(this._endValue),s,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,s=this.options,{angleLines:n,grid:r,border:i}=s,o=this._pointLabels.length;let l,c,u;if(s.pointLabels.display&&nS(this,o),r.display&&this.ticks.forEach((d,h)=>{if(h!==0||h===0&&this.min<0){c=this.getDistanceFromCenterForValue(d.value);const f=this.getContext(h),p=r.setContext(f),m=i.setContext(f);rS(this,p,c,o,m)}}),n.display){for(e.save(),l=o-1;l>=0;l--){const d=n.setContext(this.getPointLabelContext(l)),{color:h,lineWidth:f}=d;!f||!h||(e.lineWidth=f,e.strokeStyle=h,e.setLineDash(d.borderDash),e.lineDashOffset=d.borderDashOffset,c=this.getDistanceFromCenterForValue(s.reverse?this.min:this.max),u=this.getPointPosition(l,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(u.x,u.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,s=this.options,n=s.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((l,c)=>{if(c===0&&this.min>=0&&!s.reverse)return;const u=n.setContext(this.getContext(c)),d=We(u.font);if(i=this.getDistanceFromCenterForValue(this.ticks[c].value),u.showLabelBackdrop){e.font=d.string,o=e.measureText(l.label).width,e.fillStyle=u.backdropColor;const h=nt(u.backdropPadding);e.fillRect(-o/2-h.left,-i-d.size/2-h.top,o+h.width,d.size+h.height)}jr(e,l.label,0,-i,d,{color:u.color,strokeColor:u.textStrokeColor,strokeWidth:u.textStrokeWidth})}),e.restore()}drawTitle(){}}ie(si,"id","radialLinear"),ie(si,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:B0.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),ie(si,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),ie(si,"descriptors",{angleLines:{_fallback:"grid"}});const hl={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ut=Object.keys(hl);function Np(t,e){return t-e}function Cp(t,e){if(_e(e))return null;const s=t._adapter,{parser:n,round:r,isoWeekday:i}=t._parseOpts;let o=e;return typeof n=="function"&&(o=n(o)),Xe(o)||(o=typeof n=="string"?s.parse(o,n):s.parse(o)),o===null?null:(r&&(o=r==="week"&&(Oa(i)||i===!0)?s.startOf(o,"isoWeek",i):s.startOf(o,r)),+o)}function Pp(t,e,s,n){const r=ut.length;for(let i=ut.indexOf(t);i<r-1;++i){const o=hl[ut[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((s-e)/(l*o.size))<=n)return ut[i]}return ut[r-1]}function oS(t,e,s,n,r){for(let i=ut.length-1;i>=ut.indexOf(s);i--){const o=ut[i];if(hl[o].common&&t._adapter.diff(r,n,o)>=e-1)return o}return ut[s?ut.indexOf(s):0]}function aS(t){for(let e=ut.indexOf(t)+1,s=ut.length;e<s;++e)if(hl[ut[e]].common)return ut[e]}function Ep(t,e,s){if(!s)t[e]=!0;else if(s.length){const{lo:n,hi:r}=Pd(s,e),i=s[n]>=e?s[n]:s[r];t[i]=!0}}function lS(t,e,s,n){const r=t._adapter,i=+r.startOf(e[0].value,n),o=e[e.length-1].value;let l,c;for(l=i;l<=o;l=+r.add(l,1,n))c=s[l],c>=0&&(e[c].major=!0);return e}function Tp(t,e,s){const n=[],r={},i=e.length;let o,l;for(o=0;o<i;++o)l=e[o],r[l]=o,n.push({value:l,major:!1});return i===0||!s?n:lS(t,n,r,s)}class Ia extends Zi{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const n=e.time||(e.time={}),r=this._adapter=new Yj._date(e.adapters.date);r.init(s),mi(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:Cp(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(u){!o&&!isNaN(u.min)&&(r=Math.min(r,u.min)),!l&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!o||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=Xe(r)&&!isNaN(r)?r:+s.startOf(Date.now(),n),i=Xe(i)&&!isNaN(i)?i:+s.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],n=e[e.length-1]),{min:s,max:n}}buildTicks(){const e=this.options,s=e.time,n=e.ticks,r=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,l=C1(r,i,o);return this._unit=s.unit||(n.autoSkip?Pp(s.minUnit,this.min,this.max,this._getLabelCapacity(i)):oS(this,l.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:aS(this._unit),this.initOffsets(r),e.reverse&&l.reverse(),Tp(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,n=0,r,i;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?s=1-r:s=(this.getDecimalForValue(e[1])-r)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?n=i:n=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;s=xs(s,0,o),n=xs(n,0,o),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const e=this._adapter,s=this.min,n=this.max,r=this.options,i=r.time,o=i.unit||Pp(i.minUnit,s,n,this._getLabelCapacity(s)),l=de(r.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,u=Oa(c)||c===!0,d={};let h=s,f,p;if(u&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,u?"day":o),e.diff(n,s,o)>1e5*l)throw new Error(s+" and "+n+" are too far apart with stepSize of "+l+" "+o);const m=r.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<n;f=+e.add(f,l,o),p++)Ep(d,f,m);return(f===n||r.bounds==="ticks"||p===1)&&Ep(d,f,m),Object.keys(d).sort(Np).map(v=>+v)}getLabelForValue(e){const s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(e,n.tooltipFormat):s.format(e,n.displayFormats.datetime)}format(e,s){const r=this.options.time.displayFormats,i=this._unit,o=s||r[i];return this._adapter.format(e,o)}_tickFormatFunction(e,s,n,r){const i=this.options,o=i.ticks.callback;if(o)return ye(o,[e,s,n],this);const l=i.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&l[c],h=u&&l[u],f=n[s],p=u&&h&&f&&f.major;return this._adapter.format(e,r||(p?h:d))}generateTickLabels(e){let s,n,r;for(s=0,n=e.length;s<n;++s)r=e[s],r.label=this._tickFormatFunction(r.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,n=this.ctx.measureText(e).width,r=_n(this.isHorizontal()?s.maxRotation:s.minRotation),i=Math.cos(r),o=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:n*i+l*o,h:n*o+l*i}}_getLabelCapacity(e){const s=this.options.time,n=s.displayFormats,r=n[s.unit]||n.millisecond,i=this._tickFormatFunction(e,0,Tp(this,[e],this._majorUnit),r),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],s,n;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(s=0,n=r.length;s<n;++s)e=e.concat(r[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,n;if(e.length)return e;const r=this.getLabels();for(s=0,n=r.length;s<n;++s)e.push(Cp(this,r[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return E1(e.sort(Np))}}ie(Ia,"id","time"),ie(Ia,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Lo(t,e,s){let n=0,r=t.length-1,i,o,l,c;s?(e>=t[n].pos&&e<=t[r].pos&&({lo:n,hi:r}=fu(t,"pos",e)),{pos:i,time:l}=t[n],{pos:o,time:c}=t[r]):(e>=t[n].time&&e<=t[r].time&&({lo:n,hi:r}=fu(t,"time",e)),{time:i,pos:l}=t[n],{time:o,pos:c}=t[r]);const u=o-i;return u?l+(c-l)*(e-i)/u:l}class Ap extends Ia{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=Lo(s,this.min),this._tableRange=Lo(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:n}=this,r=[],i=[];let o,l,c,u,d;for(o=0,l=e.length;o<l;++o)u=e[o],u>=s&&u<=n&&r.push(u);if(r.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(o=0,l=r.length;o<l;++o)d=r[o+1],c=r[o-1],u=r[o],Math.round((d+c)/2)!==u&&i.push({time:u,pos:o/(l-1)});return i}_generate(){const e=this.min,s=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(s)||n.length===1)&&n.push(s),n.sort((r,i)=>r-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),n=this.getLabelTimestamps();return s.length&&n.length?e=this.normalize(s.concat(n)):e=s.length?s:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Lo(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return Lo(this._table,n*this._tableRange+this._minPos,!0)}}ie(Ap,"id","timeseries"),ie(Ap,"defaults",Ia.defaults);const gx="label";function Op(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function cS(t,e){const s=t.options;s&&e&&Object.assign(s,e)}function xx(t,e){t.labels=e}function yx(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:gx;const n=[];t.datasets=e.map(r=>{const i=t.datasets.find(o=>o[s]===r[s]);return!i||!r.data||n.includes(i)?{...r}:(n.push(i),Object.assign(i,r),i)})}function uS(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gx;const s={labels:[],datasets:[]};return xx(s,t.labels),yx(s,t.datasets,e),s}function dS(t,e){const{height:s=150,width:n=300,redraw:r=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:u=[],fallbackContent:d,updateMode:h,...f}=t,p=A.useRef(null),m=A.useRef(null),v=()=>{p.current&&(m.current=new ul(p.current,{type:o,data:uS(l,i),options:c&&{...c},plugins:u}),Op(e,m.current))},b=()=>{Op(e,null),m.current&&(m.current.destroy(),m.current=null)};return A.useEffect(()=>{!r&&m.current&&c&&cS(m.current,c)},[r,c]),A.useEffect(()=>{!r&&m.current&&xx(m.current.config.data,l.labels)},[r,l.labels]),A.useEffect(()=>{!r&&m.current&&l.datasets&&yx(m.current.config.data,l.datasets,i)},[r,l.datasets]),A.useEffect(()=>{m.current&&(r?(b(),setTimeout(v)):m.current.update(h))},[r,c,l.labels,l.datasets,h]),A.useEffect(()=>{m.current&&(b(),setTimeout(v))},[o]),A.useEffect(()=>(v(),()=>b()),[]),Ue.createElement("canvas",{ref:p,role:"img",height:s,width:n,...f},d)}const hS=A.forwardRef(dS);function fS(t,e){return ul.register(e),A.forwardRef((s,n)=>Ue.createElement(hS,{...s,ref:n,type:t}))}const pS=fS("radar",Yo);ul.register(si,Jo,Bs,A2,V2,I2);const Rp=["Spin Finish","Burst Finish","Over Finish","Extreme Finish"],rc={"Spin Finish":1,"Burst Finish":2,"Over Finish":2,"Extreme Finish":3};function mS({onBack:t}){const[e,s]=A.useState([]),[n,r]=A.useState(""),[i,o]=A.useState({}),[l,c]=A.useState(""),[u,d]=A.useState(!0),[h,f]=A.useState(!1),[p,m]=A.useState(!1),[v,b]=A.useState("player");A.useEffect(()=>{g()},[]),A.useEffect(()=>{n&&x()},[n]);const g=async()=>{try{const{data:S,error:L}=await K.from("tournaments").select("id, name, status, tournament_date").order("tournament_date",{ascending:!1});if(L)throw L;s(S||[]);const _=S==null?void 0:S.find(I=>I.status==="completed");_&&r(_.id)}catch(S){console.error("Error fetching tournaments:",S)}finally{d(!1)}},x=async()=>{f(!0),o({}),c("");try{const{data:S,error:L}=await K.from("match_results").select(`
          player1_name,
          player2_name,
          player1_beyblade,
          player2_beyblade,
          winner_name,
          outcome,
          points_awarded
        `).eq("tournament_id",n);if(L)throw L;if(!S||S.length===0){o({});return}const _={};S.forEach(I=>{const Q=I.player1_name,se=I.player2_name,X=I.player1_beyblade,te=I.player2_beyblade,Z=I.winner_name,O=(I.outcome||"").split(" (")[0].trim()||"Unknown",j=I.points_awarded||rc[O]||0;if(_[Q]||(_[Q]={name:Q,beys:[],matches:[],winFinishes:{},loseFinishes:{},beyStats:{},wins:0,losses:0,points:0}),_[se]||(_[se]={name:se,beys:[],matches:[],winFinishes:{},loseFinishes:{},beyStats:{},wins:0,losses:0,points:0}),X&&!_[Q].beys.includes(X)&&_[Q].beys.push(X),te&&!_[se].beys.includes(te)&&_[se].beys.push(te),!Z||!Q||!se)return;const N=Z===Q?se:Q,B=Z===Q?X:te,T=Z===Q?te:X;_[Z].wins++,_[Z].points+=j,_[Z].winFinishes[O]=(_[Z].winFinishes[O]||0)+1,_[Z].matches.push({result:"win",bey:B,outcome:O,opponent:N,opponentBey:T}),_[N].losses++,_[N].loseFinishes[O]=(_[N].loseFinishes[O]||0)+1,_[N].matches.push({result:"loss",bey:T,outcome:O,opponent:Z,opponentBey:B}),!(!B||!T)&&(_[Z].beyStats[B]||(_[Z].beyStats[B]={win:0,loss:0,finishes:{},lossFinishes:{},points:0}),_[N].beyStats[T]||(_[N].beyStats[T]={win:0,loss:0,finishes:{},lossFinishes:{},points:0}),_[Z].beyStats[B].win++,_[Z].beyStats[B].points+=j,_[Z].beyStats[B].finishes[O]=(_[Z].beyStats[B].finishes[O]||0)+1,_[N].beyStats[T].loss++,_[N].beyStats[T].lossFinishes[O]=(_[N].beyStats[T].lossFinishes[O]||0)+1)}),o(_)}catch(S){console.error("Error fetching tournament data:",S),o({})}finally{f(!1)}},y=S=>Object.entries(S).reduce((L,[_,I])=>I>L[1]?[_,I]:L,["",-1])[0]||"N/A",w=S=>{let L="",_=-1;for(const se of S.beys){const X=S.beyStats[se]||{points:0,win:0};X.points>_&&(_=X.points,L=se)}const I=S.beyStats[L],Q=I?`${I.win} wins, ${I.points} pts`:"No matches";return{bey:L||"N/A",reason:Q}},k=S=>({labels:Rp,datasets:[{label:"Point Contribution",data:Rp.map(L=>{const _=S[L]||0,I=rc[L]||0;return _*I}),backgroundColor:"rgba(33, 150, 243, 0.2)",borderColor:"#2196f3",pointBackgroundColor:"#2196f3",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"#2196f3"}]}),E={responsive:!0,maintainAspectRatio:!1,scales:{r:{suggestedMin:0,ticks:{stepSize:2},title:{display:!0,text:"Points"}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(S){const L=S.label,_=S.raw,I=winFinishes[L]||0,Q=rc[L]||0;return`${L}: ${_} pts (${I}  ${Q})`}}}}},P=()=>{if(!l||!i[l])return null;const S=i[l],{bey:L,reason:_}=w(S),I=S.wins+S.losses,Q=I?(S.wins/I*100).toFixed(1):"0.0",se=I?(S.points/I).toFixed(2):"0.00";return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center text-white text-2xl font-bold mr-4",children:S.name.charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:S.name}),a.jsx("p",{className:"text-gray-600",children:"Tournament Player"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Most Valuable Bey"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:L}),a.jsx("p",{className:"text-sm text-gray-500",children:_})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Most Common Finish (Win)"}),a.jsx("p",{className:"text-lg font-semibold text-green-600",children:y(S.winFinishes)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Most Common Finish (Loss)"}),a.jsx("p",{className:"text-lg font-semibold text-red-600",children:y(S.loseFinishes)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Win Rate"}),a.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[Q,"% (",S.wins," of ",I,")  ",se," pts/match"]})]})]}),a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{style:{width:"300px",height:"300px"},children:a.jsx(pS,{data:k(S.winFinishes),options:E})})})]}),a.jsxs("div",{className:"flex justify-center space-x-4 mt-6",children:[a.jsx("button",{onClick:()=>m(!p),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:p?"Hide Advanced":"Show Advanced"}),a.jsxs("button",{onClick:()=>b("matches"),className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors flex items-center space-x-2",children:[a.jsx(_d,{size:16}),a.jsx("span",{children:"Show All Matches"})]})]})]}),p&&a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Advanced Statistics"}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Win by Finish"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Beyblade"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Spin"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Burst"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Over"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Extreme"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Wins"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Points"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.beys.map(X=>{const te=S.beyStats[X]||{finishes:{},win:0,points:0};return a.jsxs("tr",{className:"bg-green-50",children:[a.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:X}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:te.finishes["Spin Finish"]||0}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:te.finishes["Burst Finish"]||0}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:te.finishes["Over Finish"]||0}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:te.finishes["Extreme Finish"]||0}),a.jsx("td",{className:"px-4 py-2 text-sm font-semibold text-gray-900",children:te.win}),a.jsx("td",{className:"px-4 py-2 text-sm font-semibold text-gray-900",children:te.points})]},X)})})]})})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Loss by Finish"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Beyblade"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Spin"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Burst"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Over"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Extreme"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Losses"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Points Given"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.beys.map(X=>{const te=S.beyStats[X]||{lossFinishes:{},loss:0},Z=te.lossFinishes||{},U=(Z["Spin Finish"]||0)*1+(Z["Burst Finish"]||0)*2+(Z["Over Finish"]||0)*2+(Z["Extreme Finish"]||0)*3;return a.jsxs("tr",{className:"bg-red-50",children:[a.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:X}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:Z["Spin Finish"]||0}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:Z["Burst Finish"]||0}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:Z["Over Finish"]||0}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:Z["Extreme Finish"]||0}),a.jsx("td",{className:"px-4 py-2 text-sm font-semibold text-gray-900",children:te.loss}),a.jsx("td",{className:"px-4 py-2 text-sm font-semibold text-gray-900",children:U})]},X)})})]})})]})]})]})]})},R=()=>{if(!l||!i[l])return null;const S=i[l];return a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["All Matches for ",a.jsx("strong",{children:S.name})]}),a.jsxs("button",{onClick:()=>b("player"),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition-colors flex items-center space-x-2",children:[a.jsx(Sa,{size:16}),a.jsx("span",{children:"Back to Player Stats"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Result"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Your Bey"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opponent"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opponent's Bey"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Finish"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.matches.map((L,_)=>a.jsxs("tr",{className:L.result==="win"?"bg-green-50":"bg-red-50",children:[a.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-medium ${L.result==="win"?"text-green-800":"text-red-800"}`,children:L.result==="win"?"Win":"Loss"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:L.bey}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:L.opponent}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:L.opponentBey||"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:L.outcome})]},_))})]})})]})};return u?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading tournaments..."})]})}):h?a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Player Performance Analysis"}),a.jsx("p",{className:"text-gray-600",children:"Analyze individual player statistics and performance"})]}),a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading player data..."})]})]}):a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex items-center space-x-4 mb-2",children:[a.jsx("button",{onClick:t,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors",title:"Go Back",children:a.jsx(Sa,{size:24})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Player Performance Analysis"})]}),a.jsx("p",{className:"text-gray-600",children:"Analyze individual player statistics and performance"})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Tournament Selection"}),a.jsxs("div",{className:"max-w-md",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Tournament"}),a.jsxs("select",{value:n,onChange:S=>r(S.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"-- Select Tournament --"}),e.map(S=>a.jsxs("option",{value:S.id,children:[S.name," (",S.status,")"]},S.id))]})]})]}),n&&a.jsxs(a.Fragment,{children:[Object.keys(i).length===0&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-8",children:a.jsx("p",{className:"text-yellow-800",children:"No player data found for this tournament. Make sure there are completed matches with valid player names and Beyblade information."})}),Object.keys(i).length>0&&a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[a.jsx(_0,{className:"mr-2",size:24}),"Player Selection"]}),a.jsxs("div",{className:"max-w-md",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Player"}),a.jsxs("select",{value:l,onChange:S=>{c(S.target.value),b("player"),m(!1)},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"-- Select Player --"}),Object.keys(i).sort().map(S=>a.jsx("option",{value:S,children:S},S))]})]})]}),l&&(v==="player"?P():R())]})]})}function gS(){const[t,e]=Ue.useState("overview"),[s,n]=Ue.useState({totalTournaments:0,activePlayers:0,completedMatches:0,upcomingEvents:0,completedTournaments:[],activeTournaments:0,upcomingTournaments:0}),[r,i]=Ue.useState(!0);Ue.useEffect(()=>{(async()=>{try{const[d,h,f,p]=await Promise.all([K.from("tournaments").select("*"),K.from("profiles").select("*",{count:"exact",head:!0}),K.from("match_results").select("*"),K.from("tournament_registrations").select("*",{count:"exact",head:!0})]),m=d.data||[],v=f.data||[],b=m.filter(w=>w.status==="completed"),g=m.filter(w=>w.status==="active").length,x=m.filter(w=>w.status==="upcoming").length,y=v.length;n({totalTournaments:m.length,activePlayers:h.count||0,completedMatches:y,upcomingEvents:x,completedTournaments:b,activeTournaments:g,upcomingTournaments:x})}catch(d){console.error("Error fetching analytics:",d),n({totalTournaments:0,activePlayers:0,completedMatches:0,upcomingEvents:0,completedTournaments:[],activeTournaments:0,upcomingTournaments:0})}finally{i(!1)}})()},[]);const[o,l]=Ue.useState([]);Ue.useEffect(()=>{(async()=>{try{const{data:d}=await K.from("match_results").select("player1_name, player2_name, winner_name");if(!d)return;const h={};d.forEach(p=>{!p.player1_name||!p.player2_name||!p.winner_name||[p.player1_name,p.player2_name].forEach(m=>{h[m]||(h[m]={wins:0,matches:0}),h[m].matches++,p.winner_name===m&&h[m].wins++})});const f=Object.entries(h).map(([p,m])=>({player:p,wins:m.wins,matches:m.matches,winRate:Math.round(m.wins/m.matches*100)})).sort((p,m)=>m.winRate-p.winRate).slice(0,4);l(f)}catch(d){console.error("Error calculating win rates:",d),l([])}})()},[]);const c=[{icon:Qs,label:"Total Tournaments",value:s.totalTournaments,color:"text-blue-600",bgColor:"bg-blue-100"},{icon:nn,label:"Active Players",value:s.activePlayers,color:"text-green-600",bgColor:"bg-green-100"},{icon:b0,label:"Completed Matches",value:s.completedMatches,color:"text-purple-600",bgColor:"bg-purple-100"},{icon:Dn,label:"Upcoming Events",value:s.upcomingEvents,color:"text-orange-600",bgColor:"bg-orange-100"}];return r?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading analytics..."})]})}):t==="meta"?a.jsx(F_,{onBack:()=>e("overview")}):t==="player"?a.jsx(mS,{onBack:()=>e("overview")}):a.jsxs("div",{className:"page-container",children:[a.jsx("div",{className:"page-header",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"page-title",children:"Tournament Analytics"}),a.jsx("p",{className:"page-subtitle",children:"Comprehensive tournament and player statistics"})]}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("button",{onClick:()=>e("overview"),className:`px-6 py-3 rounded-xl font-rajdhani font-bold transition-all duration-300 ${t==="overview"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-glow scale-105":"bg-slate-800/60 text-slate-300 hover:text-white hover:bg-slate-700/60 border border-slate-600/30"}`,children:"Overview"}),a.jsx("button",{onClick:()=>e("meta"),className:`px-6 py-3 rounded-xl font-rajdhani font-bold transition-all duration-300 ${t==="meta"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-glow scale-105":"bg-slate-800/60 text-slate-300 hover:text-white hover:bg-slate-700/60 border border-slate-600/30"}`,children:"Meta Analysis"}),a.jsx("button",{onClick:()=>e("player"),className:`px-6 py-3 rounded-xl font-rajdhani font-bold transition-all duration-300 ${t==="player"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-glow scale-105":"bg-slate-800/60 text-slate-300 hover:text-white hover:bg-slate-700/60 border border-slate-600/30"}`,children:"Player Analytics"})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12",children:c.map((u,d)=>a.jsx("div",{className:"stat-card",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:`p-4 rounded-xl ${u.bgColor} ${u.color} shadow-glow`,children:a.jsx(u.icon,{size:24})}),a.jsxs("div",{className:"ml-6",children:[a.jsx("p",{className:"text-sm font-rajdhani font-semibold text-slate-300",children:u.label}),a.jsx("p",{className:"text-3xl font-orbitron font-bold text-white",children:u.value})]})]})},d))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:[a.jsxs("div",{className:"section-card",children:[a.jsxs("h2",{className:"section-title",children:[a.jsx(Na,{className:"mr-2",size:24}),"Tournament Status"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-slate-300 font-rajdhani font-semibold text-lg",children:"Completed"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-40 bg-slate-700/50 rounded-full h-3",children:a.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 h-3 rounded-full shadow-glow",style:{width:`${s.totalTournaments>0?s.completedTournaments.length/s.totalTournaments*100:0}%`}})}),a.jsx("span",{className:"text-lg font-orbitron font-bold text-white",children:s.completedTournaments.length})]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-slate-300 font-rajdhani font-semibold text-lg",children:"Active"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-40 bg-slate-700/50 rounded-full h-3",children:a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-500 h-3 rounded-full shadow-glow",style:{width:`${s.totalTournaments>0?s.activeTournaments/s.totalTournaments*100:0}%`}})}),a.jsx("span",{className:"text-lg font-orbitron font-bold text-white",children:s.activeTournaments})]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-slate-300 font-rajdhani font-semibold text-lg",children:"Upcoming"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-40 bg-slate-700/50 rounded-full h-3",children:a.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-yellow-500 h-3 rounded-full shadow-glow",style:{width:`${s.totalTournaments>0?s.upcomingTournaments/s.totalTournaments*100:0}%`}})}),a.jsx("span",{className:"text-lg font-orbitron font-bold text-white",children:s.upcomingTournaments})]})]})]})]}),a.jsxs("div",{className:"section-card",children:[a.jsxs("h2",{className:"section-title",children:[a.jsx(w0,{className:"mr-2",size:24}),"Top Player Win Rates"]}),a.jsx("div",{className:"space-y-4",children:o.map((u,d)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800/30 rounded-xl backdrop-blur-sm",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-orbitron font-bold shadow-glow",children:d+1}),a.jsxs("div",{children:[a.jsx("p",{className:"font-orbitron font-bold text-white text-lg",children:u.player}),a.jsxs("p",{className:"text-slate-300 font-rajdhani font-medium",children:[u.wins,"/",u.matches," matches"]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"font-orbitron font-bold text-xl text-white",children:[u.winRate,"%"]}),a.jsx("div",{className:"w-20 bg-slate-700/50 rounded-full h-3",children:a.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 h-3 rounded-full shadow-glow",style:{width:`${u.winRate}%`}})})]})]},u.player))})]})]}),a.jsxs("div",{className:"section-card mt-12",children:[a.jsx("h2",{className:"section-title",children:"Match Statistics"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-4xl font-orbitron font-bold text-blue-400 mb-3",children:s.completedMatches}),a.jsx("p",{className:"text-slate-300 font-rajdhani font-semibold text-lg",children:"Completed Matches"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-4xl font-orbitron font-bold text-orange-400 mb-3",children:"0"}),a.jsx("p",{className:"text-slate-300 font-rajdhani font-semibold text-lg",children:"Ongoing Matches"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-4xl font-orbitron font-bold text-green-400 mb-3",children:"0"}),a.jsx("p",{className:"text-slate-300 font-rajdhani font-semibold text-lg",children:"Scheduled Matches"})]})]})]})]})}const ic={"Over Finish (2 pts)":2,"Burst Finish (2 pts)":2,"Spin Finish (1 pt)":1,"Extreme Finish (3 pts)":3};function xS(){const[t,e]=A.useState([]),[s,n]=A.useState(""),[r,i]=A.useState({}),[o,l]=A.useState({}),[c,u]=A.useState(!0),[d,h]=A.useState(!1),[f,p]=A.useState(""),[m,v]=A.useState(""),[b,g]=A.useState(1),[x,y]=A.useState(""),[w,k]=A.useState({}),[E,P]=A.useState(0),[R,S]=A.useState(0),[L,_]=A.useState(2),[I,Q]=A.useState(!1),[se,X]=A.useState(!1),[te,Z]=A.useState(!1),[U,O]=A.useState(""),[j,N]=A.useState({}),[B,T]=A.useState(null);A.useEffect(()=>{z()},[]),A.useEffect(()=>{s&&V(s)},[s]);const z=async()=>{try{const{data:$,error:Y}=await K.from("tournaments").select("id, name, status, tournament_date, location, beyblades_per_player").order("tournament_date",{ascending:!1});if(Y)throw Y;e($||[]);const J=$==null?void 0:$.find(re=>re.status==="active");J&&n(J.id)}catch($){console.error("Error fetching tournaments:",$)}finally{u(!1)}},V=async $=>{h(!0);try{const{data:Y,error:J}=await K.from("tournament_registrations").select(`
          player_name,
          tournament_beyblades(
            beyblade_name,
            blade_line
          )
        `).eq("tournament_id",$).eq("status","confirmed").order("player_name",{ascending:!0});if(J)throw J;const re={},Ae={};Y==null||Y.forEach(be=>{const ge=be.player_name,Ze=be.tournament_beyblades.map(Pt=>Pt.beyblade_name),Re=be.tournament_beyblades.map(Pt=>({name:Pt.beyblade_name,blade_line:Pt.blade_line}));Ze.length>0&&(re[ge]=Ze,Ae[ge]=Re)}),i(re),l(Ae),W()}catch(Y){console.error("Error fetching player data:",Y),i({})}finally{h(!1)}},W=()=>{p(""),v(""),g(1),y(""),k({}),P(0),S(0),_(2),Q(!1),N({}),l({}),O("")},C=($,Y)=>{$===1?(p(Y),Y===m&&v("")):(v(Y),Y===f&&p("")),Y&&(k({}),P(0),S(0),_(2),Q(!1),N({}))},D=($,Y)=>{var ge,Ze,Re;const J=(ue==null?void 0:ue.beyblades_per_player)||3,re=Math.floor(Y/J)+1,Ae=Y%J;if(re===1)return((ge=r[$])==null?void 0:ge[Ae])||"";const be=(Ze=j[re])==null?void 0:Ze[$];return be?be[Ae]||"":((Re=r[$])==null?void 0:Re[Ae])||""},M=($,Y)=>{var ge,Ze,Re,Pt,an,et;const J=(ue==null?void 0:ue.beyblades_per_player)||3,re=Math.floor(Y/J)+1,Ae=Y%J;if(re===1)return((Ze=(ge=o[$])==null?void 0:ge[Ae])==null?void 0:Ze.blade_line)||"";const be=(Re=j[re])==null?void 0:Re[$];if(be){const is=be[Ae],zt=(Pt=o[$])==null?void 0:Pt.find(bx=>bx.name===is);return(zt==null?void 0:zt.blade_line)||""}return((et=(an=o[$])==null?void 0:an[Ae])==null?void 0:et.blade_line)||""},q=()=>{if(I){alert(`Click Shuffle before adding the next match (after every ${(ue==null?void 0:ue.beyblades_per_player)||3} matches).`);return}if(!f||!m){alert("Please select both players first.");return}let $=0;for(;w[$]!==void 0;)$++;const Y={...w,[$]:{outcome:null,winner:null,points:0}};k(Y);const J=(ue==null?void 0:ue.beyblades_per_player)||3,re=Object.keys(Y).length;re>0&&re%J===0&&Q(!0)},H=($,Y)=>{const J={...w};if(J[$]){J[$].outcome=Y;const re=Y&&J[$].winner&&ic[Y]||0;J[$].points=re}k(J),ce(J)},ee=($,Y)=>{const J={...w};if(J[$]){J[$].winner=Y;const re=J[$].outcome&&Y&&ic[J[$].outcome]||0;J[$].points=re}k(J),ce(J)},ce=$=>{let Y=0,J=0;Object.values($).forEach(re=>{re.winner&&re.outcome&&re.points>0&&(re.winner===f?Y+=re.points:re.winner===m&&(J+=re.points))}),P(Y),S(J)},qe=$=>{const Y={...w};delete Y[$],k(Y),ce(Y),Q(!1)},St=()=>{const $=L,Y={...j};Y[$]||(Y[$]={[f]:[...r[f]||[]],[m]:[...r[m]||[]]}),N(Y),_(J=>J+1),Q(!1)},Bt=($,Y,J)=>{N(re=>({...re,[$]:{...re[$],[Y]:J}}))},Nt=($,Y)=>{T(Y),$.dataTransfer.effectAllowed="move"},Ct=$=>{$.preventDefault(),$.dataTransfer.dropEffect="move"},Ar=($,Y,J,re)=>{var Ze;if($.preventDefault(),!B)return;const Ae=((Ze=j[Y])==null?void 0:Ze[J])||[],be=Ae.indexOf(B);if(be===-1)return;const ge=[...Ae];ge.splice(be,1),ge.splice(re,0,B),Bt(Y,J,ge),T(null)},Or=()=>{T(null)},on=async()=>{if(!x.trim()){alert("Please enter the Tournament Officer name before submitting.");return}const $=Object.entries(w).filter(([Y,J])=>J.outcome&&J.winner);if($.length===0){alert("No complete matches to submit.");return}Z(!0),O("Submitting matches...");try{const Y=$.map(([Ae,be])=>{const ge=parseInt(Ae);return{tournament_id:s,round_number:b,player1_name:f,player2_name:m,player1_beyblade:D(f,ge),player2_beyblade:D(m,ge),player1_blade_line:M(f,ge),player2_blade_line:M(m,ge),outcome:be.outcome,winner_name:be.winner,points_awarded:be.points,match_number:ge+1,phase_number:Math.floor(ge/3)+1,tournament_officer:x}}),{error:J}=await K.from("match_results").insert(Y);if(J)throw J;const{error:re}=await K.from("match_sessions").insert({tournament_id:s,round_number:b,player1_name:f,player2_name:m,player1_final_score:E,player2_final_score:R,winner_name:E>R?f:m,total_matches:$.length,tournament_officer:x,match_summary:$.map(([Ae,be])=>{const ge=parseInt(Ae),Ze=D(be.winner,ge),Re=(ue==null?void 0:ue.beyblades_per_player)||3,Pt=Math.floor(ge/Re)+1,an=ge%Re+1;return`Phase ${Pt}, Match ${an}: ${be.outcome} by ${be.winner} using ${Ze}`}).join("; "),phases:Object.keys(j).length+1,deck_orders:j});if(re)throw re;O(" Matches submitted successfully!"),X(!1),setTimeout(()=>{W(),O("")},2e3)}catch(Y){console.error("Error submitting matches:",Y),O(" Failed to submit matches. Please try again.")}finally{Z(!1)}},Rr=()=>Object.entries(w).filter(([Y,J])=>J.outcome&&J.winner).map(([Y,J])=>{const re=parseInt(Y),Ae=D(J.winner,re);return`Match ${re+1}: ${J.outcome} by ${J.winner} using ${Ae}`}),ue=t.find($=>$.id===s),eo=Object.keys(r),fl=eo.filter($=>$!==m),vx=eo.filter($=>$!==f);return c?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading tournaments..."})]})}):a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"OBC Match Tracker"}),a.jsx("p",{className:"text-gray-600",children:"Track tournament matches in real-time"})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Tournament Selection"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Tournament"}),a.jsxs("select",{value:s,onChange:$=>n($.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"-- Select Tournament --"}),t.map($=>a.jsxs("option",{value:$.id,children:[$.name," (",$.status,")"]},$.id))]})]}),ue&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:ue.name}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",a.jsx("span",{className:`capitalize ${ue.status==="active"?"text-green-600":ue.status==="upcoming"?"text-blue-600":"text-gray-600"}`,children:ue.status})]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",new Date(ue.tournament_date).toLocaleDateString()]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Location: ",ue.location]})]})]})]}),s&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Match Setup"}),d?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading player data..."})]}):Object.keys(r).length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(nn,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No confirmed registrations found for this tournament"})]}):a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Round #"}),a.jsx("input",{type:"number",min:"1",value:b,onChange:$=>g(parseInt($.target.value)||1),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Player 1"}),a.jsxs("select",{value:f,onChange:$=>C(1,$.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"-- Select Player 1 --"}),fl.map($=>a.jsx("option",{value:$,children:$},$))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Player 2"}),a.jsxs("select",{value:m,onChange:$=>C(2,$.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"-- Select Player 2 --"}),vx.map($=>a.jsx("option",{value:$,children:$},$))]})]})]})]}),f&&m&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg shadow-md p-4 mb-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[a.jsx("div",{children:a.jsx("input",{type:"text",placeholder:"Tournament Officer",value:x,onChange:$=>y($.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})}),a.jsxs("div",{className:"text-lg font-bold",children:[a.jsxs("span",{className:`${E>R?"text-green-600":E<R?"text-red-600":"text-gray-600"}`,children:[f,": ",E]}),a.jsx("span",{className:"mx-4 text-gray-400",children:"|"}),a.jsxs("span",{className:`${R>E?"text-green-600":R<E?"text-red-600":"text-gray-600"}`,children:[m,": ",R]})]})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:["Phase 1 Decks (",(ue==null?void 0:ue.beyblades_per_player)||3," Beyblades)"]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b",children:[a.jsx("th",{className:"text-left py-2"}),a.jsx("th",{className:"text-left py-2 font-semibold",children:f}),a.jsx("th",{className:"text-left py-2 font-semibold",children:m})]})}),a.jsx("tbody",{children:Array.from({length:(ue==null?void 0:ue.beyblades_per_player)||3},($,Y)=>{var J,re;return a.jsxs("tr",{className:"border-b",children:[a.jsxs("td",{className:"py-2 font-medium",children:["Bey ",Y+1]}),a.jsx("td",{className:"py-2",children:((J=r[f])==null?void 0:J[Y])||""}),a.jsx("td",{className:"py-2",children:((re=r[m])==null?void 0:re[Y])||""})]},Y)})})]})})]}),a.jsx("div",{className:"space-y-4 mb-6",children:Object.entries(w).map(([$,Y])=>{var Pt,an;const J=parseInt($),re=D(f,J),Ae=D(m,J),be=J+1,ge=(ue==null?void 0:ue.beyblades_per_player)||3,Ze=be%ge===0&&be>0,Re=Math.floor(be/ge)+1;return a.jsxs("div",{children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("h3",{className:"text-lg font-bold",children:["Match ",be,": ",re," vs ",Ae]}),a.jsx("button",{onClick:()=>qe(J),className:"text-red-600 hover:bg-red-50 p-1 rounded",children:a.jsx(rs,{size:16})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Outcome:"}),a.jsx("div",{className:"space-y-2",children:Object.keys(ic).map(et=>a.jsx("button",{onClick:()=>H(J,et),className:`w-full text-left px-3 py-2 rounded border transition-colors ${Y.outcome===et?"bg-blue-100 border-blue-300 text-blue-700":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,children:et},et))})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Winner:"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("button",{onClick:()=>ee(J,f),className:`w-full text-left px-3 py-2 rounded border transition-colors ${Y.winner===f?"bg-green-100 border-green-300 text-green-700":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,children:f}),a.jsx("button",{onClick:()=>ee(J,m),className:`w-full text-left px-3 py-2 rounded border transition-colors ${Y.winner===m?"bg-green-100 border-green-300 text-green-700":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,children:m})]})]})]})]}),Ze&&Re>1&&j[Re]&&a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg shadow-md p-6 mt-4 border-2 border-purple-200",children:[a.jsxs("h3",{className:"text-lg font-bold text-purple-900 mb-4 flex items-center",children:[a.jsx(hf,{className:"mr-2",size:20}),"Phase ",Re," Decks - Drag to Reorder"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-3 text-purple-800",children:f}),a.jsx("div",{className:"space-y-2",children:(Pt=j[Re][f])==null?void 0:Pt.map((et,is)=>a.jsxs("div",{draggable:!0,onDragStart:zt=>Nt(zt,et),onDragOver:Ct,onDrop:zt=>Ar(zt,Re,f,is),onDragEnd:Or,className:`bg-white p-3 rounded border-2 cursor-move transition-all duration-200 flex items-center ${B===et?"border-purple-400 shadow-lg opacity-50":"border-gray-200 hover:border-purple-300 hover:shadow-md"}`,children:[a.jsx(df,{size:16,className:"text-gray-400 mr-2"}),a.jsxs("span",{className:"font-medium text-gray-700",children:[is+1,"."]}),a.jsx("span",{className:"ml-2",children:et})]},`${Re}-${f}-${is}`))})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-3 text-purple-800",children:m}),a.jsx("div",{className:"space-y-2",children:(an=j[Re][m])==null?void 0:an.map((et,is)=>a.jsxs("div",{draggable:!0,onDragStart:zt=>Nt(zt,et),onDragOver:Ct,onDrop:zt=>Ar(zt,Re,m,is),onDragEnd:Or,className:`bg-white p-3 rounded border-2 cursor-move transition-all duration-200 flex items-center ${B===et?"border-purple-400 shadow-lg opacity-50":"border-gray-200 hover:border-purple-300 hover:shadow-md"}`,children:[a.jsx(df,{size:16,className:"text-gray-400 mr-2"}),a.jsxs("span",{className:"font-medium text-gray-700",children:[is+1,"."]}),a.jsx("span",{className:"ml-2",children:et})]},`${Re}-${m}-${is}`))})]})]})]})]},$)})}),a.jsxs("div",{className:"flex justify-center space-x-4 mb-6",children:[a.jsxs("button",{onClick:I?St:q,className:"bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[a.jsx(wr,{size:20}),a.jsx("span",{children:I?"Shuffle":"Add Match"})]}),a.jsxs("button",{onClick:()=>X(!0),disabled:Object.values(w).every($=>!$.outcome||!$.winner),className:"bg-green-600 text-white px-6 py-3 rounded-md hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[a.jsx(P_,{size:20}),a.jsx("span",{children:"Submit Scores"})]}),a.jsxs("button",{onClick:W,className:"bg-gray-600 text-white px-6 py-3 rounded-md hover:bg-gray-700 transition-colors flex items-center space-x-2",children:[a.jsx(hf,{size:20}),a.jsx("span",{children:"Refresh"})]})]}),U&&a.jsx("div",{className:"text-center py-4",children:a.jsx("p",{className:`font-semibold ${U.includes("")?"text-green-600":U.includes("")?"text-red-600":"text-blue-600"}`,children:U})})]})]}),se&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Match Summary"}),a.jsx("button",{onClick:()=>X(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:a.jsx(ts,{size:24})})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Final Scores"}),a.jsxs("p",{className:"text-xl",children:[a.jsxs("strong",{children:[f,":"]})," ",E," pts | ",a.jsxs("strong",{children:[m,":"]})," ",R," pts"]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Match Results"}),a.jsx("div",{className:"space-y-2",children:Rr().map(($,Y)=>a.jsx("p",{className:"text-gray-700",dangerouslySetInnerHTML:{__html:$}},Y))})]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{onClick:()=>X(!1),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:on,disabled:te,className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[te&&a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Confirm Submit"})]})]})]})]})})]})}function yS(){var V,W;const{user:t}=It(),[e,s]=A.useState([]),[n,r]=A.useState(!1),[i,o]=A.useState(null),[l,c]=A.useState({}),[u,d]=A.useState(null),[h,f]=A.useState([]),[p,m]=A.useState(!1),[v,b]=A.useState(!0),[g,x]=A.useState(null),[y,w]=A.useState([]),[k,E]=A.useState(!1),[P,R]=A.useState(null),[S,L]=A.useState({}),_=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="developer";Ue.useEffect(()=>{I()},[]);const I=async()=>{try{const{data:C,error:D}=await K.from("tournaments").select("*").order("tournament_date",{ascending:!1});if(D)throw D;s(C||[])}catch(C){console.error("Error fetching tournaments:",C)}finally{b(!1)}},Q=()=>{r(!0),c({name:"",description:"",tournament_date:"",location:"",max_participants:16,status:"upcoming",registration_deadline:"",prize_pool:"",beyblades_per_player:3,players_per_team:1})},se=C=>{o(C.id),c(C)},X=async()=>{try{if(n){const{error:C}=await K.from("tournaments").insert([l]);if(C){console.error("Insert error:",C),C.code==="42501"||C.message.includes("RLS")?alert("Permission denied. You need admin or developer role to create tournaments."):alert(`Failed to create tournament: ${C.message}`);return}}else if(i){const{error:C}=await K.from("tournaments").update(l).eq("id",i);if(C){console.error("Update error:",C),C.code==="42501"||C.message.includes("RLS")||C.code==="42883"?alert("Permission denied. You need admin or developer role to edit tournaments."):alert(`Failed to update tournament: ${C.message}`);return}}await I(),r(!1),o(null),c({})}catch(C){console.error("Error saving tournament:",C),alert(`Failed to save tournament: ${C instanceof Error?C.message:"Unknown error"}. Please try again.`)}},te=()=>{r(!1),o(null),c({})},Z=async C=>{m(!0),d(C);try{const{data:D,error:M}=await K.from("tournament_registration_details").select("*").eq("tournament_id",C);if(M)throw M;const q={};D==null||D.forEach(H=>{q[H.registration_id]||(q[H.registration_id]={registration_id:H.registration_id,player_name:H.player_name,payment_mode:H.payment_mode,registered_at:H.registered_at,status:H.status,beyblades:[]}),H.beyblade_id&&(q[H.registration_id].beyblades.find(ce=>ce.beyblade_id===H.beyblade_id)||q[H.registration_id].beyblades.push({beyblade_id:H.beyblade_id,beyblade_name:H.beyblade_name,blade_line:H.blade_line,parts:H.beyblade_parts||[]}))}),f(Object.values(q))}catch(D){console.error("Error fetching registrations:",D),alert("Failed to load registrations. Please try again.")}finally{m(!1)}},U=async C=>{if(confirm("Are you sure you want to delete this tournament? This will also delete all associated registrations and matches. This action cannot be undone."))try{const{error:D}=await K.from("tournaments").delete().eq("id",C);if(D){console.error("Delete error:",D),D.code==="42501"||D.message.includes("RLS")?alert("Permission denied. You need admin or developer role to delete tournaments."):alert(`Failed to delete tournament: ${D.message}`);return}alert("Tournament deleted successfully!"),await I()}catch(D){console.error("Error deleting tournament:",D),alert(`Failed to delete tournament: ${D instanceof Error?D.message:"Unknown error"}. Please try again.`)}},O=async C=>{E(!0),x(C);try{const{data:D,error:M}=await K.from("match_results").select("*").eq("tournament_id",C).order("submitted_at",{ascending:!1});if(M)throw M;w(D||[])}catch(D){console.error("Error fetching matches:",D),alert("Failed to load matches. Please try again.")}finally{E(!1)}},j=C=>{R(C.id),L({...C})},N=async()=>{if(!(!P||!_))try{const{error:C}=await K.from("match_results").update(S).eq("id",P);if(C){console.error("Update error:",C),alert(`Failed to update match: ${C.message}`);return}R(null),L({}),await O(g),alert("Match updated successfully!")}catch(C){console.error("Error updating match:",C),alert(`Failed to update match: ${C instanceof Error?C.message:"Unknown error"}`)}},B=()=>{R(null),L({})},T=async C=>{if(confirm("Are you sure you want to delete this match? This action cannot be undone."))try{const{error:D}=await K.from("match_results").delete().eq("id",C);if(D){console.error("Delete error:",D),alert(`Failed to delete match: ${D.message}`);return}alert("Match deleted successfully!"),await O(g)}catch(D){console.error("Error deleting match:",D),alert(`Failed to delete match: ${D instanceof Error?D.message:"Unknown error"}`)}},z=C=>{switch(C){case"upcoming":return"bg-blue-100 text-blue-800";case"active":return"bg-green-100 text-green-800";case"completed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return v?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading tournaments..."})]})}):a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Tournament Manager"}),a.jsx("p",{className:"text-gray-600",children:"Create and manage tournaments"})]}),_&&a.jsxs("button",{onClick:Q,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[a.jsx(wr,{size:20}),a.jsx("span",{children:"Create Tournament"})]})]}),(n||i)&&a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:n?"Create New Tournament":"Edit Tournament"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tournament Name"}),a.jsx("input",{type:"text",value:l.name||"",onChange:C=>c({...l,name:C.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),a.jsx("input",{type:"text",value:l.location||"",onChange:C=>c({...l,location:C.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tournament Date"}),a.jsx("input",{type:"date",value:l.tournament_date||"",onChange:C=>c({...l,tournament_date:C.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Registration Deadline"}),a.jsx("input",{type:"date",value:l.registration_deadline||"",onChange:C=>c({...l,registration_deadline:C.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Participants"}),a.jsx("input",{type:"number",value:l.max_participants||"",onChange:C=>c({...l,max_participants:parseInt(C.target.value)}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prize Pool"}),a.jsx("input",{type:"text",value:l.prize_pool||"",onChange:C=>c({...l,prize_pool:C.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., $500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Beyblades per Player"}),a.jsx("input",{type:"number",min:"1",max:"5",value:l.beyblades_per_player||3,onChange:C=>c({...l,beyblades_per_player:parseInt(C.target.value)}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Players per Team"}),a.jsx("input",{type:"number",min:"1",max:"4",value:l.players_per_team||1,onChange:C=>c({...l,players_per_team:parseInt(C.target.value)}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{value:l.description||"",onChange:C=>c({...l,description:C.target.value}),rows:3,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),!n&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),a.jsxs("select",{value:l.status||"",onChange:C=>c({...l,status:C.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"upcoming",children:"Upcoming"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"completed",children:"Completed"})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsxs("button",{onClick:te,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[a.jsx(ts,{size:16}),a.jsx("span",{children:"Cancel"})]}),a.jsxs("button",{onClick:X,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[a.jsx(Bi,{size:16}),a.jsx("span",{children:"Save"})]})]})]}),a.jsx("div",{className:"space-y-4",children:e.map(C=>a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:C.name}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium capitalize ${z(C.status)}`,children:C.status})]}),a.jsx("p",{className:"text-gray-600 mb-2",children:C.description}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Date:"})," ",new Date(C.tournament_date).toLocaleDateString()]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Location:"})," ",C.location]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Participants:"})," ",C.current_participants,"/",C.max_participants]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Prize Pool:"})," ",C.prize_pool]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Beyblades/Player:"})," ",C.beyblades_per_player]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Players/Team:"})," ",C.players_per_team]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[_&&a.jsx("button",{onClick:()=>se(C),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:"Edit Tournament",children:a.jsx(An,{size:16})}),a.jsx("button",{onClick:()=>Z(C.id),className:"p-2 text-green-600 hover:bg-green-50 rounded-md transition-colors",title:"View Registrations",children:a.jsx(_d,{size:16})}),a.jsx("button",{onClick:()=>O(C.id),className:"p-2 text-purple-600 hover:bg-purple-50 rounded-md transition-colors",title:"View Matches",children:a.jsx(ff,{size:16})}),_&&a.jsx("button",{onClick:()=>U(C.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md transition-colors",title:"Delete Tournament",children:a.jsx(rs,{size:16})})]})]}),a.jsx("div",{className:"border-t pt-4",children:a.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[a.jsxs("span",{children:["Registration Deadline: ",new Date(C.registration_deadline).toLocaleDateString()]}),a.jsxs("span",{children:["Tournament ID: ",C.id]})]})})]},C.id))}),u&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Tournament Registrations"}),a.jsx("p",{className:"text-gray-600",children:(V=e.find(C=>C.id===u))==null?void 0:V.name})]}),a.jsx("button",{onClick:()=>d(null),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:a.jsx(ts,{size:24})})]}),a.jsx("div",{className:"p-6",children:p?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading registrations..."})]}):h.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(nn,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No registrations yet for this tournament"})]}):a.jsx("div",{className:"space-y-6",children:h.map(C=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:C.player_name}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Registered: ",new Date(C.registered_at).toLocaleString()]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Payment: ",a.jsx("span",{className:"capitalize",children:C.payment_mode.replace("_"," ")})]})]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${C.status==="confirmed"?"bg-green-100 text-green-800":C.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:C.status})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:"Registered Beyblades:"}),C.beyblades.map(D=>a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h5",{className:"font-medium text-gray-900",children:D.beyblade_name}),a.jsxs("span",{className:"text-sm text-gray-600 bg-white px-2 py-1 rounded",children:[D.blade_line," Line"]})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2 text-sm",children:D.parts.map((M,q)=>a.jsxs("div",{className:"bg-white p-2 rounded border",children:[a.jsx("div",{className:"font-medium text-gray-700",children:M.part_type}),a.jsx("div",{className:"text-gray-600",children:M.part_name})]},q))})]},D.beyblade_id))]})]},C.registration_id))})})]})}),g&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-7xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Tournament Matches"}),a.jsx("p",{className:"text-gray-600",children:(W=e.find(C=>C.id===g))==null?void 0:W.name})]}),a.jsx("button",{onClick:()=>{x(null),R(null),L({})},className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:a.jsx(ts,{size:24})})]}),a.jsx("div",{className:"p-6",children:k?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading matches..."})]}):y.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ff,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No matches found for this tournament"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Round"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Match #"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Player 1"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Player 1 Bey"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Player 2"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Player 2 Bey"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Winner"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Outcome"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Points"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Officer"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),_&&a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(C=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===C.id?a.jsx("input",{type:"number",value:S.round_number||"",onChange:D=>L({...S,round_number:parseInt(D.target.value)}),className:"w-16 border border-gray-300 rounded px-2 py-1 text-sm"}):C.round_number}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===C.id?a.jsx("input",{type:"number",value:S.match_number||"",onChange:D=>L({...S,match_number:parseInt(D.target.value)}),className:"w-16 border border-gray-300 rounded px-2 py-1 text-sm"}):C.match_number}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:P===C.id?a.jsx("input",{type:"text",value:S.player1_name||"",onChange:D=>L({...S,player1_name:D.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"}):C.player1_name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===C.id?a.jsx("input",{type:"text",value:S.player1_beyblade||"",onChange:D=>L({...S,player1_beyblade:D.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"}):C.player1_beyblade}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:P===C.id?a.jsx("input",{type:"text",value:S.player2_name||"",onChange:D=>L({...S,player2_name:D.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"}):C.player2_name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===C.id?a.jsx("input",{type:"text",value:S.player2_beyblade||"",onChange:D=>L({...S,player2_beyblade:D.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"}):C.player2_beyblade}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===C.id?a.jsxs("select",{value:S.winner_name||"",onChange:D=>L({...S,winner_name:D.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",children:[a.jsx("option",{value:"",children:"Select Winner"}),a.jsx("option",{value:S.player1_name,children:S.player1_name}),a.jsx("option",{value:S.player2_name,children:S.player2_name})]}):a.jsx("span",{className:`font-medium ${C.winner_name===C.player1_name?"text-green-600":"text-blue-600"}`,children:C.winner_name})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===C.id?a.jsxs("select",{value:S.outcome||"",onChange:D=>L({...S,outcome:D.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",children:[a.jsx("option",{value:"",children:"Select Outcome"}),a.jsx("option",{value:"Spin Finish (1 pt)",children:"Spin Finish (1 pt)"}),a.jsx("option",{value:"Burst Finish (2 pts)",children:"Burst Finish (2 pts)"}),a.jsx("option",{value:"Over Finish (2 pts)",children:"Over Finish (2 pts)"}),a.jsx("option",{value:"Extreme Finish (3 pts)",children:"Extreme Finish (3 pts)"})]}):C.outcome}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===C.id?a.jsx("input",{type:"number",value:S.points_awarded||"",onChange:D=>L({...S,points_awarded:parseInt(D.target.value)}),className:"w-16 border border-gray-300 rounded px-2 py-1 text-sm"}):C.points_awarded}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===C.id?a.jsx("input",{type:"text",value:S.tournament_officer||"",onChange:D=>L({...S,tournament_officer:D.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"}):C.tournament_officer}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Dn,{size:12,className:"mr-1"}),new Date(C.created_at).toLocaleDateString()]})}),_&&a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsx("div",{className:"flex space-x-2",children:P===C.id?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:N,className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50",title:"Save Changes",children:a.jsx(Bi,{size:16})}),a.jsx("button",{onClick:B,className:"text-gray-600 hover:text-gray-900 p-1 rounded hover:bg-gray-50",title:"Cancel",children:a.jsx(ts,{size:16})})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>j(C),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"Edit Match",children:a.jsx(An,{size:16})}),a.jsx("button",{onClick:()=>T(C.id),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",title:"Delete Match",children:a.jsx(rs,{size:16})})]})})})]},C.id))})]})})})]})})]})}function vS(){const{user:t}=It(),[e,s]=A.useState([]),[n,r]=A.useState("all"),[i,o]=A.useState("all"),[l,c]=A.useState(!0),u=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="developer";Ue.useEffect(()=>{d()},[]);const d=async()=>{try{console.log(" USER MANAGEMENT: Fetching profiles...");const{data:b,error:g}=await K.from("profiles").select("*").order("created_at",{ascending:!1});if(g)throw console.error(" USER MANAGEMENT: Error fetching profiles:",g),g;console.log(" USER MANAGEMENT: Raw profiles data:",{count:(b==null?void 0:b.length)||0,sample:(b==null?void 0:b.slice(0,3))||[],allProfiles:b||[]});const x=(b||[]).map(y=>({id:y.id,username:y.username,email:y.email||"",role:y.role,joinedDate:y.created_at,status:"active",lastLogin:null}));console.log(" USER MANAGEMENT: Formatted profiles as users:",{count:x.length,sample:x.slice(0,3),roles:x.map(y=>y.role),statuses:x.map(y=>y.status)}),s(x),console.log(" USER MANAGEMENT: Profiles loaded successfully as users")}catch(b){console.error("Error fetching profiles:",b)}finally{c(!1)}},h=e.filter(b=>{const g=n==="all"||b.status===n,x=i==="all"||b.role===i;return g&&x}),f=async(b,g)=>{try{const{error:x}=await K.from("profiles").update(g).eq("id",b);if(x){const y=x.code==="42501"||x.message.includes("RLS")?"Permission denied. You need admin or developer role to update users.":`Failed to update user: ${x.message}`;alert(y);return}await d()}catch(x){console.error("Error updating user:",x),alert(`Failed to update user: ${x instanceof Error?x.message:"Unknown error"}`)}},p=async b=>{if(confirm("Are you sure you want to delete this user? This will also delete all their registrations and data. This action cannot be undone."))try{const{error:g}=await K.from("profiles").delete().eq("id",b);if(g){console.error("Delete error:",g),g.code==="42501"||g.message.includes("RLS")?alert("Permission denied. You need admin or developer role to delete users."):alert(`Failed to delete user: ${g.message}`);return}alert("User deleted successfully!"),await d()}catch(g){console.error("Error deleting user:",g),alert(`Failed to delete user: ${g instanceof Error?g.message:"Unknown error"}. Please try again.`)}},m=b=>{switch(b){case"active":return"bg-green-100 text-green-800";case"suspended":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},v=b=>{switch(b){case"admin":return"bg-red-100 text-red-800";case"developer":return"bg-purple-100 text-purple-800";case"technical_officer":return"bg-blue-100 text-blue-800";case"user":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return l?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading users..."})]})}):a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"User Management"}),a.jsx("p",{className:"text-gray-600",children:"Manage user accounts and permissions"})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Status"}),a.jsxs("select",{value:n,onChange:b=>r(b.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"suspended",children:"Suspended"}),a.jsx("option",{value:"pending",children:"Pending"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Role"}),a.jsxs("select",{value:i,onChange:b=>o(b.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Roles"}),a.jsx("option",{value:"user",children:"User"}),a.jsx("option",{value:"technical_officer",children:"Technical Officer"}),a.jsx("option",{value:"admin",children:"Admin"}),a.jsx("option",{value:"developer",children:"Developer"})]})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-lg bg-blue-100 text-blue-600",children:a.jsx(nn,{size:24})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-lg bg-green-100 text-green-600",children:a.jsx(pi,{size:24})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-lg bg-red-100 text-red-600",children:a.jsx(pi,{size:24})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Suspended"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"0"})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-lg bg-purple-100 text-purple-600",children:a.jsx(pi,{size:24})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Admins"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(b=>b.role==="admin"||b.role==="developer").length})]})]})})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(b=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold",children:b.username.charAt(0).toUpperCase()}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:b.username}),a.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[a.jsx(j_,{size:12,className:"mr-1"}),b.email]})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("select",{value:b.role,onChange:g=>f(b.id,{role:g.target.value}),disabled:!u,className:`text-xs font-medium px-2 py-1 rounded-full border-0 ${v(b.role)}`,children:[a.jsx("option",{value:"user",children:"User"}),a.jsx("option",{value:"technical_officer",children:"Technical Officer"}),a.jsx("option",{value:"admin",children:"Admin"}),a.jsx("option",{value:"developer",children:"Developer"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("select",{value:"active",disabled:!u,className:`text-xs font-medium px-2 py-1 rounded-full border-0 ${m("active")}`,children:a.jsx("option",{value:"active",children:"Active"})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Dn,{size:12,className:"mr-1"}),new Date(b.joinedDate).toLocaleDateString()]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"Never"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsx("div",{className:"flex space-x-2",children:u&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",children:a.jsx(An,{size:16})}),a.jsx("button",{onClick:()=>p(b.id),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",children:a.jsx(rs,{size:16})})]})})})]},b.id))})]})})})]})}function bS(){var O;const{user:t}=It(),[e,s]=A.useState("tournaments"),[n,r]=A.useState(null),[i,o]=A.useState(!1),[l,c]=A.useState([]),[u,d]=A.useState(!1),[h,f]=A.useState(null),[p,m]=A.useState([]),[v,b]=A.useState(null),[g,x]=A.useState({}),[y,w]=A.useState(null),[k,E]=A.useState([]);Ue.useEffect(()=>{r(null),w(null),b(null),x({})},[e]);const P=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="developer",R=async()=>{try{console.log(" DATABASE: Fetching table counts...");const[j,N,B,T]=await Promise.all([K.from("profiles").select("*",{count:"exact",head:!0}),K.from("tournaments").select("*",{count:"exact",head:!0}),K.from("match_results").select("*",{count:"exact",head:!0}),K.from("tournament_registrations").select("*",{count:"exact",head:!0})]);console.log(" DATABASE: Table counts fetched:",{profiles:{count:j.count,error:j.error},tournaments:{count:N.count,error:N.error},match_results:{count:B.count,error:B.error},registrations:{count:T.count,error:T.error}}),m([{name:"users",records:j.count||0,icon:a.jsx(nn,{size:16}),description:"User accounts and profiles"},{name:"tournaments",records:N.count||0,icon:a.jsx(Qs,{size:16}),description:"Tournament information"},{name:"matches",records:B.count||0,icon:a.jsx(Dn,{size:16}),description:"Match results and schedules"},{name:"registrations",records:T.count||0,icon:a.jsx(E_,{size:16}),description:"Tournament registrations with Beyblades"}]);const{data:z}=await K.from("tournaments").select("id, name").order("name");console.log(" DATABASE: Tournaments for registration view:",{count:(z==null?void 0:z.length)||0,tournaments:z||[]}),E(z||[]),console.log(" DATABASE: Table counts loaded successfully")}catch(j){console.error("Error fetching table counts:",j)}},S=async(j,N)=>{d(!0),f(null),console.log(" DATABASE: Fetching table data for:",{tableName:j,tournamentId:N});try{let B=[];if(j==="registrations"&&N){const{data:T,error:z}=await K.from("tournament_registration_details").select("*").eq("tournament_id",N).order("registered_at",{ascending:!1});if(z)throw z;const V={};T==null||T.forEach(W=>{var C;V[W.registration_id]||(V[W.registration_id]={registration_id:W.registration_id,tournament_id:W.tournament_id,tournament_name:((C=k.find(D=>D.id===W.tournament_id))==null?void 0:C.name)||"Unknown Tournament",player_name:W.player_name,payment_mode:W.payment_mode,registered_at:W.registered_at,status:W.status,beyblades:[]}),W.beyblade_id&&(V[W.registration_id].beyblades.find(M=>M.beyblade_id===W.beyblade_id)||V[W.registration_id].beyblades.push({beyblade_id:W.beyblade_id,beyblade_name:W.beyblade_name,blade_line:W.blade_line,parts:W.beyblade_parts||[]}))}),B=Object.values(V)}else if(j==="registrations"&&!N)B=k;else{let T=j;j==="registrations"?T="tournament_registrations":j==="users"?T="profiles":j==="matches"&&(T="match_results");const{data:z,error:V}=await K.from(T).select("*").order(j==="tournaments"?"tournament_date":j==="matches"?"submitted_at":"created_at",{ascending:!1});if(V)throw console.error(` DATABASE: Error fetching ${j}:`,V),V;console.log(` DATABASE: Fetched ${j} data:`,{count:(z==null?void 0:z.length)||0,sample:(z==null?void 0:z.slice(0,3))||[],tableName:T}),B=z||[]}(j!=="registrations"||N)&&B.sort((T,z)=>{const V=Object.values(T).find(C=>typeof C=="string")||"",W=Object.values(z).find(C=>typeof C=="string")||"";return V.localeCompare(W)}),c(B),console.log(` DATABASE: Table data loaded for ${j}:`,{finalCount:B.length,hasData:B.length>0})}catch(B){console.error("Error fetching table data:",B),f(`Failed to load ${j} data. Please try again.`)}finally{d(!1)}},L=async()=>{o(!0),await Promise.all([R(),S(e,n||void 0)]),o(!1)},_=j=>{const N=JSON.stringify(l,null,2),B=new Blob([N],{type:"application/json"}),T=URL.createObjectURL(B),z=document.createElement("a");z.href=T,z.download=`${j}_export_${new Date().toISOString().split("T")[0]}.json`,z.click(),URL.revokeObjectURL(T)},I=j=>{b(j.id||j.registration_id||j.tournament_id),x({...j})},Q=async()=>{if(!(!v||!P))try{let j=e;e==="registrations"?j="tournament_registrations":e==="users"?j="profiles":e==="matches"&&(j="match_results");const{error:N}=await K.from(j).update(g).eq("id",v);if(N){console.error("Update error:",N),N.code==="42501"||N.message.includes("RLS")?alert("Permission denied. You need admin or developer role to edit records."):alert(`Failed to update record: ${N.message}`);return}b(null),x({}),await S(e)}catch(j){console.error("Error updating row:",j),alert(`Failed to update record: ${j instanceof Error?j.message:"Unknown error"}. Please try again.`)}},se=async j=>{if(confirm("Are you sure you want to delete this record? This action cannot be undone."))try{let N=e;e==="registrations"?N="tournament_registrations":e==="users"?N="profiles":e==="matches"&&(N="match_results");const{error:B}=await K.from(N).delete().eq("id",j);if(B){console.error("Delete error:",B),B.code==="42501"||B.message.includes("RLS")?alert("Permission denied. You need admin or developer role to delete records."):alert(`Failed to delete record: ${B.message}`);return}alert("Record deleted successfully!"),await Promise.all([R(),S(e,n||void 0)])}catch(N){console.error("Error deleting row:",N),alert(`Failed to delete record: ${N instanceof Error?N.message:"Unknown error"}. Please try again.`)}},X=j=>{r(j),S("registrations",j)},te=()=>{r(null),S("registrations")},Z=j=>{w(j)};A.useEffect(()=>{R()},[]),A.useEffect(()=>{e==="registrations"&&r(null),S(e)},[e]);const U=()=>{var j;return u?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsxs("p",{className:"text-gray-600",children:["Loading ",e==="registrations"&&n?"registration":e," data..."]})]}):h?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-red-500 mb-4",children:""}),a.jsx("p",{className:"text-red-600",children:h}),a.jsx("button",{onClick:()=>S(e,n||void 0),className:"mt-4 text-blue-600 hover:text-blue-800 underline",children:"Try Again"})]}):l.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(lu,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsxs("p",{className:"text-gray-500",children:["No data available for ",e==="registrations"&&n?"this tournament":e]})]}):e==="registrations"&&!n?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Qs,{size:48,className:"mx-auto text-blue-500 mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Select Tournament"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Choose a tournament to view its registrations"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(N=>a.jsxs("button",{onClick:()=>X(N.id),className:"text-left p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors",children:[a.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:N.name}),a.jsx("p",{className:"text-sm text-gray-600",children:N.location}),a.jsx("p",{className:"text-sm text-gray-500",children:new Date(N.tournament_date).toLocaleDateString()})]},N.id))})]}):e==="registrations"&&n?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("button",{onClick:te,className:"text-blue-600 hover:text-blue-800 flex items-center space-x-1",children:[a.jsx("span",{children:""}),a.jsx("span",{children:"Back to Tournaments"})]}),a.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[((j=k.find(N=>N.id===n))==null?void 0:j.name)||"Tournament"," Registrations"]})]}),l.map(N=>{var B;return a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-gray-900",children:N.player_name}),a.jsx("p",{className:"text-sm text-gray-600",children:N.tournament_name}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Registered: ",new Date(N.registered_at).toLocaleString()]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Payment: ",a.jsx("span",{className:"capitalize",children:((B=N.payment_mode)==null?void 0:B.replace("_"," "))||"N/A"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${N.status==="confirmed"?"bg-green-100 text-green-800":N.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:N.status}),a.jsx("button",{onClick:()=>Z(N),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",title:"View Details",children:a.jsx(_d,{size:16})}),P&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>I(N),className:"p-1 text-green-600 hover:bg-green-50 rounded",title:"Edit",children:a.jsx(An,{size:16})}),a.jsx("button",{onClick:()=>se(N.registration_id),className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Delete",children:a.jsx(rs,{size:16})})]})]})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("strong",{children:"Beyblades:"})," ",N.beyblades.length>0?N.beyblades.map(T=>T.beyblade_name).join(", "):"No Beyblades registered"]})]},N.registration_id)})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[l.length>0&&l[0]&&Object.keys(l[0]).map(N=>a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:N.replace(/_/g," ")},N)),P&&a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map((N,B)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[Object.entries(N).map(([T,z],V)=>a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:v===(N.id||N.registration_id||N.tournament_id)&&P?a.jsx("input",{type:"text",value:g[T]||"",onChange:W=>x({...g,[T]:W.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"}):typeof z=="object"&&z!==null?JSON.stringify(z):z instanceof Date?z.toLocaleString():String(z||"")},V)),P&&a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsx("div",{className:"flex space-x-2",children:v===(N.id||N.registration_id||N.tournament_id)?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:Q,className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50",children:"Save"}),a.jsx("button",{onClick:()=>{b(null),x({})},className:"text-gray-600 hover:text-gray-900 p-1 rounded hover:bg-gray-50",children:"Cancel"})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>I(N),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",children:a.jsx(An,{size:16})}),a.jsx("button",{onClick:()=>se(N.id||N.registration_id||N.tournament_id),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",children:a.jsx(rs,{size:16})})]})})})]},N.id||B))})]})})};return a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Database Management"}),a.jsx("p",{className:"text-gray-600",children:"Monitor and manage application data from Supabase"})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("button",{onClick:L,disabled:i,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2 disabled:opacity-50",children:[a.jsx(N_,{size:16,className:i?"animate-spin":""}),a.jsx("span",{children:"Refresh"})]}),a.jsxs("button",{onClick:()=>_(e),className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors flex items-center space-x-2",children:[a.jsx(y_,{size:16}),a.jsx("span",{children:"Export"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[a.jsxs("div",{className:"lg:col-span-1",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[a.jsx(lu,{size:20,className:"mr-2"}),"Tables"]}),a.jsx("div",{className:"space-y-2",children:p.map(j=>a.jsxs("button",{onClick:()=>s(j.name),className:`w-full text-left p-3 rounded-lg transition-colors ${e===j.name?"bg-blue-50 text-blue-700 border border-blue-200":"hover:bg-gray-50"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[j.icon,a.jsx("span",{className:"font-medium capitalize",children:j.name})]}),a.jsx("span",{className:"text-sm text-gray-500",children:j.records})]}),a.jsx("p",{className:"text-xs text-gray-600",children:j.description})]},j.name))})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mt-6",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Database Stats"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Total Records"}),a.jsx("span",{className:"font-bold",children:p.reduce((j,N)=>j+N.records,0)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Tables"}),a.jsx("span",{className:"font-bold",children:p.length})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Source"}),a.jsx("span",{className:"font-bold text-green-600",children:"Supabase"})]})]})]})]}),a.jsx("div",{className:"lg:col-span-3",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900 capitalize",children:e==="registrations"&&n?`${((O=k.find(j=>j.id===n))==null?void 0:O.name)||"Tournament"} Registrations`:e==="registrations"?"Select Tournament for Registrations":`${e} Table`}),a.jsx("span",{className:"text-sm text-gray-500",children:e==="registrations"&&!n?`${k.length} tournaments`:`${l.length} records`})]})}),U()]})})]}),y&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Registration Details"}),a.jsx("p",{className:"text-gray-600",children:y.player_name})]}),a.jsx("button",{onClick:()=>w(null),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:""})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Player Name"}),a.jsx("p",{className:"text-lg font-semibold",children:y.player_name})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tournament ID"}),a.jsx("p",{className:"text-lg",children:y.tournament_id})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Mode"}),a.jsx("p",{className:"text-lg capitalize",children:y.payment_mode.replace("_"," ")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),a.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${y.status==="confirmed"?"bg-green-100 text-green-800":y.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:y.status})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Registered Beyblades"}),y.beyblades.length===0?a.jsx("p",{className:"text-gray-500",children:"No Beyblades registered"}):a.jsx("div",{className:"space-y-4",children:y.beyblades.map(j=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:j.beyblade_name}),a.jsxs("span",{className:"text-sm text-gray-600 bg-gray-100 px-2 py-1 rounded",children:[j.blade_line," Line"]})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2",children:j.parts.map((N,B)=>a.jsxs("div",{className:"bg-gray-50 p-2 rounded border",children:[a.jsx("div",{className:"font-medium text-gray-700 text-sm",children:N.part_type}),a.jsx("div",{className:"text-gray-600 text-xs",children:N.part_name})]},B))})]},j.beyblade_id))})]})]})]})})]})}function wS(){const{user:t}=It();if(!t||t.id.startsWith("guest-"))return a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Inventory"}),a.jsx("p",{className:"text-gray-600",children:"Track your Beyblade parts collection"})]}),a.jsxs("div",{className:"text-center py-12",children:[a.jsx(cu,{size:64,className:"mx-auto text-gray-400 mb-6"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Inventory Tracker"}),a.jsx("p",{className:"text-gray-600 mb-8 max-w-2xl mx-auto",children:"Keep track of all your Beyblade parts, organize your collection, and build custom decks. Save presets for quick tournament registration and never forget which parts you own."}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-8 max-w-md mx-auto mb-8",children:[a.jsx("div",{className:"flex items-center justify-center mb-6",children:a.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white text-2xl font-bold shadow-lg",children:""})}),a.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-3",children:"Login to Get Started"}),a.jsx("p",{className:"text-blue-800 text-sm mb-6",children:"Create a free account to start tracking your Beyblade parts and building custom decks!"}),a.jsxs("div",{className:"space-y-2 text-sm text-blue-700",children:[a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Track unlimited Beyblade parts"]}),a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Build and save custom decks"]}),a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Quick tournament registration"]})]})]}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-6 max-w-lg mx-auto",children:a.jsxs("p",{className:"text-gray-600 text-sm",children:[a.jsx("strong",{children:"No account yet?"}),' Click the "Login" button in the top right corner to create your free account and unlock all inventory features.']})})]})]});const[e,s]=A.useState([]),[n,r]=A.useState(!0),[i,o]=A.useState(!1),[l,c]=A.useState(null),[u,d]=A.useState(""),[h,f]=A.useState("all"),[p,m]=A.useState({part_type:"Blade",part_name:"",part_data:null,quantity:1,notes:""}),[v,b]=A.useState({blades:[],ratchets:[],bits:[],lockchips:[],assistBlades:[]});A.useEffect(()=>{g(),x()},[t]);const g=async()=>{try{const{data:_,error:I}=await K.from("user_inventory").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});if(I)throw I;s(_||[])}catch(_){console.error("Error fetching inventory:",_)}finally{r(!1)}},x=async()=>{try{const[_,I,Q,se,X]=await Promise.all([K.from("beypart_blade").select("*"),K.from("beypart_ratchet").select("*"),K.from("beypart_bit").select("*"),K.from("beypart_lockchip").select("*"),K.from("beypart_assistblade").select("*")]);b({blades:_.data||[],ratchets:I.data||[],bits:Q.data||[],lockchips:se.data||[],assistBlades:X.data||[]})}catch(_){console.error("Error fetching parts data:",_)}},y=_=>{switch(_){case"Blade":return v.blades;case"Ratchet":return v.ratchets;case"Bit":return v.bits;case"Lockchip":return v.lockchips;case"Assist Blade":return v.assistBlades;default:return[]}},w=(_,I)=>{switch(I){case"Blade":return _.Blades;case"Ratchet":return _.Ratchet;case"Bit":return`${_.Bit} (${_.Shortcut})`;case"Lockchip":return _.Lockchip;case"Assist Blade":return`${_["Assist Blade Name"]} (${_["Assist Blade"]})`;default:return""}},k=()=>{o(!0),m({part_type:"Blade",part_name:"",part_data:null,quantity:1,notes:""})},E=_=>{c(_.id),m({part_type:_.part_type,part_name:_.part_name,part_data:_.part_data,quantity:_.quantity,notes:_.notes||""})},P=async()=>{if(!p.part_name||!p.part_data){alert("Please select a part.");return}try{const _={user_id:t.id,part_type:p.part_type,part_name:p.part_name,part_data:p.part_data,quantity:p.quantity,notes:p.notes||null};if(i){const{error:I}=await K.from("user_inventory").insert([_]);if(I)throw I}else if(l){const{error:I}=await K.from("user_inventory").update(_).eq("id",l);if(I)throw I}await g(),S()}catch(_){console.error("Error saving inventory item:",_),alert("Failed to save inventory item. Please try again.")}},R=async _=>{if(confirm("Are you sure you want to delete this inventory item?"))try{const{error:I}=await K.from("user_inventory").delete().eq("id",_);if(I)throw I;await g()}catch(I){console.error("Error deleting inventory item:",I),alert("Failed to delete inventory item. Please try again.")}},S=()=>{o(!1),c(null),m({part_type:"Blade",part_name:"",part_data:null,quantity:1,notes:""})},L=e.filter(_=>{const I=_.part_name.toLowerCase().includes(u.toLowerCase())||_.notes&&_.notes.toLowerCase().includes(u.toLowerCase()),Q=h==="all"||_.part_type===h;return I&&Q});return n?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading inventory..."})]})}):a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Inventory"}),a.jsx("p",{className:"text-gray-600",children:"Track your Beyblade parts collection"})]}),a.jsxs("button",{onClick:k,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[a.jsx(wr,{size:20}),a.jsx("span",{children:"Add Part"})]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(C_,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search parts or notes...",value:u,onChange:_=>d(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(v_,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsxs("select",{value:h,onChange:_=>f(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Parts"}),a.jsx("option",{value:"Blade",children:"Blades"}),a.jsx("option",{value:"Ratchet",children:"Ratchets"}),a.jsx("option",{value:"Bit",children:"Bits"}),a.jsx("option",{value:"Lockchip",children:"Lockchips"}),a.jsx("option",{value:"Assist Blade",children:"Assist Blades"})]})]})]})}),(i||l)&&a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:i?"Add New Part":"Edit Part"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Part Type"}),a.jsxs("select",{value:p.part_type,onChange:_=>m({...p,part_type:_.target.value,part_name:"",part_data:null}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"Blade",children:"Blade"}),a.jsx("option",{value:"Ratchet",children:"Ratchet"}),a.jsx("option",{value:"Bit",children:"Bit"}),a.jsx("option",{value:"Lockchip",children:"Lockchip"}),a.jsx("option",{value:"Assist Blade",children:"Assist Blade"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Part"}),a.jsxs("select",{value:p.part_data?JSON.stringify(p.part_data):"",onChange:_=>{if(_.target.value){const I=JSON.parse(_.target.value);m({...p,part_name:w(I,p.part_type),part_data:I})}},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select Part"}),y(p.part_type).map((_,I)=>a.jsx("option",{value:JSON.stringify(_),children:w(_,p.part_type)},I))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity"}),a.jsx("input",{type:"number",min:"1",value:p.quantity,onChange:_=>m({...p,quantity:parseInt(_.target.value)||1}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),a.jsx("input",{type:"text",value:p.notes,onChange:_=>m({...p,notes:_.target.value}),placeholder:"e.g., condition, source, etc.",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsxs("button",{onClick:S,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[a.jsx(ts,{size:16}),a.jsx("span",{children:"Cancel"})]}),a.jsxs("button",{onClick:P,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[a.jsx(Bi,{size:16}),a.jsx("span",{children:"Save"})]})]})]}),L.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(cu,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500",children:e.length===0?"No parts in your inventory yet":"No parts match your search"}),e.length===0&&a.jsx("button",{onClick:k,className:"mt-4 text-blue-600 hover:text-blue-800 underline",children:"Add your first part"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L.map(_=>a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("span",{className:"inline-block px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full mb-2",children:_.part_type}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:_.part_name})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>E(_),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",children:a.jsx(An,{size:16})}),a.jsx("button",{onClick:()=>R(_.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:a.jsx(rs,{size:16})})]})]}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Quantity:"}),a.jsx("span",{className:"font-medium",children:_.quantity})]}),_.notes&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Notes:"}),a.jsx("p",{className:"text-gray-700 mt-1",children:_.notes})]}),a.jsxs("div",{className:"text-xs text-gray-500 pt-2 border-t",children:["Added: ",new Date(_.created_at).toLocaleDateString()]})]}),_.part_data&&a.jsx("div",{className:"mt-4 pt-4 border-t",children:a.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:Object.entries(_.part_data).map(([I,Q])=>typeof Q=="number"&&Q>0&&["Attack","Defense","Stamina","Dash","Burst Res"].includes(I)?a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{className:"text-gray-600",children:[I,":"]}),a.jsx("span",{className:"font-medium",children:Q})]},I):null)})})]},_.id))})]})}function _S(){const{user:t}=It();if(!t||t.id.startsWith("guest-"))return a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Deck Builder"}),a.jsx("p",{className:"text-gray-600",children:"Create and save Beyblade deck presets"})]}),a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ca,{size:64,className:"mx-auto text-gray-400 mb-6"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Advanced Deck Builder"}),a.jsx("p",{className:"text-gray-600 mb-8 max-w-2xl mx-auto",children:"Create powerful Beyblade combinations from your inventory. Build multiple deck presets, analyze stats, and save your favorite combinations for quick tournament registration."}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-xl p-8 max-w-md mx-auto mb-8",children:[a.jsx("div",{className:"flex items-center justify-center mb-6",children:a.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-600 rounded-full flex items-center justify-center text-white text-2xl font-bold shadow-lg",children:""})}),a.jsx("h3",{className:"text-xl font-bold text-purple-900 mb-3",children:"Login to Start Building"}),a.jsx("p",{className:"text-purple-800 text-sm mb-6",children:"Create a free account to access the advanced deck builder and save your custom combinations!"}),a.jsxs("div",{className:"space-y-2 text-sm text-purple-700",children:[a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Build from your inventory"]}),a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Save unlimited deck presets"]}),a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Analyze combined stats"]})]})]}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-6 max-w-lg mx-auto",children:a.jsxs("p",{className:"text-gray-600 text-sm",children:[a.jsx("strong",{children:"Ready to build?"}),' Click the "Login" button in the top right corner to create your account and start building powerful deck combinations.']})})]})]});const[e,s]=A.useState([]),[n,r]=A.useState([]),[i,o]=A.useState(!0),[l,c]=A.useState(!1),[u,d]=A.useState(null),[h,f]=A.useState(""),[p,m]=A.useState(""),[v,b]=A.useState(3),[g,x]=A.useState([{id:"1",name:"",blade_line:"Basic",parts:{}}]);A.useEffect(()=>{y(),w()},[t]);const y=async()=>{try{const{data:O,error:j}=await K.from("deck_presets").select("*").eq("user_id",t.id).order("updated_at",{ascending:!1});if(j)throw j;s(O||[])}catch(O){console.error("Error fetching presets:",O)}finally{o(!1)}},w=async()=>{try{const{data:O,error:j}=await K.from("user_inventory").select("*").eq("user_id",t.id).gt("quantity",0);if(j)throw j;r(O||[])}catch(O){console.error("Error fetching inventory:",O)}},k=O=>{switch(O){case"Basic":case"Unique":case"X-Over":return["Blade","Ratchet","Bit"];case"Custom":return["Lockchip","Main Blade","Assist Blade","Ratchet","Bit"];default:return[]}},E=O=>{const j=O==="Main Blade"?"Blade":O;return n.filter(B=>B.part_type===j)},P=(O,j)=>{var T,z,V,W,C,D,M,q;if(!O||!k(O).every(H=>j[H]))return"";if(O==="Custom"){const H=((T=j.Lockchip)==null?void 0:T.Lockchip)||"",ee=((z=j["Main Blade"])==null?void 0:z.Blades)||"",ce=((V=j["Assist Blade"])==null?void 0:V["Assist Blade"])||"",qe=((W=j.Ratchet)==null?void 0:W.Ratchet)||"",St=((C=j.Bit)==null?void 0:C.Shortcut)||"";return`${H}${ee} ${ce}${qe}${St}`}else{const H=((D=j.Blade)==null?void 0:D.Blades)||"",ee=((M=j.Ratchet)==null?void 0:M.Ratchet)||"",ce=((q=j.Bit)==null?void 0:q.Shortcut)||"";return`${H} ${ee}${ce}`}},R=O=>{let j={attack:0,defense:0,stamina:0,dash:0,burstRes:0};return Object.values(O).forEach(N=>{N&&(j.attack+=N.Attack||0,j.defense+=N.Defense||0,j.stamina+=N.Stamina||0,j.dash+=N.Dash||0,j.burstRes+=N["Burst Res"]||0)}),j},S=()=>{c(!0),f(""),m(""),b(3),x([{id:"1",name:"",blade_line:"Basic",parts:{}}])},L=O=>{d(O.id),f(O.name),m(O.description||""),b(O.beyblades.length),x(O.beyblades)},_=()=>{g.length<v&&x([...g,{id:Date.now().toString(),name:"",blade_line:"Basic",parts:{}}])},I=O=>{g.length>1&&x(g.filter(j=>j.id!==O))},Q=(O,j,N)=>{x(g.map(B=>{if(B.id===O){const T={...B,[j]:N,parts:{}};return T.name=P(N,{}),T}return B}))},se=(O,j,N)=>{x(g.map(B=>{if(B.id===O){const T={...B.parts,[j]:N},z=P(B.blade_line,T);return{...B,parts:T,name:z}}return B}))},X=async()=>{if(!h.trim()){alert("Please enter a deck name.");return}const O=g.filter(j=>{const N=k(j.blade_line);return j.blade_line&&N.every(B=>j.parts[B])});if(O.length===0){alert("Please configure at least one complete Beyblade.");return}try{const j={user_id:t.id,name:h.trim(),description:p.trim()||null,beyblades:O};if(l){const{error:N}=await K.from("deck_presets").insert([j]);if(N)throw N}else if(u){const{error:N}=await K.from("deck_presets").update({...j,updated_at:new Date().toISOString()}).eq("id",u);if(N)throw N}await y(),Z(),alert("Deck preset saved successfully!")}catch(j){console.error("Error saving preset:",j),alert("Failed to save deck preset. Please try again.")}},te=async O=>{if(confirm("Are you sure you want to delete this deck preset?"))try{const{error:j}=await K.from("deck_presets").delete().eq("id",O);if(j)throw j;await y()}catch(j){console.error("Error deleting preset:",j),alert("Failed to delete deck preset. Please try again.")}},Z=()=>{c(!1),d(null),f(""),m(""),b(3),x([{id:"1",name:"",blade_line:"Basic",parts:{}}])},U=O=>{switch(O){case"attack":return a.jsx(j0,{size:12,className:"text-red-500"});case"defense":return a.jsx(pi,{size:12,className:"text-blue-500"});case"stamina":return a.jsx(wd,{size:12,className:"text-green-500"});case"dash":return a.jsx(ka,{size:12,className:"text-yellow-500"});case"burstRes":return a.jsx(v0,{size:12,className:"text-purple-500"});default:return null}};return i?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading deck builder..."})]})}):a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Deck Builder"}),a.jsx("p",{className:"text-gray-600",children:"Create and save Beyblade deck presets from your inventory"})]}),a.jsxs("button",{onClick:S,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[a.jsx(wr,{size:20}),a.jsx("span",{children:"New Deck"})]})]}),(l||u)&&a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:l?"Create New Deck":"Edit Deck"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deck Name"}),a.jsx("input",{type:"text",value:h,onChange:O=>f(O.target.value),placeholder:"Enter deck name",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),a.jsx("input",{type:"text",value:p,onChange:O=>m(O.target.value),placeholder:"Deck strategy or notes",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsx("div",{className:"space-y-6",children:g.map((O,j)=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Beyblade #",j+1]}),g.length>1&&a.jsx("button",{onClick:()=>I(O.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-full transition-colors",children:a.jsx(rs,{size:16})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blade Line"}),a.jsxs("select",{value:O.blade_line,onChange:N=>Q(O.id,"blade_line",N.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"Basic",children:"Basic"}),a.jsx("option",{value:"Unique",children:"Unique"}),a.jsx("option",{value:"Custom",children:"Custom"}),a.jsx("option",{value:"X-Over",children:"X-Over"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Generated Name"}),a.jsx("div",{className:"w-full border border-gray-200 rounded-md px-3 py-2 bg-gray-50 text-gray-700 font-mono",children:O.name||"Select all parts to generate name"})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:k(O.blade_line).map(N=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:N}),a.jsxs("select",{value:O.parts[N]?JSON.stringify(O.parts[N]):"",onChange:B=>{if(B.target.value){const T=JSON.parse(B.target.value);se(O.id,N,T)}},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsxs("option",{value:"",children:["Select ",N]}),E(N).filter(B=>{var T;return(N==="Blade"||N==="Main Blade")&&((T=B.part_data)!=null&&T.Line)?B.part_data.Line===O.blade_line:!0}).map(B=>a.jsxs("option",{value:JSON.stringify(B.part_data),children:[B.part_name," (Qty: ",B.quantity,")"]},B.id))]})]},N))}),Object.keys(O.parts).length>0&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsxs("h5",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center",children:[a.jsx(ka,{size:16,className:"mr-2"}),"Combined Stats"]}),a.jsx("div",{className:"grid grid-cols-5 gap-4",children:Object.entries(R(O.parts)).map(([N,B])=>a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex items-center justify-center mb-1",children:U(N)}),a.jsx("div",{className:"text-xs font-medium text-gray-600 capitalize",children:N==="burstRes"?"Burst Res":N}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:B})]},N))})]})]},O.id))}),g.length<5&&a.jsxs("button",{onClick:_,className:"mt-4 w-full border-2 border-dashed border-gray-300 rounded-lg p-4 text-gray-600 hover:border-blue-400 hover:text-blue-600 transition-colors flex items-center justify-center space-x-2",children:[a.jsx(wr,{size:20}),a.jsxs("span",{children:["Add Another Beyblade (",g.length,"/5)"]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsxs("button",{onClick:Z,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[a.jsx(ts,{size:16}),a.jsx("span",{children:"Cancel"})]}),a.jsxs("button",{onClick:X,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[a.jsx(Bi,{size:16}),a.jsx("span",{children:"Save Preset"})]})]})]}),e.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ca,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No deck presets yet"}),a.jsx("button",{onClick:S,className:"mt-4 text-blue-600 hover:text-blue-800 underline",children:"Create your first deck preset"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(O=>a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:O.name}),O.description&&a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:O.description})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>L(O),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",children:a.jsx(An,{size:16})}),a.jsx("button",{onClick:()=>te(O.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:a.jsx(rs,{size:16})})]})]}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:O.beyblades.length})," Beyblades configured"]}),a.jsxs("div",{className:"space-y-1",children:[O.beyblades.slice(0,3).map((j,N)=>a.jsx("div",{className:"text-xs text-gray-500 font-mono",children:j.name||`Beyblade ${N+1}`},N)),O.beyblades.length>3&&a.jsxs("div",{className:"text-xs text-gray-400",children:["+",O.beyblades.length-3," more..."]})]})]}),a.jsxs("div",{className:"text-xs text-gray-500 pt-2 border-t",children:["Updated: ",new Date(O.updated_at).toLocaleDateString()]})]},O.id))})]})}function jS(){const[t,e]=A.useState("dashboard"),[s,n]=A.useState(!1),r=()=>{switch(t){case"dashboard":return a.jsx(pf,{});case"tournaments":return a.jsx(D_,{});case"inventory":return a.jsx(wS,{});case"deck-builder":return a.jsx(_S,{});case"analytics":return a.jsx(gS,{});case"match-tracker":return a.jsx(xS,{});case"tournament-manager":return a.jsx(yS,{});case"user-management":return a.jsx(vS,{});case"database":return a.jsx(bS,{});default:return a.jsx(pf,{})}};return a.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[a.jsx(M_,{isOpen:s,currentView:t,onViewChange:e}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsx(O_,{onMenuToggle:()=>n(!s),isMenuOpen:s}),a.jsx("main",{className:"flex-1 overflow-y-auto",children:r()})]}),s&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>n(!1)})]})}function kS(){return a.jsx(f_,{children:a.jsx(jS,{})})}qg(document.getElementById("root")).render(a.jsx(A.StrictMode,{children:a.jsx(kS,{})}));
